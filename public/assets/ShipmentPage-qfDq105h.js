import{j as e,u as L,r as n,S as c,b as f}from"./index-BoRYnzf8.js";import{b as ee,a as U,R as se,T as ie,M as C}from"./Modal-DbefZiXI.js";/* empty css             */import{o as te,R as le}from"./EyeOutlined-Uf6zJJv_.js";function ae({formShipment:s,setFormShipment:l}){return e.jsx("fieldset",{className:"form-section",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipLoadDate",children:"Load Date"}),e.jsx("input",{type:"date",value:s.ship_load_date,onChange:i=>l({...s,ship_load_date:i.target.value}),id:"shipLoadDate"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipPickupLocation",children:"Pickup Location"}),e.jsx("input",{type:"text",value:s.ship_pickup_location,onChange:i=>l({...s,ship_pickup_location:i.target.value}),id:"shipPickupLocation"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipDeliveryLocation",children:"Delivery Location"}),e.jsx("input",{type:"text",value:s.ship_delivery_location,onChange:i=>l({...s,ship_delivery_location:i.target.value}),id:"shipDeliveryLocation"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipDriver",children:"Driver"}),e.jsx("input",{type:"text",value:s.ship_driver,onChange:i=>l({...s,ship_driver:i.target.value}),id:"shipDriver"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipWeight",children:"Weight"}),e.jsx("input",{type:"number",value:s.ship_weight,onChange:i=>l({...s,ship_weight:i.target.value}),id:"shipWeight"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipFtlLtl",children:"FTL/LTL"}),e.jsxs("select",{value:s.ship_ftl_ltl,onChange:i=>l({...s,ship_ftl_ltl:i.target.value}),id:"shipFtlLtl",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"FTL",children:"Full Truckload (FTL)"}),e.jsx("option",{value:"LTL",children:"Less Than Truckload (LTL)"})]})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{htmlFor:"shipTarp",style:{display:"inline-flex",alignItems:"center",width:"100%"},children:["Tarp",e.jsx("input",{type:"checkbox",checked:s.ship_tarp,onChange:i=>l({...s,ship_tarp:i.target.checked}),id:"shipTarp"})]})}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipEquipment",children:"Equipment"}),e.jsx("input",{type:"text",value:s.ship_equipment,onChange:i=>l({...s,ship_equipment:i.target.value}),id:"shipEquipment"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipPrice",children:"Price"}),e.jsx("input",{type:"number",value:s.ship_price,onChange:i=>l({...s,ship_price:i.target.value}),id:"shipPrice"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipNotes",children:"Notes"}),e.jsx("textarea",{value:s.ship_notes,onChange:i=>l({...s,ship_notes:i.target.value}),id:"shipNotes"})]})]})})}const re=({shipment:s,onClose:l,onUpdate:i})=>{const{userRole:_,setUserRole:u}=L(),[h,x]=n.useState({id:"",ship_load_date:"",ship_pickup_location:"",ship_delivery_location:"",ship_driver:"",ship_weight:"",ship_ftl_ltl:"",ship_tarp:!1,ship_equipment:"",ship_price:"",ship_notes:""}),p="http://127.0.0.1:8000/api";n.useEffect(()=>{s&&(console.log("Selected Shipment:",s),x({id:s.id,ship_load_date:s.ship_load_date||"",ship_pickup_location:s.ship_pickup_location||"",ship_delivery_location:s.ship_delivery_location||"",ship_driver:s.ship_driver||"",ship_weight:s.ship_weight||"",ship_ftl_ltl:s.ship_ftl_ltl||"",ship_tarp:s.ship_tarp||!1,ship_equipment:s.ship_equipment||"",ship_price:s.ship_price||"",ship_notes:s.ship_notes||""}))},[s]);const d=async()=>{try{const r=localStorage.getItem("token");if(!r){c.fire({icon:"error",title:"Unauthorized",text:"You are not logged in. Please log in again."});return}const v=await f.put(`${p}/shipment/${h.id}`,h,{headers:{Authorization:`Bearer ${r}`}});c.fire({icon:"success",title:"Updated!",text:"Shipment data has been updated successfully."}),i(v.data),l()}catch(r){console.error("Error updating shipment:",r),c.fire({icon:"error",title:"Oops...",text:r.response&&r.response.status===401?"Unauthorized. Please log in again.":"Failed to update shipment."})}};return e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:r=>{r.preventDefault(),d()},className:"form-main",children:[e.jsx(ae,{formShipment:h,setFormShipment:x}),e.jsx("button",{type:"submit",className:"btn-submit",children:"Update Shipment"})]})})},oe=({shipment:s,setShipment:l})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Shipment Details"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipLoadDate",children:"Load Date*"}),e.jsx("input",{type:"date",value:s.ship_load_date,onChange:i=>l({...s,ship_load_date:i.target.value}),id:"shipLoadDate",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipPickupLocation",children:"Pickup Location"}),e.jsx("input",{type:"text",value:s.ship_pickup_location,onChange:i=>l({...s,ship_pickup_location:i.target.value}),id:"shipPickupLocation"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipDeliveryLocation",children:"Delivery Location"}),e.jsx("input",{type:"text",value:s.ship_delivery_location,onChange:i=>l({...s,ship_delivery_location:i.target.value}),id:"shipDeliveryLocation"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipDriver",children:"Driver"}),e.jsx("input",{type:"text",value:s.ship_driver,onChange:i=>l({...s,ship_driver:i.target.value}),id:"shipDriver"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipWeight",children:"Weight"}),e.jsx("input",{type:"number",value:s.ship_weight,onChange:i=>l({...s,ship_weight:i.target.value}),id:"shipWeight"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipFtlLtl",children:"FTL/LTL"}),e.jsxs("select",{value:s.ship_ftl_ltl,onChange:i=>l({...s,ship_ftl_ltl:i.target.value}),id:"shipFtlLtl",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"FTL",children:"Full Truckload (FTL)"}),e.jsx("option",{value:"LTL",children:"Less Than Truckload (LTL)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipTarp",children:"Tarp"}),e.jsx("input",{type:"checkbox",checked:s.ship_tarp,onChange:i=>l({...s,ship_tarp:i.target.checked}),id:"shipTarp"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipEquipment",children:"Equipment"}),e.jsx("input",{type:"text",value:s.ship_equipment,onChange:i=>l({...s,ship_equipment:i.target.value}),id:"shipEquipment"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipPrice",children:"Price"}),e.jsx("input",{type:"number",value:s.ship_price,onChange:i=>l({...s,ship_price:i.target.value}),id:"shipPrice"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipNotes",children:"Notes"}),e.jsx("textarea",{value:s.ship_notes,onChange:i=>l({...s,ship_notes:i.target.value}),id:"shipNotes"})]})]})]}),ne=({onClose:s,onAddShipment:l})=>{const{userRole:i}=L(),[_,u]=n.useState({ship_load_date:"",ship_pickup_location:"",ship_delivery_location:"",ship_driver:"",ship_weight:"",ship_ftl_ltl:"",ship_tarp:!1,ship_equipment:"",ship_price:"",ship_notes:""}),h="http://127.0.0.1:8000/api",x=async d=>{d.preventDefault();try{const r=localStorage.getItem("token");if(!r){c.fire("Error","No token found","error");return}const v={Authorization:`Bearer ${r}`};let j;_.id?(j=await f.put(`${h}/shipment/${_.id}`,_,{headers:v}),c.fire("Updated!","Shipment data has been updated successfully.","success")):(j=await f.post(`${h}/shipment`,_,{headers:v}),c.fire("Saved!","Shipment data has been saved successfully.","success")),l(j.data),p(),s()}catch(r){console.error("Error saving/updating shipment:",r.response?r.response.data:r.message),c.fire("Error","An error occurred while saving/updating the shipment.","error")}},p=()=>{u({ship_load_date:"",ship_pickup_location:"",ship_delivery_location:"",ship_driver:"",ship_weight:"",ship_ftl_ltl:"",ship_tarp:!1,ship_equipment:"",ship_price:"",ship_notes:""})};return e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:x,className:"form-main",children:[e.jsx(oe,{shipment:_,setShipment:u}),e.jsx("button",{type:"submit",className:"btn-submit",children:"Submit"})]})})};function ce({formShipment:s}){return e.jsx("fieldset",{className:"form-section",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipLoadDate",children:"Load Date"}),e.jsx("div",{children:s.ship_load_date||"N/A"})," "]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipPickupLocation",children:"Pickup Location"}),e.jsx("div",{children:s.ship_pickup_location||"N/A"})," "]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipDeliveryLocation",children:"Delivery Location"}),e.jsx("div",{children:s.ship_delivery_location||"N/A"})," "]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipDriver",children:"Driver"}),e.jsx("div",{children:s.ship_driver||"N/A"})," "]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipWeight",children:"Weight"}),e.jsx("div",{children:s.ship_weight||"N/A"})," "]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipFtlLtl",children:"FTL/LTL"}),e.jsx("div",{children:s.ship_ftl_ltl||"N/A"})," "]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipTarp",children:"Tarp"}),e.jsx("div",{children:s.ship_tarp?"Yes":"No"})," "]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipEquipment",children:"Equipment"}),e.jsx("div",{children:s.ship_equipment||"N/A"})," "]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipPrice",children:"Price"}),e.jsx("div",{children:s.ship_price||"N/A"})," "]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"shipNotes",children:"Notes"}),e.jsx("div",{children:s.ship_notes||"N/A"})," "]})]})})}const de=({shipment:s,onClose:l,onUpdate:i})=>{const{userRole:_}=L(),[u,h]=n.useState({id:"",ship_load_date:"",ship_pickup_location:"",ship_delivery_location:"",ship_driver:"",ship_weight:"",ship_ftl_ltl:"",ship_tarp:!1,ship_equipment:"",ship_price:"",ship_notes:""}),x="http://127.0.0.1:8000/api";n.useEffect(()=>{s&&(console.log("Selected Shipment:",s),h({id:s.id,ship_load_date:s.ship_load_date||"",ship_pickup_location:s.ship_pickup_location||"",ship_delivery_location:s.ship_delivery_location||"",ship_driver:s.ship_driver||"",ship_weight:s.ship_weight||"",ship_ftl_ltl:s.ship_ftl_ltl||"",ship_tarp:s.ship_tarp||!1,ship_equipment:s.ship_equipment||"",ship_price:s.ship_price||"",ship_notes:s.ship_notes||""}))},[s]);const p=async()=>{try{const d=localStorage.getItem("token");if(!d){c.fire({icon:"error",title:"Unauthorized",text:"You are not logged in. Please log in again."});return}const r=await f.put(`${x}/shipment/${u.id}`,u,{headers:{Authorization:`Bearer ${d}`}});c.fire({icon:"success",title:"Updated!",text:"Shipment data has been updated successfully."}),i(r.data),l()}catch(d){console.error("Error updating shipment:",d),c.fire({icon:"error",title:"Oops...",text:d.response&&d.response.status===401?"Unauthorized. Please log in again.":"Failed to update shipment."})}};return e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:d=>{d.preventDefault(),p()},className:"form-main",children:[e.jsx(ce,{formShipment:u,setFormShipment:h}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"button",className:"btn-cancel",onClick:l,children:"Close"})})]})})},he=()=>{const{userRole:s}=L(),[l,i]=n.useState([]),[_,u]=n.useState(!0),[h,x]=n.useState(""),[p,d]=n.useState("created_at"),[r,v]=n.useState(!0),[j,M]=n.useState(1),[y,k]=n.useState(null),[O,D]=n.useState(!1),[z,S]=n.useState(!1),[B,T]=n.useState(!1),[m,b]=n.useState([]),P="http://127.0.0.1:8000/api",F=10;n.useEffect(()=>{(async()=>{try{const a=localStorage.getItem("token");if(!a)throw new Error("No token found");u(!0);const{data:o}=await f.get(`${P}/shipment`,{headers:{Authorization:`Bearer ${a}`}});console.log("Fetched Shipments:",o),i(o)}catch(a){console.error("Error loading shipments:",a),W(a)}finally{u(!1)}})()},[]);const W=t=>{t.response&&t.response.status===401&&c.fire({icon:"error",title:"Unauthorized",text:"You need to log in to access this resource."})},V=t=>{i(a=>a.map(o=>o.id===t.id?{...o,...t}:o))},Y=()=>{m.length===N.length?b([]):b(N.map(t=>t.id))},Q=t=>{m.includes(t)?b(a=>a.filter(o=>o!==t)):b(a=>[...a,t])},E=async()=>{if(m.length===0){c.fire({icon:"warning",title:"No shipments selected",text:"Please select shipments to delete."});return}if((await c.fire({title:"Are you sure?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete selected!",cancelButtonText:"No, cancel!"})).isConfirmed)try{const a=localStorage.getItem("token");if(!a)throw new Error("No token found");await Promise.all(m.map(o=>f.delete(`${P}/shipment/${o}`,{headers:{Authorization:`Bearer ${a}`}}))),i(o=>o.filter(g=>!m.includes(g.id))),b([]),c.fire("Deleted!","Selected shipments have been deleted.","success")}catch(a){console.error("Error deleting shipments:",a),c.fire({icon:"error",title:"Error!",text:"Failed to delete selected shipments."})}},A=t=>{p===t?v(!r):(d(t),v(!0))},q=t=>{k(t),D(!0)},$=()=>{D(!1),k(null)},H=()=>S(!0),w=()=>S(!1),G=t=>{k(t),T(!0)},I=()=>{T(!1),k(null)},J=h.toLowerCase(),R=l.filter(t=>Object.values(t).some(a=>a!=null&&a.toString().toLowerCase().includes(J))),N=R.sort((t,a)=>{let o=t[p]??"",g=a[p]??"";return typeof o=="string"?r?g.localeCompare(o):o.localeCompare(g):r?g-o:o-g}).slice((j-1)*F,j*F),K=Math.ceil(R.length/F),X=t=>{if(["checkbox","actions"].includes(t.key))return e.jsx("div",{className:"sortable-header",children:t.label});const g=p===t.key&&r?"▼":"▲";return e.jsxs("div",{className:"sortable-header",onClick:()=>A(t.key),children:[t.label,e.jsx("span",{className:"sort-icon",children:g})]})},Z=[{key:"checkbox",label:e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:e.jsx("input",{type:"checkbox",checked:m.length===N.length&&N.length>0,onChange:Y})}),render:t=>e.jsx("input",{type:"checkbox",checked:m.includes(t.id),onChange:()=>Q(t.id)})},{key:"ship_load_date",label:"Load Date"},{key:"ship_pickup_location",label:"Pickup Location"},{key:"ship_delivery_location",label:"Delivery Location"},{key:"ship_driver",label:"Driver"},{key:"ship_weight",label:"Weight"},{key:"ship_ftl_ltl",label:"FTL/LTL"},{key:"ship_tarp",label:"TARP",render:t=>e.jsx("span",{className:t.ship_tarp?"tarp-yes":"tarp-no",children:t.ship_tarp?"Yes":"No"})},{key:"ship_equipment",label:"Equipment"},{key:"ship_price",label:"Price"},{key:"ship_notes",label:"Notes"},{key:"actions",label:"Actions",render:t=>e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>G(t),className:"btn-view",children:e.jsx(te,{})}),e.jsx("button",{onClick:()=>q(t),className:"btn-edit",children:e.jsx(ee,{})}),e.jsx("button",{onClick:()=>E(t.id),className:"btn-delete",children:e.jsx(U,{})})]})}];return e.jsxs("div",{children:[e.jsxs("div",{className:"header-container",children:[e.jsx("div",{className:"header-container-left",children:e.jsx("h1",{className:"page-heading",children:"Shipments"})}),e.jsxs("div",{className:"search-container",children:[e.jsxs("div",{className:"search-input-wrapper",children:[e.jsx(le,{className:"search-icon"}),e.jsx("input",{className:"search-bar",value:h,onChange:t=>x(t.target.value)})]}),e.jsx("button",{onClick:H,className:"add-button",children:e.jsx(se,{})}),e.jsx("button",{onClick:E,className:"delete-button",children:e.jsx(U,{})})]})]}),_?e.jsx("div",{children:"Loading..."}):e.jsx(ie,{data:N,headers:Z.map(t=>({...t,label:X(t)})),handleSort:A,sortBy:p,sortDesc:r,currentPage:j,totalPages:K,setCurrentPage:M,onEditClick:q}),e.jsx(C,{isOpen:O,onClose:$,title:"Edit Shipment",children:y&&e.jsx(re,{shipment:y,onClose:$,onUpdate:V})}),e.jsx(C,{isOpen:z,onClose:w,title:"Add Shipment",children:e.jsx(ne,{onClose:w,onAddShipment:t=>{i(a=>[...a,t]),w()}})}),e.jsx(C,{isOpen:B,onClose:I,title:"Shipment Details",children:y&&e.jsx(de,{shipment:y,onClose:I})})]})},ve=()=>e.jsx("div",{children:e.jsx(he,{})});export{ve as default};
