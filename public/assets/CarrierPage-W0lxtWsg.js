import{r as v,S as D,b as q,j as e,u as he}from"./index-Cbvw9UaN.js";import{R as z,a as B,b as ue,T as ge,M}from"./Modal-BWB1UxEb.js";import $ from"./purify.es-Ci5xwkH_.js";import{z as b,o as L,s as C,n as K,c as xe,l as X,P as fe}from"./Pagination-CcGIvBBs.js";import{u as V}from"./useGoogleAutocomplete-Bc_iNf8a.js";/* empty css             */import{o as _e,R as ye}from"./EyeOutlined-CITt_E_k.js";import{R as be}from"./MailOutlined-CCvmWzeJ.js";const Z=a=>{if(!a)return"";const p=typeof a=="string"?new Date(a):a;return isNaN(p.getTime())?"":p.toISOString().split("T")[0]},ee="https://linkloadsapiprod.onrender.com/api",je=(a,p,h)=>{const[t,_]=v.useState({id:0,dba:"",legal_name:"",remit_name:"",acc_no:"",branch:"",website:"",fed_id_no:"",pref_curr:"",pay_terms:"",form_1099:!1,advertise:!1,advertise_email:"",carr_type:"",rating:"",brok_carr_aggmt:"",docket_no:"",dot_number:"",wcb_no:"",ca_bond_no:"",us_bond_no:"",scac:"",csa_approved:!1,hazmat:!1,smsc_code:"",approved:!1,li_provider:"",li_policy_no:"",li_coverage:0,li_start_date:"",li_end_date:"",ci_provider:"",ci_policy_no:"",ci_coverage:0,ci_start_date:"",ci_end_date:"",coi_cert:"",primary_address:"",primary_city:"",primary_state:"",primary_country:"",primary_postal:"",primary_phone:"",sameAsPrimary:!1,mailing_address:"",mailing_city:"",mailing_state:"",mailing_country:"",mailing_postal:"",mailing_phone:"",int_notes:"",contacts:[],equipments:[],lanes:[],created_at:"",updated_at:""});v.useEffect(()=>{if(a){const c=Array.isArray(a.contacts)?a.contacts:JSON.parse(a.contacts||"[]"),f=Array.isArray(a.lanes)?a.lanes:JSON.parse(a.lanes||"[]"),u={...a,contacts:c.length>0?c:[],lanes:f.length>0?f:[],li_start_date:Z(a.li_start_date),li_end_date:Z(a.li_end_date),ci_start_date:Z(a.ci_start_date),ci_end_date:Z(a.ci_end_date)};_(u)}},[a]);const m=()=>!!t.dba&&!!t.legal_name;return{formCarrier:t,setFormCarrier:_,updateCarrier:async()=>{if(!m()){D.fire("Validation Error","Please fill in all required fields.","error");return}try{const c=localStorage.getItem("token");if(!c){D.fire({icon:"error",title:"Unauthorized",text:"You are not logged in. Please log in again."});return}const f={Authorization:`Bearer ${c}`},u=new FormData;Object.keys(t).forEach(j=>{const E=t[j];j==="form_1099"||j==="advertise"||j==="approved"||j==="csa_approved"||j==="hazmat"?u.append(j,E?"1":"0"):j!=="brok_carr_aggmt"&&j!=="coi_cert"&&u.append(j,String(E||""))}),t.brok_carr_aggmt&&t.brok_carr_aggmt instanceof File&&u.append("brok_carr_aggmt",t.brok_carr_aggmt),t.coi_cert&&t.coi_cert instanceof File&&u.append("coi_cert",t.coi_cert);const N=t.id?await q.put(`${ee}/carrier/${t.id}`,t,{headers:f}):await q.post(`${ee}/carrier`,t,{headers:f});D.fire(t.id?"Success!":"Saved!","Carrier updated successfully.","success"),h(N.data),p()}catch(c){console.error("Error saving/updating carrier:",c.response?c.response.data:c.message),D.fire("Error","An error occurred while processing the carrier.","error")}},handleAddContact:()=>{_(c=>c&&{...c,contacts:[...c.contacts,{name:"",phone:"",email:"",fax:"",designation:""}]})},handleRemoveContact:c=>{_(f=>f&&{...f,contacts:f.contacts.filter((u,N)=>N!==c)})},handleContactChange:(c,f)=>{_(u=>u&&{...u,contacts:u.contacts.map((N,j)=>j===c?f:N)})},handleAddEquipment:()=>{_(c=>({...c,equipments:[...c.equipments,{equipment:""}]}))},handleRemoveEquipment:c=>{_(f=>({...f,equipments:f.equipments.filter((u,N)=>N!==c)}))},handleEquipmentChange:(c,f)=>{const u=t.equipments.map((N,j)=>j===c?f:N);_(N=>({...N,equipments:u}))},handleAddLane:()=>{_(c=>({...c,lanes:[...c.lanes,{from:"",to:""}]}))},handleRemoveLane:c=>{_(f=>({...f,lanes:f.lanes.filter((u,N)=>N!==c)}))},handleLaneChange:(c,f)=>{const u=t.lanes.map((N,j)=>j===c?f:N);_(N=>({...N,lanes:u}))}}},ve=b.object({dba:b.string().min(1,"DBA is required").max(100,"DBA cannot exceed 100 characters").regex(/^[a-zA-Z0-9\s.,'-]+$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed"),legal_name:b.string().min(1,"Legal Name is required").max(100,"Legal Name cannot exceed 100 characters").regex(/^[a-zA-Z0-9\s.,'-]+$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed"),remit_name:b.string().max(100,"Remit Name cannot exceed 100 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),acc_no:b.string().max(50,"Account Number cannot exceed 50 characters").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),branch:b.string().max(50,"Branch cannot exceed 50 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),website:b.string().max(150,"Website URL too long").url("Invalid URL").optional(),fed_id_no:b.string().max(20,"Federal ID Number cannot exceed 20 characters").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),pref_curr:b.enum(["USD","CAD"]).optional(),pay_terms:b.string().max(50,"Payment Terms cannot exceed 50 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),form_1099:b.boolean().optional(),advertise:b.boolean().optional(),advertise_email:b.string().max(255,"Email cannot exceed 255 characters").email("Invalid email format").optional()}),Ne=[{key:"dba",label:"DBA",placeholder:"Enter DBA",type:"text",required:!0},{key:"legal_name",label:"Legal Name",placeholder:"Enter Legal Name",type:"text",required:!0},{key:"remit_name",label:"Remit Name",placeholder:"Enter Remit Name",type:"text"},{key:"acc_no",label:"Account Number",placeholder:"Enter Account Number",type:"text"},{key:"branch",label:"Branch",placeholder:"Enter Branch",type:"text"},{key:"website",label:"Website",placeholder:"Enter Website URL",type:"text"},{key:"fed_id_no",label:"Federal ID Number",placeholder:"Enter Federal ID Number",type:"text"},{key:"pay_terms",label:"Payment Terms",placeholder:"Enter Payment Terms",type:"text"},{key:"advertise_email",label:"Advertise Email",placeholder:"Enter Advertise Email",type:"text"},{key:"advertise",label:"Advertise",type:"boolean"},{key:"form_1099",label:"1099",type:"boolean"}],Ae=({formCarrier:a,setFormCarrier:p})=>{const[h,t]=v.useState({}),_=(m,i)=>{let d=i;["approved","form_1099","advertise"].includes(m)&&typeof i!="boolean"?d=i==="true":typeof i!="boolean"&&(d=$.sanitize(i));let g="";const l={...a,[m]:d},n=ve.safeParse(l);if(!n.success){const s=n.error.errors.find(r=>r.path[0]===m);g=s?s.message:""}t(s=>({...s,[m]:g})),p(l)};return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"General"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[Ne.map(({key:m,label:i,placeholder:d,type:g,required:l})=>e.jsx("div",{children:e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[g==="boolean"?e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",id:m,checked:!!a[m],onChange:n=>_(m,n.target.checked),style:{transform:"scale(1.1)",cursor:"pointer",margin:0}}),e.jsx("label",{htmlFor:m,style:{margin:0,whiteSpace:"nowrap"},children:i})]}):e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[e.jsxs("label",{htmlFor:m,children:[i," ",l&&e.jsx("span",{style:{color:"red"},children:"*"})]})," ",e.jsx("input",{type:"text",id:m,placeholder:d,value:String(a[m]||""),onChange:n=>_(m,n.target.value)})]}),h[m]&&e.jsx("span",{className:"error",style:{color:"red"},children:h[m]})]},m)},m)),e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[e.jsx("label",{htmlFor:"pref_curr",children:"Preferred Currency"}),e.jsxs("select",{id:"pref_curr",value:a.pref_curr||"",onChange:m=>p(i=>({...i,pref_curr:m.target.value})),children:[e.jsx("option",{value:"",children:"Select Currency"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"CAD",children:"CAD"})]}),h.pref_curr&&e.jsx("span",{className:"error",style:{color:"red"},children:h.pref_curr})]})]})]})},Ce=b.object({carr_type:b.string().max(100,"Carrier Type must be at most 100 characters long").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),rating:b.string().max(100,"Rating must be at most 100 characters long").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),docket_no:b.string().max(50,"Docket# must be at most 50 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),dot_number:b.string().max(10,"Dot number must be at most 10 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),wcb_no:b.string().max(50,"WCB# must be at most 50 characters").regex(/^\d*$/,"WCB# must be numeric").optional(),ca_bond_no:b.string().max(50,"CA Bond# must be at most 50 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),us_bond_no:b.string().max(20,"US Bond# must be at most 20 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),scac:b.string().max(10,"SCAC must be at most 10 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),smsc_code:b.string().max(10,"SMSC code must be at most 10 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),csa_approved:b.boolean().optional(),hazmat:b.boolean().optional(),approved:b.boolean().optional()});function Ee({formCarrier:a,setFormCarrier:p}){const[h,t]=v.useState({}),[_,m]=v.useState(!1),i="https://linkloadsapiprod.onrender.com/api".trim()||"http://127.0.0.1:8000/api",d=(n,s)=>{let r=typeof s=="boolean"?s:$.sanitize(s),o="";const x={...a,[n]:r},y=Ce.safeParse(x);if(!y.success){const c=y.error.errors.find(f=>f.path[0]===n);o=c?c.message:""}t(c=>({...c,[n]:o})),p(x)},g=async n=>{var x,y,c;const s=(x=n.target.files)==null?void 0:x[0];if(!s)return;const r=new FormData;r.append("brok_carr_aggmt",s);const o=localStorage.getItem("token");try{const u=await(await fetch(`${i}/upload`,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:r})).json();if(console.log("Upload response:",u),(c=(y=u.files)==null?void 0:y.brok_carr_aggmt)!=null&&c.fileUrl){const N=i.replace("/api",""),j=u.files.brok_carr_aggmt.fileUrl.startsWith("http")?u.files.brok_carr_aggmt.fileUrl:`${N}${u.files.brok_carr_aggmt.fileUrl}`;p(E=>({...E,brok_carr_aggmt:j,brok_carr_aggmt_name:u.files.brok_carr_aggmt.fileName}))}else console.error("File URL not returned in response",u),alert("File upload failed: No file URL returned.")}catch(f){console.error("Error uploading file:",f),alert("Network error during file upload.")}finally{m(!1)}},l=[{key:"carr_type",label:"Carrier Type",placeholder:"Enter carrier type"},{key:"rating",label:"Rating",placeholder:"Enter Rating"},{key:"docket_no",label:"Docket Number",placeholder:"Enter docket number"},{key:"dot_number",label:"DOT Number",placeholder:"Enter DOT number"},{key:"wcb_no",label:"WCB Number",placeholder:"Enter WCB number"},{key:"ca_bond_no",label:"CA Bond Number",placeholder:"Enter CA bond number"},{key:"us_bond_no",label:"US Bond Number",placeholder:"Enter US bond number"},{key:"scac",label:"SCAC",placeholder:"Enter SCAC"},{key:"smsc_code",label:"SMSC Code",placeholder:"Enter SMSC code"},{key:"csa_approved",label:"CSA Approved",type:"boolean"},{key:"hazmat",label:"Hazmat",type:"boolean"},{key:"approved",label:"Approved",type:"boolean"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Carrier Details"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[l.map(({label:n,key:s,placeholder:r,type:o})=>e.jsxs("div",{children:[o==="boolean"?e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",id:s,checked:!!a[s],onChange:x=>{const y=x.target.checked;p(c=>({...c,[s]:y}))},style:{transform:"scale(1.1)",cursor:"pointer",margin:0}}),e.jsx("label",{htmlFor:s,style:{margin:0,whiteSpace:"nowrap"},children:n})]}):e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[e.jsx("label",{htmlFor:s,children:n}),e.jsx("input",{type:"text",id:s,value:String(a[s]||""),onChange:x=>d(s,x.target.value),placeholder:r})]}),h[s]&&e.jsx("span",{className:"error",style:{color:"red"},children:h[s]})]},s)),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"brokCarrAggmt",children:"Broker Carrier Agreement"}),e.jsx("input",{type:"file",onChange:g}),typeof a.brok_carr_aggmt=="string"&&a.brok_carr_aggmt&&e.jsx("div",{children:e.jsx("a",{href:a.brok_carr_aggmt,target:"_blank",rel:"noopener noreferrer",children:"Download Broker Carrier Agreement"})}),_&&e.jsx("p",{children:"Uploading..."})]})]})]})}const Se=a=>$.sanitize(a),ae=a=>new Date(a),we=a=>!a||!/^\d{4}-\d{2}-\d{2}$/.test(a)?"":a,$e=L({li_provider:C().max(150,"Liability Insurance Provider must be at most 150 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),li_policy_no:C().max(50,"Policy Number must be at most 50 characters").regex(/^[a-zA-Z0-9\s.-]*$/,"Only letters, numbers, spaces, periods, and hyphens allowed").optional(),li_coverage:K().optional(),li_start_date:C().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"Start date must be in YYYY-MM-DD format"}).optional(),li_end_date:C().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"End date must be in YYYY-MM-DD format"}).optional()}).refine(a=>!a.li_start_date||!a.li_end_date||ae(a.li_start_date)<=ae(a.li_end_date),{message:"End date must be after or equal to start date",path:["li_end_date"]}),Pe=({formCarrier:a,setFormCarrier:p})=>{const[h,t]=v.useState({}),_=(i,d)=>{const g=typeof d=="string"?Se(d):d;let l=g;(i==="li_start_date"||i==="li_end_date")&&typeof g=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(g)&&(l=g);const n={...a,[i]:l},s=$e.safeParse(n);if(s.success)t({});else{const r={};s.error.errors.forEach(o=>{r[o.path[0]]=o.message}),t(r)}p(n)},m=[{label:"Liability Insurance Provider",key:"li_provider",type:"text",placeholder:"Provider"},{label:"Policy Number",key:"li_policy_no",type:"text",placeholder:"Policy Number"},{label:"Coverage Amount",key:"li_coverage",type:"number",placeholder:"Coverage Amount"},{label:"Start Date",key:"li_start_date",type:"date"},{label:"End Date",key:"li_end_date",type:"date"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Liability Insurance Details"}),e.jsx("hr",{}),e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:m.map(({label:i,key:d,type:g,placeholder:l})=>e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:d,children:i}),e.jsx("input",{type:g,id:d,value:g==="date"?we(a[d]):a[d]||"",onChange:n=>_(d,g==="number"?n.target.value?Number(n.target.value):void 0:n.target.value),placeholder:l||""}),h[d]&&e.jsx("span",{className:"error-text",style:{color:"red"},children:h[d]})]},d))})]})},De=a=>$.sanitize(a),se=a=>new Date(a),Ie=a=>!a||!/^\d{4}-\d{2}-\d{2}$/.test(a)?"":a,ze=L({ci_provider:C().max(150,"Cargo Insurance Provider must be at most 150 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),ci_policy_no:C().max(50,"Policy Number must be at most 50 characters").regex(/^[a-zA-Z0-9\s.-]*$/,"Only letters, numbers, spaces, periods, and hyphens allowed").optional(),ci_coverage:K().optional(),ci_start_date:C().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"Start date must be in YYYY-MM-DD format"}).optional(),ci_end_date:C().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"End date must be in YYYY-MM-DD format"}).optional()}).refine(a=>!a.ci_start_date||!a.ci_end_date||se(a.ci_start_date)<=se(a.ci_end_date),{message:"End date must be after or equal to start date",path:["ci_end_date"]}),Fe=({formCarrier:a,setFormCarrier:p})=>{const[h,t]=v.useState({}),[_,m]=v.useState(!1),i="https://linkloadsapiprod.onrender.com/api".trim()||"http://127.0.0.1:8000/api",d=(n,s)=>{const r=typeof s=="string"?De(s):s;let o=r;(n==="ci_start_date"||n==="ci_end_date")&&typeof r=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(r)&&(o=r);const x={...a,[n]:o},y=ze.safeParse(x);if(y.success)t({});else{const c={};y.error.errors.forEach(f=>{c[f.path[0]]=f.message}),t(c)}p(x)},g=async n=>{var x,y,c;const s=(x=n.target.files)==null?void 0:x[0];if(!s)return;const r=new FormData;r.append("coi_cert",s);const o=localStorage.getItem("token");try{const u=await(await fetch(`${i}/upload`,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:r})).json();if(console.log("Upload response:",u),(c=(y=u.files)==null?void 0:y.coi_cert)!=null&&c.fileUrl){const N=i.replace("/api",""),j=u.files.coi_cert.fileUrl.startsWith("http")?u.files.coi_cert.fileUrl:`${N}${u.files.coi_cert.fileUrl}`;p(E=>({...E,coi_cert:j,coi_cert_name:u.files.coi_cert.fileName}))}else console.error("File URL not returned in response",u),alert("File upload failed: No file URL returned.")}catch(f){console.error("Error uploading file:",f),alert("Network error during file upload.")}finally{m(!1)}},l=[{label:"Cargo Insurance Provider",key:"ci_provider",type:"text",placeholder:"Provider"},{label:"Policy Number",key:"ci_policy_no",type:"text",placeholder:"Policy Number"},{label:"Coverage Amount",key:"ci_coverage",type:"number",placeholder:"Coverage Amount"},{label:"Start Date",key:"ci_start_date",type:"date"},{label:"End Date",key:"ci_end_date",type:"date"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Cargo Insurance Details"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[l.map(({label:n,key:s,type:r,placeholder:o})=>e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:s,children:n}),e.jsx("input",{type:r,id:s,value:r==="date"?Ie(a[s]):a[s]||"",onChange:x=>d(s,r==="number"?Number(x.target.value):x.target.value),placeholder:o||""}),h[s]&&e.jsx("span",{className:"error-text",style:{color:"red"},children:h[s]})]},s)),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"brokCarrAggmt",children:"Certificate of Insurance"}),e.jsx("input",{type:"file",onChange:g}),typeof a.coi_cert=="string"&&a.coi_cert&&e.jsx("div",{children:e.jsx("a",{href:a.coi_cert,target:"_blank",rel:"noopener noreferrer",children:"Download Certificate of Insurance"})}),_&&e.jsx("p",{children:"Uploading..."})]})]})]})},ke=b.object({primary_address:b.string().max(255,"Address is too long").regex(/^[a-zA-Z0-9\s,.'-]*$/,"Invalid street format").optional(),primary_city:b.string().max(200,"City name is too long").regex(/^[a-zA-Z\s.'-]*$/,"Invalid city format").optional(),primary_state:b.string().max(200,"Invalid state").regex(/^[a-zA-Z\s.'-]*$/,"Invalid state format").optional(),primary_country:b.string().max(100,"Invalid country").regex(/^[a-zA-Z\s.'-]*$/,"Invalid country format").optional(),primary_postal:b.string().max(20,"Postal code cannot exceed 20 characters").regex(/^[a-zA-Z0-9-\s ]*$/,"Invalid postal code").optional(),primary_phone:b.string().max(30,"Phone cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional()});function qe({formCarrier:a,setFormCarrier:p}){const[h,t]=v.useState({}),m=V(g=>{const l=n=>{var s,r;return((r=(s=g.address_components)==null?void 0:s.find(o=>o.types.includes(n)))==null?void 0:r.long_name)||""};p(n=>({...n,primary_address:`${l("street_number")} ${l("route")}`.trim(),primary_city:l("locality"),primary_state:l("administrative_area_level_1"),primary_country:l("country"),primary_postal:l("postal_code")}))}),i=(g,l)=>{const n=$.sanitize(l);let s="";const r={...a,[g]:n},o=ke.safeParse(r);if(!o.success){const x=o.error.errors.find(y=>y.path[0]===g);s=x?x.message:""}t(x=>({...x,[g]:s})),p(r)},d=[{label:"Street",key:"primary_address",placeholder:"Enter street address"},{label:"City",key:"primary_city",placeholder:"Enter city name"},{label:"State",key:"primary_state",placeholder:"Enter state"},{label:"Country",key:"primary_country",placeholder:"Enter country"},{label:"Postal Code",key:"primary_postal",placeholder:"Enter postal code"},{label:"Phone",key:"primary_phone",placeholder:"Enter phone number"}];return e.jsxs("fieldset",{children:[e.jsx("legend",{children:"Primary Address"}),e.jsx("hr",{}),e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:d.map(({label:g,key:l,placeholder:n})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:l,children:g}),e.jsx("input",{type:"text",id:l,placeholder:n,value:a[l]||"",onChange:s=>i(l,s.target.value),ref:l==="primary_address"?m:void 0}),h[l]&&e.jsx("span",{className:"error",style:{color:"red"},children:h[l]})]},l))})]})}const re=L({mailing_address:C().max(255,"Address is too long").regex(/^[a-zA-Z0-9\s,.'-]*$/,"Invalid street format").optional(),mailing_city:C().max(200,"City name is too long").regex(/^[a-zA-Z\s.'-]*$/,"Invalid city format").optional(),mailing_state:C().max(200,"Invalid state").regex(/^[a-zA-Z\s.'-]*$/,"Invalid state format").optional(),mailing_country:C().max(100,"Invalid country").regex(/^[a-zA-Z\s.'-]*$/,"Invalid country format").optional(),mailing_postal:C().max(20,"Postal code cannot exceed 20 characters").regex(/^[a-zA-Z0-9-\s ]*$/,"Invalid postal code").optional(),mailing_phone:C().max(30,"Phone cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional()});function Le({formCarrier:a,setFormCarrier:p}){const[h,t]=v.useState({}),[_,m]=v.useState(!1);v.useEffect(()=>{if(!_&&d.current){const s=new window.google.maps.places.Autocomplete(d.current,{types:["address"]});s.addListener("place_changed",()=>{const r=s.getPlace();i(r)})}},[_]);const i=s=>{const r=o=>{var x,y;return((y=(x=s.address_components)==null?void 0:x.find(c=>c.types.includes(o)))==null?void 0:y.long_name)||""};p(o=>({...o,mailing_address:`${r("street_number")} ${r("route")}`.trim(),mailing_city:r("locality"),mailing_state:r("administrative_area_level_1"),mailing_country:r("country"),mailing_postal:r("postal_code")}))},d=V(i),g=(s,r)=>{const o=$.sanitize(r);let x="";const y={...a,[s]:o};if(s in re.shape){const c=re.safeParse(y);if(!c.success){const f=c.error.errors.find(u=>u.path[0]===s);x=f?f.message:""}}t(c=>({...c,[s]:x})),p(y)},l=async s=>{const r=s.target.checked;m(r),p(o=>({...o,mailing_address:r?o.primary_address:"",mailing_city:r?o.primary_city:"",mailing_state:r?o.primary_state:"",mailing_country:r?o.primary_country:"",mailing_postal:r?o.primary_postal:"",mailing_phone:r?o.primary_phone:""}));try{const o=await fetch("/api/update-vendor",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({sameAsPrimary:r})});if(!o.ok)throw new Error("Failed to update the database");const x=await o.json();console.log("Update successful:",x)}catch(o){console.error("Error updating the database:",o)}},n=[{label:"Street",key:"mailing_address",placeholder:"Enter street address"},{label:"City",key:"mailing_city",placeholder:"Enter city name"},{label:"State",key:"mailing_state",placeholder:"Enter state"},{label:"Country",key:"mailing_country",placeholder:"Enter country"},{label:"Postal Code",key:"mailing_postal",placeholder:"Enter postal code"},{label:"Phone",key:"mailing_phone",placeholder:"Enter phone number"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Mailing Address"}),e.jsx("hr",{}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",id:"sameAsPrimary",checked:_,onChange:l,style:{transform:"scale(1.1)",cursor:"pointer",margin:0}}),e.jsx("label",{htmlFor:"sameAsPrimary",style:{margin:0,whiteSpace:"nowrap"},children:"Same as Primary Address"})]}),!_&&e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:n.map(({label:s,key:r})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:r,children:s}),e.jsx("input",{type:"text",id:r,placeholder:`Enter ${r.replace("mailing_","")}`,value:a[r]||"",onChange:o=>g(r,o.target.value),ref:r==="mailing_address"?d:void 0}),h[r]&&e.jsx("span",{className:"error",style:{color:"red"},children:h[r]})]},r))})]})}const Oe=b.object({int_notes:b.string().max(500,"Internal notes cannot exceed 500 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional()}),Re=({formCarrier:a,setFormCarrier:p})=>{const[h,t]=v.useState({}),_=(i,d)=>{const g=$.sanitize(d);let l="";const n={...a,[i]:g},s=Oe.safeParse(n);if(!s.success){const r=s.error.errors.find(o=>o.path[0]===i);l=r?r.message:""}t(r=>({...r,[i]:l})),p(n)},m=[{key:"int_notes",label:"Notes",placeholder:"Enter notes"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Internal Notes"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:m.map(({label:i,key:d,placeholder:g})=>{var l;return e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:d,children:i}),e.jsx("textarea",{id:d,value:((l=a[d])==null?void 0:l.toString())||"",onChange:n=>_(d,n.target.value),placeholder:g,rows:5,style:{resize:"vertical"}}),h[d]&&e.jsx("span",{className:"error",style:{color:"red"},children:h[d]})]},d)})})]})},Ue=b.object({name:b.string().max(200,"Name must be at most 200 characters").regex(/^[a-zA-Z\s.,'-]+$/,"Only letters, spaces, apostrophes, periods,commas and hyphens allowed").optional(),phone:b.string().max(30,"Phone cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional(),email:b.string().max(255,"Email must be at most 255 characters").email("Invalid email format").optional(),fax:b.string().max(30,"Fax cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid fax format").optional(),designation:b.string().max(100,"Designation must be at most 100 characters").regex(/^[a-zA-Z\s.,'-]+$/,"Only letters, spaces, apostrophes, periods,commas and hyphens allowed").optional()}),ie=({contacts:a,index:p,handleContactChange:h,handleRemoveContact:t,onAddContact:_})=>{const m=a[p]??{},[i,d]=v.useState({}),g=v.useCallback((n,s)=>{const r=$.sanitize(s);let o="";const x={...m,[n]:r},y=Ue.safeParse(x);if(!y.success){const c=y.error.errors.find(f=>f.path[0]===n);o=c?c.message:""}d(c=>({...c,[n]:o})),h(p,x)},[m,h,p]),l=[{label:"Name",key:"name",type:"text",placeholder:"Enter name"},{label:"Phone",key:"phone",type:"tel",placeholder:"Enter phone"},{label:"Email",key:"email",type:"email",placeholder:"Enter email"},{label:"Fax",key:"fax",type:"text",placeholder:"Enter fax"},{label:"Designation",key:"designation",type:"text",placeholder:"Enter designation"}];return e.jsxs("fieldset",{className:"form-section",style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"10px",gridTemplateColumns:"repeat(5, 1fr)",flex:1},children:l.map(({label:n,key:s,type:r,placeholder:o})=>e.jsxs("div",{className:"form-group",style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{htmlFor:`${s}-${p}`,children:n}),e.jsx("input",{id:`${s}-${p}`,type:r,name:s,value:m[s]||"",onChange:x=>g(s,x.target.value),placeholder:o}),i[s]&&e.jsx("span",{className:"error",style:{color:"red"},children:i[s]})]},s))}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0px"},children:[e.jsx("button",{type:"button",onClick:_,className:"add-button",children:e.jsx(z,{})}),e.jsx("button",{type:"button",onClick:()=>t(p),className:"delete-button",children:e.jsx(B,{})})]})]})},ce=["Dry Van 53'","Reefer 53'","Flatbed 53'"],Te=b.object({equipments:b.enum(ce,{errorMap:()=>({message:"Invalid equipment type"})}).optional()}),de=({equipments:a,index:p,handleEquipmentChange:h,handleRemoveEquipment:t,onAddEquipment:_})=>{const m=a[p]??{},[i,d]=v.useState({}),g=v.useCallback((l,n)=>{const s=$.sanitize(n);let r="";const o={...m,[l]:s},x=Te.safeParse(o);if(!x.success){const y=x.error.errors.find(c=>c.path[0]===l);r=y?y.message:""}d(y=>({...y,[l]:r})),h(p,o)},[m,h,p]);return e.jsxs("fieldset",{className:"form-section",style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsxs("div",{className:"form-group",style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{htmlFor:`equipment-${p}`,children:"Equipment Type"}),e.jsxs("select",{id:`equipment-${p}`,name:"equipment",value:m.equipment||"",onChange:l=>g("equipment",l.target.value),style:{width:"180px",padding:"8px"},children:[e.jsx("option",{value:"",children:"Select Equipment"}),ce.map(l=>e.jsx("option",{value:l,children:l},l))]}),i.type&&e.jsx("span",{className:"error",style:{color:"red"},children:i.type})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0px"},children:[e.jsx("button",{type:"button",onClick:_,className:"add-button",children:e.jsx(z,{})}),e.jsx("button",{type:"button",onClick:()=>t(p),className:"delete-button",children:e.jsx(B,{})})]})]})},J=["AB","AK","AL","AR","AZ","BC","CA","CO","CT","DE","FL","GA","HI","IA","ID","IL","IN","KS","KY","LA","MA","MB","MD","ME","MI","MN","MO","MS","MT","NB","NC","ND","NE","NH","NJ","NL","NM","NS","NV","NY","OH","OK","ON","OR","PA","PE","QC","RI","SC","SD","SK","TN","TX","UT","VA","VT","WA","WI","WV","WY"],Me=b.object({type:b.enum(J,{errorMap:()=>({message:"Invalid lane"})}).optional()}),me=({lanes:a,index:p,handleLaneChange:h,handleRemoveLane:t,onAddLane:_})=>{const m=a[p]??{},[i,d]=v.useState({}),g=v.useCallback((l,n)=>{const s=$.sanitize(n);let r="";const o={...m,[l]:s},x=Me.safeParse(o);if(!x.success){const y=x.error.errors.find(c=>c.path[0]===l);r=y?y.message:""}d(y=>({...y,[l]:r})),h(p,o)},[m,h,p]);return e.jsxs("fieldset",{className:"form-section",style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsxs("div",{className:"form-group",style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{htmlFor:`lane-${p}`,children:"From"}),e.jsxs("select",{id:`lane-${p}`,name:"type",value:m.from||"",onChange:l=>g("from",l.target.value),style:{width:"180px",padding:"8px"},children:[e.jsx("option",{value:"",children:"Select Lane"}),J.map(l=>e.jsx("option",{value:l,children:l},l))]}),i.type&&e.jsx("span",{className:"error",style:{color:"red"},children:i.type})]}),e.jsxs("div",{className:"form-group",style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{htmlFor:`lane-${p}`,children:"To"}),e.jsxs("select",{id:`lane-${p}`,name:"type",value:m.to||"",onChange:l=>g("to",l.target.value),style:{width:"180px",padding:"8px"},children:[e.jsx("option",{value:"",children:"Select Lane"}),J.map(l=>e.jsx("option",{value:l,children:l},l))]}),i.type&&e.jsx("span",{className:"error",style:{color:"red"},children:i.type})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0px"},children:[e.jsx("button",{type:"button",onClick:_,className:"add-button",children:e.jsx(z,{})}),e.jsx("button",{type:"button",onClick:()=>t(p),className:"delete-button",children:e.jsx(B,{})})]})]})},Ze=({carrier:a,onClose:p,onUpdate:h})=>{const{formCarrier:t,setFormCarrier:_,updateCarrier:m,handleAddContact:i,handleRemoveContact:d,handleContactChange:g,handleAddEquipment:l,handleRemoveEquipment:n,handleEquipmentChange:s,handleAddLane:r,handleRemoveLane:o,handleLaneChange:x}=je(a,p,h);return console.log("Form carrier:",t),e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:y=>{y.preventDefault(),m()},className:"form-main",children:[t&&e.jsxs(e.Fragment,{children:[e.jsx(Ae,{formCarrier:t,setFormCarrier:_}),e.jsx(Ee,{formCarrier:t,setFormCarrier:_}),e.jsx(Pe,{formCarrier:t,setFormCarrier:_}),e.jsx(Fe,{formCarrier:t,setFormCarrier:_}),e.jsx(qe,{formCarrier:t,setFormCarrier:_}),e.jsx(Le,{formCarrier:t,setFormCarrier:_}),e.jsx(Re,{formCarrier:t,setFormCarrier:_}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Contacts"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",children:[t.contacts.map((y,c)=>e.jsx(ie,{contacts:t.contacts,index:c,onAddContact:i,handleRemoveContact:d,handleContactChange:g},c)),t.contacts.length===0&&e.jsx("button",{type:"button",onClick:i,className:"add-button",children:e.jsx(z,{})})]})]}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Equipments"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",children:[t.equipments.map((y,c)=>e.jsx(de,{equipments:t.equipments,index:c,onAddEquipment:l,handleRemoveEquipment:n,handleEquipmentChange:s},c)),t.equipments.length===0&&e.jsx("button",{type:"button",onClick:l,className:"add-button",children:e.jsx(z,{})})]})]}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Lanes"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",children:[t.lanes.map((y,c)=>e.jsx(me,{lanes:t.lanes,index:c,onAddLane:r,handleRemoveLane:o,handleLaneChange:x},c)),t.lanes.length===0&&e.jsx("button",{type:"button",onClick:r,className:"add-button",children:e.jsx(z,{})})]})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn-submit",children:"Save"}),e.jsx("button",{type:"button",className:"btn-cancel",onClick:p,children:"Cancel"})]})]})})},Be=b.object({dba:b.string().min(1,"DBA is required").max(100,"DBA cannot exceed 100 characters").regex(/^[a-zA-Z0-9\s.,'-]+$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed"),legal_name:b.string().min(1,"Legal Name is required").max(100,"Legal Name cannot exceed 100 characters").regex(/^[a-zA-Z0-9\s.,'-]+$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed"),remit_name:b.string().max(100,"Remit Name cannot exceed 100 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),acc_no:b.string().max(50,"Account Number cannot exceed 50 characters").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),branch:b.string().max(50,"Branch cannot exceed 50 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),website:b.string().max(150,"Website URL too long").url("Invalid URL").optional(),fed_id_no:b.string().max(20,"Federal ID Number cannot exceed 20 characters").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),pref_curr:b.enum(["USD","CAD"]).optional(),pay_terms:b.string().max(50,"Payment Terms cannot exceed 50 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),form_1099:b.boolean().optional(),advertise:b.boolean().optional(),advertise_email:b.string().max(255,"Email cannot exceed 255 characters").email("Invalid email format").optional()}),Ve=[{key:"dba",label:"DBA",placeholder:"Enter DBA",type:"text",required:!0},{key:"legal_name",label:"Legal Name",placeholder:"Enter Legal Name",type:"text",required:!0},{key:"remit_name",label:"Remit Name",placeholder:"Enter Remit Name",type:"text"},{key:"acc_no",label:"Account Number",placeholder:"Enter Account Number",type:"text"},{key:"branch",label:"Branch",placeholder:"Enter Branch",type:"text"},{key:"website",label:"Website",placeholder:"Enter Website URL",type:"text"},{key:"fed_id_no",label:"Federal ID Number",placeholder:"Enter Federal ID Number",type:"text"},{key:"pay_terms",label:"Payment Terms",placeholder:"Enter Payment Terms",type:"text"},{key:"advertise_email",label:"Advertise Email",placeholder:"Enter Advertise Email",type:"text"},{key:"advertise",label:"Advertise",type:"boolean"},{key:"form_1099",label:"1099",type:"boolean"}],Ye=({carrier:a,setCarrier:p})=>{const[h,t]=v.useState({}),_=(m,i)=>{let d=i;["approved","form_1099","advertise"].includes(m)&&typeof i!="boolean"?d=i==="true":typeof i!="boolean"&&(d=$.sanitize(i));let g="";const l={...a,[m]:d},n=Be.safeParse(l);if(!n.success){const s=n.error.errors.find(r=>r.path[0]===m);g=s?s.message:""}t(s=>({...s,[m]:g})),p(l)};return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"General"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[Ve.map(({key:m,label:i,placeholder:d,type:g,required:l})=>e.jsx("div",{children:e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[g==="boolean"?e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",id:m,checked:!!a[m],onChange:n=>_(m,n.target.checked),style:{transform:"scale(1.1)",cursor:"pointer",margin:0}}),e.jsx("label",{htmlFor:m,style:{margin:0,whiteSpace:"nowrap"},children:i})]}):e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[e.jsxs("label",{htmlFor:m,children:[i," ",l&&e.jsx("span",{style:{color:"red"},children:"*"})]})," ",e.jsx("input",{type:"text",id:m,placeholder:d,value:String(a[m]||""),onChange:n=>_(m,n.target.value)})]}),h[m]&&e.jsx("span",{className:"error",style:{color:"red"},children:h[m]})]},m)},m)),e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[e.jsx("label",{htmlFor:"pref_curr",children:"Preferred Currency"}),e.jsxs("select",{id:"pref_curr",value:a.pref_curr||"",onChange:m=>p(i=>({...i,pref_curr:m.target.value})),children:[e.jsx("option",{value:"",children:"Select Currency"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"CAD",children:"CAD"})]}),h.pref_curr&&e.jsx("span",{className:"error",style:{color:"red"},children:h.pref_curr})]})]})]})},We=b.object({carr_type:b.string().max(100,"Carrier Type must be at most 100 characters long").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),rating:b.string().max(100,"Rating must be at most 100 characters long").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),docket_no:b.string().max(50,"Docket# must be at most 50 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),dot_number:b.string().max(10,"Dot number must be at most 10 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),wcb_no:b.string().max(50,"WCB# must be at most 50 characters").regex(/^\d*$/,"WCB# must be numeric").optional(),ca_bond_no:b.string().max(50,"CA Bond# must be at most 50 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),us_bond_no:b.string().max(20,"US Bond# must be at most 20 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),scac:b.string().max(10,"SCAC must be at most 10 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),smsc_code:b.string().max(10,"SMSC code must be at most 10 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),csa_approved:b.boolean().optional(),hazmat:b.boolean().optional(),approved:b.boolean().optional()}),He=({carrier:a,setCarrier:p})=>{const[h,t]=v.useState({}),[_,m]=v.useState(!1),i="https://linkloadsapiprod.onrender.com/api".trim()||"http://127.0.0.1:8000/api",d=(n,s)=>{let r=typeof s=="boolean"?s:$.sanitize(s),o="";const x={...a,[n]:r},y=We.safeParse(x);if(!y.success){const c=y.error.errors.find(f=>f.path[0]===n);o=c?c.message:""}t(c=>({...c,[n]:o})),p(x)},g=async n=>{var x,y,c;const s=(x=n.target.files)==null?void 0:x[0];if(!s)return;const r=new FormData;r.append("brok_carr_aggmt",s);const o=localStorage.getItem("token");try{const u=await(await fetch(`${i}/upload`,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:r})).json();if(console.log("Upload response:",u),(c=(y=u.files)==null?void 0:y.brok_carr_aggmt)!=null&&c.fileUrl){const N=i.replace("/api",""),j=u.files.brok_carr_aggmt.fileUrl.startsWith("http")?u.files.brok_carr_aggmt.fileUrl:`${N}${u.files.brok_carr_aggmt.fileUrl}`;p(E=>({...E,brok_carr_aggmt:j,brok_carr_aggmt_name:u.files.brok_carr_aggmt.fileName}))}else console.error("File URL not returned in response",u),alert("File upload failed: No file URL returned.")}catch(f){console.error("Error uploading file:",f),alert("Network error during file upload.")}finally{m(!1)}},l=[{key:"carr_type",label:"Carrier Type",placeholder:"Enter carrier type"},{key:"rating",label:"Rating",placeholder:"Enter Rating"},{key:"docket_no",label:"Docket Number",placeholder:"Enter docket number"},{key:"dot_number",label:"DOT Number",placeholder:"Enter DOT number"},{key:"wcb_no",label:"WCB Number",placeholder:"Enter WCB number"},{key:"ca_bond_no",label:"CA Bond Number",placeholder:"Enter CA bond number"},{key:"us_bond_no",label:"US Bond Number",placeholder:"Enter US bond number"},{key:"scac",label:"SCAC",placeholder:"Enter SCAC"},{key:"smsc_code",label:"SMSC Code",placeholder:"Enter SMSC code"},{key:"csa_approved",label:"CSA Approved",type:"boolean"},{key:"hazmat",label:"Hazmat",type:"boolean"},{key:"approved",label:"Approved",type:"boolean"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Carrier Details"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[l.map(({label:n,key:s,placeholder:r,type:o})=>e.jsxs("div",{children:[o==="boolean"?e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",id:s,checked:!!a[s],onChange:x=>{const y=x.target.checked;p(c=>({...c,[s]:y}))},style:{transform:"scale(1.1)",cursor:"pointer",margin:0}}),e.jsx("label",{htmlFor:s,style:{margin:0,whiteSpace:"nowrap"},children:n})]}):e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[e.jsx("label",{htmlFor:s,children:n}),e.jsx("input",{type:"text",id:s,value:String(a[s]||""),onChange:x=>d(s,x.target.value),placeholder:r})]}),h[s]&&e.jsx("span",{className:"error",style:{color:"red"},children:h[s]})]},s)),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"brokCarrAggmt",children:"Broker Carrier Agreement"}),e.jsx("input",{type:"file",onChange:g}),typeof a.brok_carr_aggmt=="string"&&a.brok_carr_aggmt&&e.jsx("div",{children:e.jsx("a",{href:a.brok_carr_aggmt,target:"_blank",rel:"noopener noreferrer",children:"Download Broker Carrier Agreement"})}),_&&e.jsx("p",{children:"Uploading..."})]})]})]})},Ge=a=>$.sanitize(a),te=a=>new Date(a),Je=a=>!a||!/^\d{4}-\d{2}-\d{2}$/.test(a)?"":a,Ke=L({li_provider:C().max(150,"Liability Insurance Provider must be at most 150 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),li_policy_no:C().max(50,"Policy Number must be at most 50 characters").regex(/^[a-zA-Z0-9\s.-]*$/,"Only letters, numbers, spaces, periods, and hyphens allowed").optional(),li_coverage:K().optional(),li_start_date:C().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"Start date must be in YYYY-MM-DD format"}).optional(),li_end_date:C().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"End date must be in YYYY-MM-DD format"}).optional()}).refine(a=>!a.li_start_date||!a.li_end_date||te(a.li_start_date)<=te(a.li_end_date),{message:"End date must be after or equal to start date",path:["li_end_date"]}),Qe=({carrier:a,setCarrier:p})=>{const[h,t]=v.useState({}),_=(i,d)=>{const g=typeof d=="string"?Ge(d):d;let l=g;(i==="li_start_date"||i==="li_end_date")&&typeof g=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(g)&&(l=g);const n={...a,[i]:l},s=Ke.safeParse(n);if(s.success)t({});else{const r={};s.error.errors.forEach(o=>{r[o.path[0]]=o.message}),t(r)}p(n)},m=[{label:"Liability Insurance Provider",key:"li_provider",type:"text",placeholder:"Provider"},{label:"Policy Number",key:"li_policy_no",type:"text",placeholder:"Policy Number"},{label:"Coverage Amount",key:"li_coverage",type:"number",placeholder:"Coverage Amount"},{label:"Start Date",key:"li_start_date",type:"date"},{label:"End Date",key:"li_end_date",type:"date"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Liability Insurance Details"}),e.jsx("hr",{}),e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:m.map(({label:i,key:d,type:g,placeholder:l})=>e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:d,children:i}),e.jsx("input",{type:g,id:d,value:g==="date"?Je(a[d]):a[d]||"",onChange:n=>_(d,g==="number"?n.target.value?Number(n.target.value):void 0:n.target.value),placeholder:l||""}),h[d]&&e.jsx("span",{className:"error-text",style:{color:"red"},children:h[d]})]},d))})]})},Xe=a=>$.sanitize(a),le=a=>new Date(a),ea=a=>!a||!/^\d{4}-\d{2}-\d{2}$/.test(a)?"":a,aa=L({ci_provider:C().max(150,"Cargo Insurance Provider must be at most 150 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional().or(X("")),ci_policy_no:C().max(50,"Policy Number must be at most 50 characters").regex(/^[a-zA-Z0-9\s.-]*$/,"Only letters, numbers, spaces, periods, and hyphens allowed").optional().or(X("")),ci_coverage:xe.number().optional(),ci_start_date:C().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"Start date must be in YYYY-MM-DD format"}).optional(),ci_end_date:C().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"End date must be in YYYY-MM-DD format"}).optional()}).refine(a=>!a.ci_start_date||!a.ci_end_date||le(a.ci_start_date)<=le(a.ci_end_date),{message:"End date must be after or equal to start date",path:["ci_end_date"]}),sa=({carrier:a,setCarrier:p})=>{const[h,t]=v.useState({}),[_,m]=v.useState(!1),i="https://linkloadsapiprod.onrender.com/api".trim()||"http://127.0.0.1:8000/api",d=(n,s)=>{const r=typeof s=="string"?Xe(s):s;let o=r;(n==="ci_start_date"||n==="ci_end_date")&&typeof r=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(r)&&(o=r);const x={...a,[n]:o},y=aa.safeParse(x);if(y.success)t({});else{const c={};y.error.errors.forEach(f=>{c[f.path[0]]=f.message}),t(c)}p(x)},g=async n=>{var x,y,c;const s=(x=n.target.files)==null?void 0:x[0];if(!s)return;m(!0);const r=new FormData;r.append("coi_cert",s);const o=localStorage.getItem("token");try{const u=await(await fetch(`${i}/upload`,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:r})).json();if(console.log("Upload response:",u),(c=(y=u.files)==null?void 0:y.coi_cert)!=null&&c.fileUrl){const N=i.replace("/api",""),j=u.files.coi_cert.fileUrl.startsWith("http")?u.files.coi_cert.fileUrl:`${N}${u.files.coi_cert.fileUrl}`;p(E=>({...E,coi_cert:j,coi_cert_name:u.files.coi_cert.fileName}))}else console.error("File URL not returned in response",u),alert("File upload failed: No file URL returned.")}catch(f){console.error("Error uploading file:",f),alert("Network error during file upload.")}finally{m(!1)}},l=[{label:"Cargo Insurance Provider",key:"ci_provider",type:"text",placeholder:"Provider"},{label:"Policy Number",key:"ci_policy_no",type:"text",placeholder:"Policy Number"},{label:"Coverage Amount",key:"ci_coverage",type:"number",placeholder:"Coverage Amount"},{label:"Start Date",key:"ci_start_date",type:"date"},{label:"End Date",key:"ci_end_date",type:"date"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Cargo Insurance Details"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[l.map(({label:n,key:s,type:r,placeholder:o})=>e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:s,children:n}),e.jsx("input",{type:r,id:s,value:r==="date"?ea(a[s]):a[s]||"",onChange:x=>d(s,r==="number"?Number(x.target.value):x.target.value),placeholder:o||""}),h[s]&&e.jsx("span",{className:"error-text",style:{color:"red"},children:h[s]})]},s)),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"coi_cert",children:"Certificate of Insurance"}),e.jsx("input",{type:"file",onChange:g}),typeof a.coi_cert=="string"&&a.coi_cert&&e.jsx("div",{children:e.jsx("a",{href:a.coi_cert,target:"_blank",rel:"noopener noreferrer",children:"Download Certificate of Insurance"})}),_&&e.jsx("p",{children:"Uploading..."})]})]})]})},ra=b.object({primary_address:b.string().max(255,"Address is too long").regex(/^[a-zA-Z0-9\s,.'-]*$/,"Invalid street format").optional(),primary_city:b.string().max(200,"City name is too long").regex(/^[a-zA-Z\s.'-]*$/,"Invalid city format").optional(),primary_state:b.string().max(200,"Invalid state").regex(/^[a-zA-Z\s.'-]*$/,"Invalid state format").optional(),primary_country:b.string().max(100,"Invalid country").regex(/^[a-zA-Z\s.'-]*$/,"Invalid country format").optional(),primary_postal:b.string().max(20,"Postal code cannot exceed 20 characters").regex(/^[a-zA-Z0-9-\s ]*$/,"Invalid postal code").optional(),primary_phone:b.string().max(30,"Phone cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional()}),ta=({carrier:a,setCarrier:p})=>{const[h,t]=v.useState({}),m=V(g=>{const l=n=>{var s,r;return((r=(s=g.address_components)==null?void 0:s.find(o=>o.types.includes(n)))==null?void 0:r.long_name)||""};p(n=>({...n,primary_address:`${l("street_number")} ${l("route")}`.trim(),primary_city:l("locality"),primary_state:l("administrative_area_level_1"),primary_country:l("country"),primary_postal:l("postal_code")}))}),i=(g,l)=>{const n=$.sanitize(l);let s="";const r={...a,[g]:n},o=ra.safeParse(r);if(!o.success){const x=o.error.errors.find(y=>y.path[0]===g);s=x?x.message:""}t(x=>({...x,[g]:s})),p(r)},d=[{label:"Street",key:"primary_address",placeholder:"Enter street address"},{label:"City",key:"primary_city",placeholder:"Enter city name"},{label:"State",key:"primary_state",placeholder:"Enter state"},{label:"Country",key:"primary_country",placeholder:"Enter country"},{label:"Postal Code",key:"primary_postal",placeholder:"Enter postal code"},{label:"Phone",key:"primary_phone",placeholder:"Enter phone number"}];return e.jsxs("fieldset",{children:[e.jsx("legend",{children:"Primary Address"}),e.jsx("hr",{}),e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:d.map(({label:g,key:l,placeholder:n})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:l,children:g}),e.jsx("input",{type:"text",id:l,placeholder:n,value:a[l]||"",onChange:s=>i(l,s.target.value),ref:l==="primary_address"?m:void 0}),h[l]&&e.jsx("span",{className:"error",style:{color:"red"},children:h[l]})]},l))})]})},ne=L({mailing_address:C().max(255,"Address is too long").regex(/^[a-zA-Z0-9\s,.'-]*$/,"Invalid street format").optional(),mailing_city:C().max(200,"City name is too long").regex(/^[a-zA-Z\s.'-]*$/,"Invalid city format").optional(),mailing_state:C().max(200,"Invalid state").regex(/^[a-zA-Z\s.'-]*$/,"Invalid state format").optional(),mailing_country:C().max(100,"Invalid country").regex(/^[a-zA-Z\s.'-]*$/,"Invalid country format").optional(),mailing_postal:C().max(20,"Postal code cannot exceed 20 characters").regex(/^[a-zA-Z0-9-\s ]*$/,"Invalid postal code").optional(),mailing_phone:C().max(30,"Phone cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional()}),la=({carrier:a,setCarrier:p})=>{const[h,t]=v.useState({}),[_,m]=v.useState(!1);v.useEffect(()=>{if(!_&&d.current){const s=new window.google.maps.places.Autocomplete(d.current,{types:["address"]});s.addListener("place_changed",()=>{const r=s.getPlace();i(r)})}},[_]);const i=s=>{const r=o=>{var x,y;return((y=(x=s.address_components)==null?void 0:x.find(c=>c.types.includes(o)))==null?void 0:y.long_name)||""};p(o=>({...o,mailing_address:`${r("street_number")} ${r("route")}`.trim(),mailing_city:r("locality"),mailing_state:r("administrative_area_level_1"),mailing_country:r("country"),mailing_postal:r("postal_code")}))},d=V(i),g=(s,r)=>{const o=$.sanitize(r);let x="";const y={...a,[s]:o};if(s in ne.shape){const c=ne.safeParse(y);if(!c.success){const f=c.error.errors.find(u=>u.path[0]===s);x=f?f.message:""}}t(c=>({...c,[s]:x})),p(y)},l=async s=>{const r=s.target.checked;m(r),p(o=>({...o,mailing_address:r?o.primary_address:"",mailing_city:r?o.primary_city:"",mailing_state:r?o.primary_state:"",mailing_country:r?o.primary_country:"",mailing_postal:r?o.primary_postal:"",mailing_phone:r?o.primary_phone:""}));try{const o=await fetch("/api/update-vendor",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({sameAsPrimary:r})});if(!o.ok)throw new Error("Failed to update the database");const x=await o.json();console.log("Update successful:",x)}catch(o){console.error("Error updating the database:",o)}},n=[{label:"Street",key:"mailing_address",placeholder:"Enter street address"},{label:"City",key:"mailing_city",placeholder:"Enter city name"},{label:"State",key:"mailing_state",placeholder:"Enter state"},{label:"Country",key:"mailing_country",placeholder:"Enter country"},{label:"Postal Code",key:"mailing_postal",placeholder:"Enter postal code"},{label:"Phone",key:"mailing_phone",placeholder:"Enter phone number"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Mailing Address"}),e.jsx("hr",{}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",id:"sameAsPrimary",checked:_,onChange:l,style:{transform:"scale(1.1)",cursor:"pointer",margin:0}}),e.jsx("label",{htmlFor:"sameAsPrimary",style:{margin:0,whiteSpace:"nowrap"},children:"Same as Primary Address"})]}),!_&&e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:n.map(({label:s,key:r})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:r,children:s}),e.jsx("input",{type:"text",id:r,placeholder:`Enter ${r.replace("mailing_","")}`,value:a[r]||"",onChange:o=>g(r,o.target.value),ref:r==="mailing_address"?d:void 0}),h[r]&&e.jsx("span",{className:"error",style:{color:"red"},children:h[r]})]},r))})]})},na=b.object({int_notes:b.string().max(500,"Internal notes cannot exceed 500 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional()}),oa=({carrier:a,setCarrier:p})=>{const[h,t]=v.useState({}),_=(i,d)=>{const g=$.sanitize(d);let l="";const n={...a,[i]:g},s=na.safeParse(n);if(!s.success){const r=s.error.errors.find(o=>o.path[0]===i);l=r?r.message:""}t(r=>({...r,[i]:l})),p(n)},m=[{key:"int_notes",label:"Notes",placeholder:"Enter notes"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Internal Notes"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:m.map(({label:i,key:d,placeholder:g})=>{var l;return e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:d,children:i}),e.jsx("textarea",{id:d,value:((l=a[d])==null?void 0:l.toString())||"",onChange:n=>_(d,n.target.value),placeholder:g,rows:5,style:{resize:"vertical"}}),h[d]&&e.jsx("span",{className:"error",style:{color:"red"},children:h[d]})]},d)})})]})},oe="https://linkloadsapiprod.onrender.com/api",ia=(a,p)=>{const h={id:0,dba:"",legal_name:"",remit_name:"",acc_no:"",branch:"",website:"",fed_id_no:"",pref_curr:"",pay_terms:"",form_1099:!1,advertise:!1,advertise_email:"",carr_type:"",rating:"",brok_carr_aggmt:null,docket_no:"",dot_number:"",wcb_no:"",ca_bond_no:"",us_bond_no:"",scac:"",csa_approved:!1,hazmat:!1,smsc_code:"",approved:!1,li_provider:"",li_policy_no:"",li_coverage:0,li_start_date:"",li_end_date:"",ci_provider:"",ci_policy_no:"",ci_coverage:0,ci_start_date:"",ci_end_date:"",coi_cert:null,primary_address:"",primary_city:"",primary_state:"",primary_country:"",primary_postal:"",primary_phone:"",sameAsPrimary:!1,mailing_address:"",mailing_city:"",mailing_state:"",mailing_country:"",mailing_postal:"",mailing_phone:"",int_notes:"",contacts:[],equipments:[],lanes:[],created_at:"",updated_at:""},[t,_]=v.useState(h),m=()=>!!t.dba&&!!t.legal_name,i=async f=>{if(f.preventDefault(),!m()){D.fire("Validation Error","Please fill in all required fields.","error");return}try{const u=localStorage.getItem("token");if(!u){D.fire("Error","No token found","error");return}const N={Authorization:`Bearer ${u}`},j=new FormData;Object.keys(t).forEach(I=>{const k=t[I];I==="form_1099"||I==="advertise"||I==="approved"||I==="csa_approved"||I==="hazmat"?j.append(I,k?"1":"0"):I!=="brok_carr_aggmt"&&I!=="coi_cert"&&j.append(I,String(k||""))}),t.brok_carr_aggmt&&t.brok_carr_aggmt instanceof File&&j.append("brok_carr_aggmt",t.brok_carr_aggmt),t.coi_cert&&t.coi_cert instanceof File&&j.append("coi_cert",t.coi_cert);const E=t.id?await q.put(`${oe}/carrier/${t.id}`,t,{headers:N}):await q.post(`${oe}/carrier`,t,{headers:N});D.fire(t.id?"Success!":"Saved!","Carrier added successfully.","success"),d(),p()}catch(u){console.error("Error saving/updating carrier:",u.response?u.response.data:u.message),D.fire("Error","An error occurred while processing the carrier.","error")}},d=()=>{_({id:0,dba:"",legal_name:"",remit_name:"",acc_no:"",branch:"",website:"",fed_id_no:"",pref_curr:"",pay_terms:"",form_1099:!1,advertise:!1,advertise_email:"",carr_type:"",rating:"",brok_carr_aggmt:null,docket_no:"",dot_number:"",wcb_no:"",ca_bond_no:"",us_bond_no:"",scac:"",csa_approved:!1,hazmat:!1,smsc_code:"",approved:!1,li_provider:"",li_policy_no:"",li_coverage:0,li_start_date:"",li_end_date:"",ci_provider:"",ci_policy_no:"",ci_coverage:0,ci_start_date:"",ci_end_date:"",coi_cert:null,primary_address:"",primary_city:"",primary_state:"",primary_country:"",primary_postal:"",primary_phone:"",sameAsPrimary:!1,mailing_address:"",mailing_city:"",mailing_state:"",mailing_country:"",mailing_postal:"",mailing_phone:"",int_notes:"",contacts:[],equipments:[],lanes:[],created_at:"",updated_at:""})};return{carrier:t,setCarrier:_,handleSubmit:i,handleAddContact:()=>{_(f=>({...f,contacts:[...f.contacts,{name:"",phone:"",email:"",fax:"",designation:""}]}))},handleRemoveContact:f=>{_(u=>({...u,contacts:u.contacts.filter((N,j)=>j!==f)}))},handleContactChange:(f,u)=>{const N=t.contacts.map((j,E)=>E===f?u:j);_(j=>({...j,contacts:N}))},handleAddEquipment:()=>{_(f=>({...f,equipments:[...f.equipments,{equipment:""}]}))},handleRemoveEquipment:f=>{_(u=>({...u,equipments:u.equipments.filter((N,j)=>j!==f)}))},handleEquipmentChange:(f,u)=>{const N=t.equipments.map((j,E)=>E===f?u:j);_(j=>({...j,equipments:N}))},handleAddLane:()=>{_(f=>({...f,lanes:[...f.lanes,{from:"",to:""}]}))},handleRemoveLane:f=>{_(u=>({...u,lanes:u.lanes.filter((N,j)=>j!==f)}))},handleLaneChange:(f,u)=>{const N=t.lanes.map((j,E)=>E===f?u:j);_(j=>({...j,lanes:N}))},clearCarrierForm:d}},ca=({onClose:a,onSuccess:p})=>{const{carrier:h,setCarrier:t,handleSubmit:_,handleAddContact:m,handleAddEquipment:i,handleAddLane:d,handleContactChange:g,handleRemoveContact:l,handleEquipmentChange:n,handleRemoveEquipment:s,handleLaneChange:r,handleRemoveLane:o}=ia(a,p);return e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:_,className:"form-main",children:[e.jsx(Ye,{carrier:h,setCarrier:t}),e.jsx(He,{carrier:h,setCarrier:t}),e.jsx(Qe,{carrier:h,setCarrier:t}),e.jsx(sa,{carrier:h,setCarrier:t}),e.jsx(ta,{carrier:h,setCarrier:t}),e.jsx(la,{carrier:h,setCarrier:t}),e.jsx(oa,{carrier:h,setCarrier:t}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Contacts"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:h.contacts.map((x,y)=>e.jsx(ie,{contacts:h.contacts,index:y,onAddContact:m,handleContactChange:g,handleRemoveContact:l},y))}),h.contacts.length===0&&e.jsx("button",{type:"button",onClick:m,className:"add-button",children:e.jsx(z,{})})]}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Equipment"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:h.equipments.map((x,y)=>e.jsx(de,{equipments:h.equipments,index:y,onAddEquipment:i,handleEquipmentChange:n,handleRemoveEquipment:s},y))}),h.equipments.length===0&&e.jsx("button",{type:"button",onClick:i,className:"add-button",children:e.jsx(z,{})})]}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Lanes"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:h.lanes.map((x,y)=>e.jsx(me,{lanes:h.lanes,index:y,onAddLane:d,handleLaneChange:r,handleRemoveLane:o},y))}),h.lanes.length===0&&e.jsx("button",{type:"button",onClick:d,className:"add-button",children:e.jsx(z,{})})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn-submit","data-testid":"submit-button",children:"Add Carrier"}),e.jsx("button",{type:"button",className:"btn-cancel",onClick:a,children:"Cancel"})]})]})})},da=({formCarrier:a})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"General"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"dba",children:"DBA"}),e.jsx("span",{children:a.dba||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"legalName",children:"Legal Name"}),e.jsx("span",{children:a.legal_name||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"remitName",children:"Remit Name"}),e.jsx("span",{children:a.remit_name||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"accNo",children:"Account Number"}),e.jsx("span",{children:a.acc_no||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"branch",children:"Branch"}),e.jsx("span",{children:a.branch||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"website",children:"Website"}),e.jsx("span",{children:a.website||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"fedIdNo",children:"Federal ID Number"}),e.jsx("span",{children:a.fed_id_no||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"creditStatus",children:"Preferred Currency"}),e.jsx("span",{children:a.pref_curr||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"payTerms",children:"Payment Terms"}),e.jsx("span",{children:a.pay_terms||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"form_1099",style:{display:"block"},children:"1099"}),e.jsx("span",{children:a.form_1099?"Yes":"No"})]}),e.jsx("div",{className:"form-group",style:{flex:1},children:e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"advertise",style:{display:"block"},children:"Advertise"}),e.jsx("span",{children:a.advertise?"Yes":"No"})]})}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"advertiseEmail",children:"Advertise Email"}),e.jsx("span",{children:a.advertise_email||"N/A"})]})]})]}),ma=({formCarrier:a})=>{const p=(h,t)=>h?e.jsx("div",{children:e.jsxs("a",{href:h,target:"_blank",rel:"noopener noreferrer",children:["Download ",t]})}):null;return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Carrier Details"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Carrier Type"}),e.jsx("p",{children:a.carr_type||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Rating"}),e.jsx("p",{children:a.rating||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Broker Carrier Agreement"}),p(a.brok_carr_aggmt,"Broker Carrier Agreement")]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Docket Number"}),e.jsx("p",{children:a.docket_no||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"DOT Number"}),e.jsx("p",{children:a.dot_number||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"WCB Number"}),e.jsx("p",{children:a.wcb_no||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"California Bond Number"}),e.jsx("p",{children:a.ca_bond_no||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"US Bond Number"}),e.jsx("p",{children:a.us_bond_no||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"SCAC"}),e.jsx("p",{children:a.scac||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"CSA Approved"}),e.jsx("p",{children:a.csa_approved?"Yes":"No"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Hazmat"}),e.jsx("p",{children:a.hazmat?"Yes":"No"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"SMS Code"}),e.jsx("p",{children:a.smsc_code||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Approved"}),e.jsx("p",{children:a.approved?"Yes":"No"})]})]})]})},pa=({formCarrier:a})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Liability Insurance Details"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"liProvider",children:"Liability Insurance Provider"}),e.jsx("span",{children:a.li_provider||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"liPolicyNo",children:"Policy Number"}),e.jsx("span",{children:a.li_policy_no||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"liCoverage",children:"Coverage Amount"}),e.jsx("span",{children:a.li_coverage||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"liStartDate",children:"Start Date"}),e.jsx("span",{children:a.li_start_date||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"liEndDate",children:"End Date"}),e.jsx("span",{children:a.li_end_date||"N/A"})]})]})]}),ha=({formCarrier:a})=>{const p=(h,t)=>h?e.jsx("div",{children:e.jsxs("a",{href:h,target:"_blank",rel:"noopener noreferrer",children:["Download ",t]})}):null;return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Cargo Insurance Details"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Cargo Insurance Provider"}),e.jsx("p",{children:a.ci_provider||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Policy Number"}),e.jsx("p",{children:a.ci_policy_no||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Coverage Amount"}),e.jsx("p",{children:a.ci_coverage||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Start Date"}),e.jsx("p",{children:a.ci_start_date||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"End Date"}),e.jsx("p",{children:a.ci_end_date||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Certificate of Insurance"}),p(a.coi_cert,"Certificate of Insurance")]})]})]})},ua=({formCarrier:a})=>e.jsxs("fieldset",{children:[e.jsx("legend",{children:"Primary Address"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"primaryAddressStreet",children:"Street"}),e.jsx("span",{children:a.primary_address||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"primaryAddressCity",children:"City"}),e.jsx("span",{children:a.primary_city||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"primaryAddressState",children:"State"}),e.jsx("span",{children:a.primary_state||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"primaryAddressCountry",children:"Country"}),e.jsx("span",{children:a.primary_country||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"primaryAddressPostalCode",children:"Postal Code"}),e.jsx("span",{children:a.primary_postal||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"primaryAddressUnitNo",children:"Phone"}),e.jsx("span",{children:a.primary_phone||"N/A"})]})]})]}),ga=({formCarrier:a})=>e.jsxs("fieldset",{children:[e.jsx("legend",{children:"Mailing Address"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"inline-flex",alignItems:"center",width:"100%"},htmlFor:"mailingAddressSame",children:"Same as Primary Address"}),e.jsx("span",{children:a.sameAsPrimary?"Yes":"No"})]}),!a.sameAsPrimary&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"mailingAddressStreet",children:"Street"}),e.jsx("span",{children:a.mailing_address||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"mailingAddressCity",children:"City"}),e.jsx("span",{children:a.mailing_city||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"mailingAddressState",children:"State"}),e.jsx("span",{children:a.mailing_state||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"mailingAddressCountry",children:"Country"}),e.jsx("span",{children:a.mailing_country||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"mailingAddressPostalCode",children:"Postal Code"}),e.jsx("span",{children:a.mailing_postal||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"mailingAddressUnitNo",children:"Phone"}),e.jsx("span",{children:a.mailing_phone||"N/A"})]})]})]})]}),xa=({contact:a})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Name"}),e.jsx("span",{children:a.name||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Contact No"}),e.jsx("span",{children:a.phone||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Email"}),e.jsx("span",{children:a.email||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Fax"}),e.jsx("span",{children:a.fax||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Designation"}),e.jsx("span",{children:a.designation||"N/A"})]})]})]}),fa=({equipment:a})=>e.jsx("fieldset",{className:"form-section",children:e.jsx("div",{className:"contact-form",children:e.jsx("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:e.jsxs("div",{className:"form-group",style:{flex:1,width:"23.3rem"},children:[e.jsx("label",{htmlFor:"customerType",children:"Equipment Type"}),e.jsx("span",{children:a.equipment||"N/A"})]})})})}),_a=({lane:a})=>e.jsx("fieldset",{className:"form-section",children:e.jsx("div",{className:"contact-form",children:e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"From"}),e.jsx("span",{children:a.from||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"To"}),e.jsx("span",{children:a.to||"N/A"})]})]})})}),ya=({carrier:a,onClose:p})=>{const{userRole:h}=he(),[t,_]=v.useState({id:0,dba:"",legal_name:"",remit_name:"",acc_no:"",branch:"",website:"",fed_id_no:"",pref_curr:"",pay_terms:"",form_1099:!1,advertise:!1,advertise_email:"",carr_type:"",rating:"",brok_carr_aggmt:"",docket_no:"",dot_number:"",wcb_no:"",ca_bond_no:"",us_bond_no:"",scac:"",csa_approved:!1,hazmat:!1,smsc_code:"",approved:!1,li_provider:"",li_policy_no:"",li_coverage:0,li_start_date:"",li_end_date:"",ci_provider:"",ci_policy_no:"",ci_coverage:0,ci_start_date:"",ci_end_date:"",coi_cert:"",primary_address:"",primary_city:"",primary_state:"",primary_country:"",primary_postal:"",primary_phone:"",sameAsPrimary:!1,mailing_address:"",mailing_city:"",mailing_state:"",mailing_country:"",mailing_postal:"",mailing_phone:"",int_notes:"",contacts:[],equipments:[],lanes:[],created_at:"",updated_at:""});return v.useEffect(()=>{a&&_({...a,contacts:Array.isArray(a.contacts)?a.contacts:JSON.parse(a.contacts||"[]"),equipments:Array.isArray(a.equipments)?a.equipments:JSON.parse(a.equipments||"[]"),lanes:Array.isArray(a.lanes)?a.lanes:JSON.parse(a.lanes||"[]")})},[a]),e.jsx("div",{className:"form-container",children:e.jsxs("form",{className:"form-main",children:[e.jsx(da,{formCarrier:t}),e.jsx(ma,{formCarrier:t}),e.jsx(pa,{formCarrier:t}),e.jsx(ha,{formCarrier:t}),e.jsx(ua,{formCarrier:t}),e.jsx(ga,{formCarrier:t}),t.contacts.length>0&&e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Contacts"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:t.contacts.map((m,i)=>e.jsx(xa,{contact:m,index:i},i))})]}),t.equipments.length>0&&e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Equipments"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:t.equipments.map((m,i)=>e.jsx(fa,{equipment:m,index:i},i))})]}),t.lanes.length>0&&e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Lanes"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:t.lanes.map((m,i)=>e.jsx(_a,{lane:m,index:i},i))})]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"button",className:"btn-cancel",onClick:p,children:"Close"})})]})})},G="https://linkloadsapiprod.onrender.com/api",ba=()=>{const[a,p]=v.useState([]),[h,t]=v.useState(!0),[_,m]=v.useState(""),[i,d]=v.useState("created_at"),[g,l]=v.useState(!0),[n,s]=v.useState(1),[r,o]=v.useState(null),[x,y]=v.useState(!1),[c,f]=v.useState(!1),[u,N]=v.useState([]),[j,E]=v.useState(!1),[I,k]=v.useState(!1),[O,Q]=v.useState(10),[R,Y]=v.useState({subject:"",content:""}),U=async()=>{try{const A=localStorage.getItem("token");if(!A)throw new Error("No token found");t(!0);const{data:S}=await q.get(`${G}/carrier`,{headers:{Authorization:`Bearer ${A}`}});p(S)}catch(A){console.error("Error loading carriers:",A),W(A)}finally{t(!1)}};v.useEffect(()=>{U()},[]);const W=A=>{var S;((S=A.response)==null?void 0:S.status)===401&&D.fire({icon:"error",title:"Unauthorized",text:"You need to log in to access this resource."})},T=a.filter(A=>Object.values(A).some(S=>S&&S.toString().toLowerCase().includes(_.toLowerCase()))),H=T.sort((A,S)=>{let P=A[i]??"",F=S[i]??"";return typeof P=="string"&&typeof F=="string"?g?F.localeCompare(P):P.localeCompare(F):typeof P=="number"&&typeof F=="number"?g?F-P:P-F:0}).slice((n-1)*O,n*O),pe=Math.ceil(T.length/O);return{fetchCarriers:U,carriers:a,loading:h,searchQuery:_,setSearchQuery:m,sortBy:i,sortDesc:g,selectedCarriers:u,setSelectedCarriers:N,paginatedData:H,totalPages:pe,currentPage:n,setCurrentPage:s,isEditModalOpen:x,isAddModalOpen:c,isViewModalOpen:j,isEmailModalOpen:I,selectedCarrier:r,setEditModalOpen:y,setAddModalOpen:f,setViewModalOpen:E,setEmailModalOpen:k,toggleSelectAll:()=>{u.length===H.length?N([]):N(H.map(A=>A.id).filter(A=>A!==void 0))},toggleSelect:A=>{N(S=>S.includes(A)?S.filter(P=>P!==A):[...S,A])},deleteSelected:async()=>{if(!u.length){D.fire({icon:"warning",title:"No record selected",text:"Please select a record to delete."});return}if((await D.fire({title:"Are you sure?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete selected!",cancelButtonText:"No, cancel!"})).isConfirmed)try{const S=localStorage.getItem("token");if(!S)throw new Error("No token found");await Promise.all(u.map(P=>q.delete(`${G}/carrier/${P}`,{headers:{Authorization:`Bearer ${S}`}}))),p(P=>P.filter(F=>!u.includes(F.id))),N([]),D.fire("The selected carriers have been deleted.","success")}catch(S){console.error("Error deleting carriers:",S),D.fire({icon:"error",title:"Error!",text:"Failed to delete selected carriers."})}},openEditModal:A=>{o(A),y(!0)},emailData:R,setEmailData:Y,sendEmails:async()=>{if(u.length===0){D.fire({icon:"warning",title:"No carriers selected",text:"Please select carriers to send emails to."});return}try{const A=localStorage.getItem("token");if(!A)throw new Error("No token found");await q.post(`${G}/email`,{ids:u,...R,module:"carriers"},{headers:{Authorization:`Bearer ${A}`,"Content-Type":"application/json"}}),D.fire("Success!","Emails have been sent.","success"),k(!1),N([])}catch(A){console.error("Error sending emails:",A),D.fire("Error!","Failed to send emails.","error")}},openViewModal:A=>{o(A),E(!0)},handleSort:A=>{i===A?l(!g):(d(A),l(!1))},updateCarrier:A=>{p(S=>S.map(P=>P.id===A.id?{...P,...A}:P))},handlePageChange:A=>{s(A)}}},ja=()=>{const{fetchCarriers:a,carriers:p,loading:h,searchQuery:t,setSearchQuery:_,sortBy:m,sortDesc:i,selectedCarriers:d,paginatedData:g,totalPages:l,currentPage:n,isEditModalOpen:s,isAddModalOpen:r,isViewModalOpen:o,isEmailModalOpen:x,selectedCarrier:y,setEditModalOpen:c,setAddModalOpen:f,setViewModalOpen:u,setEmailModalOpen:N,sendEmails:j,toggleSelectAll:E,toggleSelect:I,deleteSelected:k,openEditModal:O,openViewModal:Q,handleSort:R,updateCarrier:Y,handlePageChange:U}=ba(),W=w=>w.key==="checkbox"||w.key==="actions"?w.label:e.jsxs("div",{className:"sortable-header",onClick:()=>R(w.key),children:[w.label,e.jsx("span",{className:"sort-icon",children:m===w.key?i?"":"":""})]}),T=[{key:"checkbox",label:e.jsx("input",{type:"checkbox",onChange:E,checked:d.length===g.length&&g.length>0}),render:w=>e.jsx("input",{type:"checkbox",checked:d.includes(w.id),onChange:()=>I(w.id)})},{key:"dba",label:"DBA"},{key:"legal_name",label:"Legal Name"},{key:"primary_phone",label:"Phone"},{key:"primary_city",label:"City"},{key:"carr_type",label:"Carrier Type"},{key:"rating",label:"Rating"},{key:"actions",label:"",render:w=>e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Q(w),className:"btn-view",children:e.jsx(_e,{})}),e.jsx("button",{onClick:()=>O(w),className:"btn-edit",children:e.jsx(ue,{})})]})}];return e.jsxs("div",{children:[e.jsxs("div",{className:"header-container",children:[e.jsx("div",{className:"header-container-left",children:e.jsx("h1",{className:"page-heading",children:"Carriers"})}),e.jsxs("div",{className:"search-container",children:[e.jsxs("div",{className:"search-input-wrapper",children:[e.jsx(ye,{className:"search-icon"}),e.jsx("input",{className:"search-bar",value:t,onChange:w=>_(w.target.value)})]}),e.jsxs("button",{onClick:()=>f(!0),className:"add-button",children:[e.jsx(z,{}),"New"]}),e.jsx("button",{onClick:()=>N(!0),className:"send-email-button",disabled:d.length===0,children:e.jsx(be,{})}),e.jsx("button",{onClick:k,className:"delete-button",children:e.jsx(B,{})})]})]}),h?e.jsx("div",{children:"Loading..."}):p.length===0?e.jsx("div",{className:"no-record",children:"No records found"}):e.jsx(ge,{data:g,headers:T.map(w=>({...w,label:W(w)})),handleSort:R,sortBy:m,sortDesc:i}),e.jsx(fe,{currentPage:n,totalPages:l,onPageChange:U}),e.jsx(M,{isOpen:s,title:"Edit Carrier",onClose:()=>c(!1),children:y&&e.jsx(Ze,{carrier:y,onUpdate:Y,onClose:()=>c(!1)})}),e.jsx(M,{isOpen:r,onClose:()=>f(!1),title:"Add Carrier",children:e.jsx(ca,{onClose:()=>f(!1),onSuccess:a})}),e.jsx(M,{isOpen:x,onClose:()=>N(!1),title:"Send Email",children:e.jsx("button",{onClick:j,children:"Send"})}),e.jsx(M,{isOpen:o,onClose:()=>u(!1),title:"Carrier Details",children:y&&e.jsx(ya,{carrier:y,onClose:()=>u(!1)})})]})},Ra=()=>e.jsx("div",{children:e.jsx(ja,{})});export{Ra as default};
