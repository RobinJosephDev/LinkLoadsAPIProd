import{r as C,_ as Ae,j as e,b as O,S as _}from"./index-DsiLbZ9r.js";import{R as H,a as ee,b as bt,T as St,M as ae}from"./Modal-Dy5-4all.js";import{z as f,P as Ct}from"./Pagination-rW2CcH_q.js";import te from"./purify.es-Ci5xwkH_.js";import{u as $e}from"./useGoogleAutocomplete--4rnTPXT.js";/* empty css             */import{D as At,a as Nt,E as Te,u as wt,R as Pt}from"./useDispatchTable-AqxIJibU.js";import{R as Re}from"./CalendarOutlined-DLpo-Ndt.js";import{R as He}from"./ClockCircleOutlined-x9IHHDco.js";import{I as Ne,o as Dt,R as Ft}from"./EyeOutlined-B8J0i9Xp.js";var Et={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},Bt=function(r,s){return C.createElement(Ne,Ae({},r,{ref:s,icon:Et}))},kt=C.forwardRef(Bt),_t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},Tt=function(r,s){return C.createElement(Ne,Ae({},r,{ref:s,icon:_t}))},Rt=C.forwardRef(Tt),Ht={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M608 192a32 32 0 0132 32v160h174.81a32 32 0 0126.68 14.33l113.19 170.84a32 32 0 015.32 17.68V672a32 32 0 01-32 32h-96c0 70.7-57.3 128-128 128s-128-57.3-128-128H384c0 70.7-57.3 128-128 128s-128-57.3-128-128H96a32 32 0 01-32-32V224a32 32 0 0132-32zM256 640a64 64 0 000 128h1.06A64 64 0 00256 640m448 0a64 64 0 000 128h1.06A64 64 0 00704 640M576 256H128v384h17.12c22.13-38.26 63.5-64 110.88-64 47.38 0 88.75 25.74 110.88 64H576zm221.63 192H640v145.12A127.43 127.43 0 01704 576c47.38 0 88.75 25.74 110.88 64H896v-43.52zM500 448a12 12 0 0112 12v40a12 12 0 01-12 12H332a12 12 0 01-12-12v-40a12 12 0 0112-12zM308 320a12 12 0 0112 12v40a12 12 0 01-12 12H204a12 12 0 01-12-12v-40a12 12 0 0112-12z"}}]},name:"truck",theme:"outlined"},zt=function(r,s){return C.createElement(Ne,Ae({},r,{ref:s,icon:Ht}))},Ot=C.forwardRef(zt);const Wt=f.object({branch:f.string().max(150,"Branch cannot exceed 150 characters").regex(/^[a-zA-Z0-9\s.,'"-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),booked_by:f.string().max(100,"Booked By cannot exceed 100 characters").regex(/^[a-zA-Z0-9\s.,'"-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),account_rep:f.string().max(100,"Account Rep cannot exceed 100 characters").regex(/^[a-zA-Z0-9\s.,'"-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),sales_rep:f.string().max(100,"Sales Rep cannot exceed 100 characters").regex(/^[a-zA-Z0-9\s.,'"-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),customer_po_no:f.string().max(20,"Customer PO Number cannot exceed 20 characters").regex(/^[a-zA-Z0-9-_\/]*$/,"Only letters, numbers, dashes, underscores, and slashes allowed").optional(),customer:f.string().min(1,"Customer is required").max(200,"Customer name cannot exceed 200 characters").regex(/^[a-zA-Z0-9\s.,'"-]+$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed"),customer_ref_no:f.string().min(1,"Customer Ref. No is required").max(100,"Customer Ref. No cannot exceed 100 characters").regex(/^[a-zA-Z0-9\s.,'"-]+$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed")}),Qt=[{key:"branch",label:"Branch",placeholder:"Enter Branch Name",type:"text"},{key:"booked_by",label:"Booked By",placeholder:"Enter Person Who Booked",type:"text"},{key:"account_rep",label:"Account Rep",placeholder:"Enter Account Representative Name",type:"text"},{key:"sales_rep",label:"Sales Rep",placeholder:"Enter Sales Representative Name",type:"text"},{key:"customer_po_no",label:"Customer PO Number",placeholder:"Enter Purchase Order Number",type:"text"}],Kt=({formOrder:t,setFormOrder:r})=>{const[s,a]=C.useState({}),[n,o]=C.useState([]),[l,i]=C.useState([]),c="https://linkloadsapiprod.onrender.com/api";C.useEffect(()=>{(async()=>{try{const u=localStorage.getItem("token"),m=await O.get(`${c}/customer`,{headers:{Authorization:`Bearer ${u}`}});if(!m||!m.data){console.error("API response is undefined or invalid:",m);return}console.log("Fetched customers:",m.data);const g=m.data.map(p=>({value:p.cust_name,label:p.cust_name,refNo:p.cust_ref_no}));o(g)}catch(u){console.error("Error fetching customers:",u)}})()},[]),C.useEffect(()=>{if(t.customer){const h=n.find(u=>u.value===t.customer);i(h?[{value:h.refNo,label:h.refNo}]:[])}else i([])},[t.customer,n]);const d=(h,u)=>{let m=u,g="";const p={...t,[h]:m},y=Wt.safeParse(p);if(!y.success){const j=y.error.errors.find(v=>v.path[0]===h);g=j?j.message:""}a(j=>({...j,[h]:g})),r(p)};return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"General"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[e.jsxs("label",{htmlFor:"customer",children:["Customer ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{id:"quote_customer",value:t.customer||"",onChange:h=>d("customer",h.target.value),onBlur:()=>d("customer",t.customer||""),required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select a customer"}),n.length>0?n.map((h,u)=>e.jsx("option",{value:h.value,children:h.label},`${h.refNo}-${u}`)):e.jsx("option",{disabled:!0,children:"No customers found"})]}),s.customer&&e.jsx("span",{className:"error",style:{color:"red"},children:s.customer})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsxs("label",{htmlFor:"customerRefNo",children:["Customer Ref. No ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{id:"quote_customer_ref_no",value:t.customer_ref_no||"",onChange:h=>d("customer_ref_no",h.target.value),onBlur:()=>d("customer_ref_no",t.customer_ref_no||""),required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select a reference number"}),l.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))]}),s.customer_ref_no&&e.jsx("span",{className:"error",style:{color:"red"},children:s.customer_ref_no})]}),Qt.map(({key:h,label:u,placeholder:m})=>e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[e.jsx("label",{htmlFor:h,children:u}),e.jsx("input",{type:"text",id:h,placeholder:m,value:String(t[h]||""),onChange:g=>d(h,g.target.value)}),s[h]&&e.jsx("span",{className:"error",style:{color:"red"},children:s[h]})]},h))]})]})},It=f.object({commodity:f.string().max(100,"Commodity cannot exceed 50 characters").regex(/^[a-zA-Z0-9\s.,'"-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),temperature:f.union([f.string().max(10,"Temperature cannot exceed 10 characters").regex(/^-?\d+(\.\d+)?\s?[째CFK]?$/,"Enter a valid temperature (e.g., 5째C, -10F, 273K)"),f.number()]).optional(),equipment:f.enum(["Dry Van 53'","Flat Bed 53'","Reefer 53'"],{message:"Please select a valid equipment"}),load_type:f.enum(["Partial","FTL","LTL"],{message:"Please select a valid load type"})}),Ut=[{key:"commodity",label:"Commodity",placeholder:"Enter Commodity Type",type:"text"},{key:"temperature",label:"Temperature",placeholder:"Enter Required Temperature",type:"text"}],qt=({formOrder:t,setFormOrder:r})=>{const[s,a]=C.useState({}),n=["Dry Van 53'","Flat Bed 53'","Reefer 53'"],o=["Partial","FTL","LTL"],l=(i,c)=>{let d=c,h="";const u={...t,[i]:d},m=It.safeParse(u);if(!m.success){const g=m.error.errors.find(p=>p.path[0]===i);h=g?g.message:""}a(g=>({...g,[i]:h})),r(u)};return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Shipment"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[e.jsxs("label",{htmlFor:"equipment",children:["Equipment ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{id:"equipment",value:t.equipment,onChange:i=>r(c=>({...c,equipment:i.target.value})),children:[e.jsx("option",{value:"",disabled:!0,children:"Select..."}),n.map(i=>e.jsx("option",{value:i,children:i},i))]}),s.equipment&&e.jsx("span",{className:"error",style:{color:"red"},children:s.equipment})]}),e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[e.jsxs("label",{htmlFor:"loadType",children:["Load Type ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{id:"loadType",value:t.load_type,onChange:i=>r(c=>({...c,load_type:i.target.value})),children:[e.jsx("option",{value:"",disabled:!0,children:"Select..."}),o.map(i=>e.jsx("option",{value:i,children:i},i))]}),s.load_type&&e.jsx("span",{className:"error",style:{color:"red"},children:s.load_type})]}),Ut.map(({label:i,key:c,placeholder:d})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:c,children:i}),e.jsx("input",{type:"text",id:c,placeholder:d,value:t[c]||"",onChange:h=>l(c,h.target.value)}),s[c]&&e.jsx("span",{className:"error",style:{color:"red"},children:s[c]})]},c))]})]})},Mt=f.object({address:f.string().max(255,"Address is too long").regex(/^[a-zA-Z0-9\s,.'-]*$/,"Invalid address format").optional(),city:f.string().max(100,"City name is too long").regex(/^[a-zA-Z\s.'-]*$/,"Invalid city format").optional(),state:f.string().max(100,"State name is too long").regex(/^[a-zA-Z\s.'-]*$/,"Invalid state format").optional(),country:f.string().max(100,"Country name is too long").regex(/^[a-zA-Z\s.'-]*$/,"Invalid country format").optional(),postal:f.string().max(20,"Postal code cannot exceed 20 characters").regex(/^[a-zA-Z0-9\s-]*$/,"Invalid postal code format").optional(),phone:f.string().max(30,"Phone number cannot exceed 30 characters").regex(/^[0-9+\-()\s]*$/,"Invalid phone number format").optional(),date:f.string().regex(/^\d{2}-\d{2}-\d{4}$/,{message:"Date must be in DD-MM-YYYY format"}).optional(),time:f.string().regex(/^([01]\d|2[0-3]):([0-5]\d)$/,"Time must be in HH:MM format (24-hour)").optional(),currency:f.string().max(50,"Currency code cannot exceed 50 characters").regex(/^[A-Z]{3}$/,"Invalid currency format (e.g., USD, EUR)").optional(),equipment:f.string().max(100,"Equipment description cannot exceed 100 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Invalid equipment format").optional(),pickup_po:f.string().max(100,"Pickup PO cannot exceed 50 characters").regex(/^[a-zA-Z0-9\s.-]*$/,"Invalid pickup PO format").optional(),packages:f.number().int().min(1,"Packages must be at least 1").max(99999,"Packages cannot exceed 99,999").optional(),weight:f.number().min(0,"Weight cannot be negative").max(1e6,"Weight cannot exceed 1,000,000 kg").optional(),dimensions:f.string().max(100,"Dimensions cannot exceed 100 characters").regex(/^\d+x\d+x\d*$/,"Invalid dimensions format (e.g., 10x20x30)").optional(),notes:f.string().max(500,"Notes cannot exceed 500 characters").regex(/^[a-zA-Z0-9\s,.'-]*$/,"Invalid notes format").optional()}),Je=({setOrder:t,origin_location:r,index:s,handleOriginChange:a,handleRemoveOrigin:n,onAddOrigin:o})=>{const l=r[s]??{},[i,c]=C.useState({}),h=$e(g=>{const p=y=>{var j,v;return((v=(j=g.address_components)==null?void 0:j.find(w=>w.types.includes(y)))==null?void 0:v.long_name)||""};t(y=>({...y,origin_location:y.origin_location.map((j,v)=>v===s?{...j,address:`${p("street_number")} ${p("route")}`.trim(),city:p("locality"),state:p("administrative_area_level_1"),country:p("country"),postal:p("postal_code")}:j)}))}),u=C.useCallback((g,p)=>{const y=te.sanitize(p);let j=y;(g==="packages"||g==="weight")&&(j=y?Number(y):0);let v="";if(g==="date"&&/^\d{4}-\d{2}-\d{2}$/.test(y)){const[x,S,P]=y.split("-")}if(g==="date"){const x=new Date(p).toISOString().split("T")[0];a(s,{...l,[g]:x});return}const w={...l,[g]:j},b=Mt.safeParse(w);if(!b.success){const x=b.error.errors.find(S=>S.path[0]===g);v=x?x.message:""}c(x=>({...x,[g]:v})),a(s,w)},[l,a,s]),m=[{label:"Address",type:"text",key:"address",placeholder:"Enter street address"},{label:"City",key:"city",type:"text",placeholder:"Enter city name"},{label:"State",key:"state",type:"text",placeholder:"Enter state"},{label:"Country",key:"country",type:"text",placeholder:"Enter country"},{label:"Postal Code",key:"postal",type:"text",placeholder:"Enter postal code"},{label:"Phone",key:"phone",type:"text",placeholder:"Enter phone number"},{label:"Date",key:"date",type:"date",placeholder:"Enter date (YYYY-MM-DD)"},{label:"Time",key:"time",placeholder:"Enter time (HH:MM)"},{label:"Currency",key:"currency",type:"text",placeholder:"Enter currency (e.g., USD, EUR)"},{label:"Equipment",key:"equipment",type:"text",placeholder:"Enter equipment details"},{label:"Pickup PO",key:"pickup_po",type:"text",placeholder:"Enter pickup PO number"},{label:"Packages",key:"packages",type:"number",placeholder:"Enter number of packages"},{label:"Weight",key:"weight",type:"number",placeholder:"Enter weight (kg/lbs)"},{label:"Dimensions",key:"dimensions",type:"text",placeholder:"Enter dimensions (LxWxH cm/inches)"},{label:"Notes",key:"notes",type:"textarea",placeholder:"Enter additional notes"}];return e.jsxs("fieldset",{className:"form-section",style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"10px",gridTemplateColumns:"repeat(5, 1fr)",flex:1},children:m.map(({label:g,key:p,type:y,placeholder:j})=>e.jsxs("div",{className:"form-group",style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{htmlFor:`${p}-${s}`,children:g}),y==="textarea"?e.jsx("textarea",{id:`${p}-${s}`,name:p,value:l[p]||"",onChange:v=>u(p,v.target.value),placeholder:j,rows:4}):e.jsx("input",{id:`${p}-${s}`,name:p,type:y,value:l[p]||"",onChange:v=>u(p,v.target.value),placeholder:j,ref:p==="address"?h:void 0}),i[p]&&e.jsx("span",{className:"error",style:{color:"red"},children:i[p]})]},p))}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0px"},children:[e.jsx("button",{type:"button",onClick:o,className:"add-button",children:e.jsx(H,{})}),e.jsx("button",{type:"button",onClick:()=>n(s),className:"delete-button",children:e.jsx(ee,{})})]})]})},Lt=f.object({address:f.string().max(255,"Address is too long").regex(/^[a-zA-Z0-9\s,.'-]+$/,"Invalid address format").optional(),city:f.string().max(100,"City name is too long").regex(/^[a-zA-Z\s.'-]+$/,"Invalid city format").optional(),state:f.string().max(100,"State name is too long").regex(/^[a-zA-Z\s.'-]+$/,"Invalid state format").optional(),country:f.string().max(100,"Country name is too long").regex(/^[a-zA-Z\s.'-]+$/,"Invalid country format").optional(),postal:f.string().max(20,"Postal code cannot exceed 20 characters").regex(/^[a-zA-Z0-9\s-]+$/,"Invalid postal code format").optional(),phone:f.string().max(30,"Phone number cannot exceed 30 characters").regex(/^[0-9+\-()\s]+$/,"Invalid phone number format").optional(),date:f.string().regex(/^\d{2}-\d{2}-\d{4}$/,{message:"Date must be in DD-MM-YYYY format"}).optional(),time:f.string().regex(/^([01]\d|2[0-3]):([0-5]\d)$/,"Time must be in HH:MM format (24-hour)").optional(),currency:f.string().max(10,"Currency code cannot exceed 10 characters").regex(/^[A-Z]{3}$/,"Invalid currency format (e.g., USD, EUR)").optional(),equipment:f.string().max(50,"Equipment description cannot exceed 50 characters").regex(/^[a-zA-Z0-9\s-]+$/,"Invalid equipment format").optional(),pickup_po:f.string().max(50,"Pickup PO cannot exceed 50 characters").regex(/^[a-zA-Z0-9\s-]+$/,"Invalid pickup PO format").optional(),packages:f.number().int().min(1,"Packages must be at least 1").max(99999,"Packages cannot exceed 99,999").optional(),weight:f.number().min(0,"Weight cannot be negative").max(1e6,"Weight cannot exceed 1,000,000 kg").optional(),dimensions:f.string().max(50,"Dimensions cannot exceed 50 characters").regex(/^\d+x\d+x\d+$/,"Invalid dimensions format (e.g., 10x20x30)").optional(),notes:f.string().max(500,"Notes cannot exceed 500 characters").optional()}),Ve=({setOrder:t,destination_location:r,index:s,handleDestinationChange:a,handleRemoveDestination:n,onAddDestination:o})=>{const l=r[s]??{},[i,c]=C.useState({}),h=$e(g=>{const p=y=>{var j,v;return((v=(j=g.address_components)==null?void 0:j.find(w=>w.types.includes(y)))==null?void 0:v.long_name)||""};t(y=>({...y,destination_location:y.destination_location.map((j,v)=>v===s?{...j,address:`${p("street_number")} ${p("route")}`.trim(),city:p("locality"),state:p("administrative_area_level_1"),country:p("country"),postal:p("postal_code")}:j)}))}),u=C.useCallback((g,p)=>{const y=te.sanitize(p);let j=y;(g==="packages"||g==="weight")&&(j=y?Number(y):0);let v="";if(g==="date"&&/^\d{4}-\d{2}-\d{2}$/.test(y)){const[x,S,P]=y.split("-")}if(g==="date"){const x=new Date(p).toISOString().split("T")[0];a(s,{...l,[g]:x});return}const w={...l,[g]:j},b=Lt.safeParse(w);if(!b.success){const x=b.error.errors.find(S=>S.path[0]===g);v=x?x.message:""}c(x=>({...x,[g]:v})),a(s,w)},[l,a,s]),m=[{label:"Address",type:"text",key:"address",placeholder:"Enter street address"},{label:"City",key:"city",type:"text",placeholder:"Enter city name"},{label:"State",key:"state",type:"text",placeholder:"Enter state"},{label:"Country",key:"country",type:"text",placeholder:"Enter country"},{label:"Postal Code",key:"postal",type:"text",placeholder:"Enter postal code"},{label:"Phone",key:"phone",type:"text",placeholder:"Enter phone number"},{label:"Date",key:"date",type:"date",placeholder:"Enter date (YYYY-MM-DD)"},{label:"Time",key:"time",placeholder:"Enter time (HH:MM)"},{label:"Currency",key:"currency",type:"text",placeholder:"Enter currency (e.g., USD, EUR)"},{label:"Equipment",key:"equipment",type:"text",placeholder:"Enter equipment details"},{label:"Pickup PO",key:"pickup_po",type:"text",placeholder:"Enter pickup PO number"},{label:"Packages",key:"packages",type:"number",placeholder:"Enter number of packages"},{label:"Weight",key:"weight",type:"number",placeholder:"Enter weight (kg/lbs)"},{label:"Dimensions",key:"dimensions",type:"text",placeholder:"Enter dimensions (LxWxH cm/inches)"},{label:"Notes",key:"notes",type:"textarea",placeholder:"Enter additional notes"}];return e.jsxs("fieldset",{className:"form-section",style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"10px",gridTemplateColumns:"repeat(5, 1fr)",flex:1},children:m.map(({label:g,key:p,type:y,placeholder:j})=>e.jsxs("div",{className:"form-group",style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{htmlFor:`${p}-${s}`,children:g}),y==="textarea"?e.jsx("textarea",{id:`${p}-${s}`,name:p,value:l[p]||"",onChange:v=>u(p,v.target.value),placeholder:j,rows:4}):e.jsx("input",{id:`${p}-${s}`,name:p,type:y,value:l[p]||"",onChange:v=>u(p,v.target.value),placeholder:j,ref:p==="address"?h:void 0}),i[p]&&e.jsx("span",{className:"error",style:{color:"red"},children:i[p]})]},p))}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0px"},children:[e.jsx("button",{type:"button",onClick:o,className:"add-button",children:e.jsx(H,{})}),e.jsx("button",{type:"button",onClick:()=>n(s),className:"delete-button",children:e.jsx(ee,{})})]})]})},$t=({formOrder:t,setFormOrder:r})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Load Specifications"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[{id:"hot",label:"Hot"},{id:"team",label:"Team"},{id:"air_ride",label:"Air Ride"},{id:"tarp",label:"TARP"},{id:"hazmat",label:"Hazmat"}].map(({id:s,label:a})=>e.jsx("div",{className:"form-group",style:{flex:1},children:e.jsxs("label",{htmlFor:s,style:{display:"inline-flex",alignItems:"center",width:"100%"},children:[a,e.jsx("input",{type:"checkbox",id:s,checked:!!t[s],onChange:n=>r(o=>({...o,[s]:n.target.checked}))})]})},s))})]}),Jt=f.object({base_price:f.string().max(20,"Base price cannot exceed 15 characters").regex(/^\d{1,3}(,\d{3})*(\.\d{1,2})?$/,"Enter a valid amount (e.g., 1000, 1,000.50)").optional(),currency:f.enum(["CAD","USD"],{message:"Please select a valid currency"}).optional()}),Vt=[{key:"base_price",label:"Base Price",placeholder:"Enter Base Price",type:"text"}],Zt=({formOrder:t,setFormOrder:r})=>{const[s,a]=C.useState({}),n=["CAD","USD"],o=(l,i)=>{let c=i,d="";const h={...t,[l]:c},u=Jt.safeParse(h);if(!u.success){const m=u.error.errors.find(g=>g.path[0]===l);d=m?m.message:""}a(m=>({...m,[l]:d})),r(h)};return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Revenue"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",alignItems:"center"},children:[e.jsxs("div",{className:"form-group",style:{flex:"1 1 auto",minWidth:"250px"},children:[e.jsx("label",{htmlFor:"currency",children:"Currency"}),e.jsxs("select",{id:"currency",value:t.currency,onChange:l=>r(i=>({...i,currency:l.target.value})),style:{minWidth:"250px",padding:"8px",width:"100%"},children:[e.jsx("option",{value:"",children:"Select..."}),n.map(l=>e.jsx("option",{value:l,children:l},l))]}),s.currency&&e.jsx("span",{className:"error",style:{color:"red"},children:s.currency})]}),Vt.map(({label:l,key:i,placeholder:c})=>e.jsxs("div",{className:"form-group",style:{flex:"1 1 auto",minWidth:"250px"},children:[e.jsx("label",{htmlFor:i,children:l}),e.jsx("input",{type:"text",id:i,placeholder:c,value:t[i]||"",onChange:d=>o(i,d.target.value),style:{minWidth:"250px",padding:"8px",width:"100%"}}),s[i]&&e.jsx("span",{className:"error",style:{color:"red"},children:s[i]})]},i))]})]})},Yt=f.object({type:f.string().max(200,"Type must be at most 200 characters").regex(/^[a-zA-Z\s.,'-]+$/,"Only letters, spaces, apostrophes, periods, commas, and hyphens are allowed").optional(),charge:f.string().max(30,"Charge value must be at most 30 characters").regex(/^\d+(\.\d{1,2})?$/,"Charge must be a valid number (e.g., 100 or 100.50)").optional(),percent:f.string().max(30,"Percent/Flat Rate must be at most 30 characters").regex(/^(Flat|Percentage)?$/,'Value must be either "Flat" or "Percentage"').optional()}),Ze=({order:t,setOrder:r,charges:s,index:a,handleChargeChange:n,handleRemoveCharge:o,onAddCharge:l})=>{const i=s[a]??{},[c,d]=C.useState({}),h=C.useCallback((g,p)=>{const y=te.sanitize(p);let j="";const v={...i,[g]:y},w=Yt.safeParse(v);if(!w.success){const b=w.error.errors.find(x=>x.path[0]===g);j=b?b.message:""}d(b=>({...b,[g]:j})),n(a,v)},[i,n,a]),u=[{label:"Type",key:"type",type:"text",placeholder:"Enter Type"},{label:"Charge",key:"charge",type:"text",placeholder:"Enter Charge"},{label:"Percent/Flat Rate",key:"percent",type:"dropdown",placeholder:"Enter Percent/Flat Rate"}],m=["Flat","Percentage"];return e.jsxs("fieldset",{className:"form-section",style:{display:"flex",alignItems:"center",gap:"10px"},children:[u.map(({label:g,key:p,type:y,placeholder:j})=>e.jsxs("div",{className:"form-group",style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{htmlFor:`${p}-${a}`,children:g}),y==="dropdown"?e.jsxs("select",{id:`${p}-${a}`,name:p,value:i.percent||"",onChange:v=>h("percent",v.target.value),style:{width:"180px",padding:"8px"},children:[e.jsx("option",{value:"",children:"Select"}),m.map(v=>e.jsx("option",{value:v,children:v},v))]}):e.jsx("input",{id:`${p}-${a}`,type:y,name:p,value:i[p]||"",onChange:v=>h(p,v.target.value),placeholder:j}),c[p]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[p]})]},p)),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0px"},children:[e.jsx("button",{type:"button",onClick:l,className:"add-button",children:e.jsx(H,{})}),e.jsx("button",{type:"button",onClick:()=>o(a),className:"delete-button",children:e.jsx(ee,{})})]})]})},Xt=f.object({type:f.string().max(200,"Type must be at most 200 characters").regex(/^[a-zA-Z\s.,'-]+$/,"Only letters, spaces, apostrophes, periods, commas, and hyphens are allowed").optional(),discount:f.string().max(30,"Charge value must be at most 30 characters").regex(/^\d+(\.\d{1,2})?$/,"Charge must be a valid number (e.g., 100 or 100.50)").optional(),percent:f.string().max(30,"Percent/Flat Rate must be at most 30 characters").regex(/^(Flat|Percentage)?$/,'Value must be either "Flat" or "Percentage"').optional()}),Ye=({order:t,setOrder:r,discounts:s,index:a,handleDiscountChange:n,handleRemoveDiscount:o,onAddDiscount:l})=>{const i=s[a]??{},[c,d]=C.useState({}),h=C.useCallback((g,p)=>{const y=te.sanitize(p);let j="";const v={...i,[g]:y},w=Xt.safeParse(v);if(!w.success){const b=w.error.errors.find(x=>x.path[0]===g);j=b?b.message:""}d(b=>({...b,[g]:j})),n(a,v)},[i,n,a]),u=[{label:"Type",key:"type",type:"text",placeholder:"Enter Type"},{label:"Charge",key:"discount",type:"text",placeholder:"Enter Charge"},{label:"Percent/Flat Rate",key:"percent",type:"dropdown",placeholder:"Enter Percent/Flat Rate"}],m=["Flat","Percentage"];return e.jsxs("fieldset",{className:"form-section",style:{display:"flex",alignItems:"center",gap:"10px"},children:[u.map(({label:g,key:p,type:y,placeholder:j})=>e.jsxs("div",{className:"form-group",style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{htmlFor:`${p}-${a}`,children:g}),y==="dropdown"?e.jsxs("select",{id:`${p}-${a}`,name:p,value:i.percent||"",onChange:v=>h("percent",v.target.value),style:{width:"180px",padding:"8px"},children:[e.jsx("option",{value:"",children:"Select"}),m.map(v=>e.jsx("option",{value:v,children:v},v))]}):e.jsx("input",{id:`${p}-${a}`,type:y,name:p,value:i[p]||"",onChange:v=>h(p,v.target.value),placeholder:j}),c[p]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[p]})]},p)),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0px"},children:[e.jsx("button",{type:"button",onClick:l,className:"add-button",children:e.jsx(H,{})}),e.jsx("button",{type:"button",onClick:()=>o(a),className:"delete-button",children:e.jsx(ee,{})})]})]})},Gt=f.object({base_price:f.string().regex(/^\d+(\.\d{1,2})?$/,"Enter a valid price (e.g., 100.50)").optional(),gst:f.string().regex(/^\d+(\.\d{1,2})?$/,"Enter a valid GST amount (e.g., 5.00)").optional(),pst:f.string().regex(/^\d+(\.\d{1,2})?$/,"Enter a valid PST amount (e.g., 7.50)").optional(),hst:f.string().regex(/^\d+(\.\d{1,2})?$/,"Enter a valid HST amount (e.g., 13.00)").optional(),qst:f.string().regex(/^\d+(\.\d{1,2})?$/,"Enter a valid QST amount (e.g., 9.97)").optional(),final_price:f.string().regex(/^\d+(\.\d{1,2})?$/,"Enter a valid price (e.g., 150.75)").optional(),notes:f.string().max(500,"Notes cannot exceed 500 characters").regex(/^[a-zA-Z0-9\s,.'-]*$/,"Invalid notes format").optional()}),er=[{key:"base_price",label:"Base Price"},{key:"gst",label:"GST"},{key:"pst",label:"PST"},{key:"hst",label:"HST"},{key:"qst",label:"QST"}],tr=({formOrder:t,setFormOrder:r})=>{const[s,a]=C.useState({}),n=(o,l)=>{const i=l.trim();let c="";const d={...t,[o]:i},h=Gt.safeParse(d);if(!h.success){const u=h.error.errors.find(m=>m.path[0]===o);c=u?u.message:""}a(u=>({...u,[o]:c})),r(d)};return C.useEffect(()=>{const o=Number(t.base_price)||0,l=Number(t.gst)||0,i=Number(t.pst)||0,c=Number(t.hst)||0,d=Number(t.qst)||0,h=(o+l+i+c+d).toFixed(2);r(u=>({...u,final_price:h}))},[t.base_price,t.gst,t.pst,t.hst,t.qst,r]),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Tax"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-grid",style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[er.map(({label:o,key:l})=>e.jsxs("div",{className:"form-group",style:{flex:"1 1 150px"},children:[e.jsx("label",{htmlFor:l,children:o}),e.jsx("input",{type:"text",id:l,placeholder:`Enter ${o}`,value:t[l]||"",onChange:i=>n(l,i.target.value)}),s[l]&&e.jsx("span",{className:"error",style:{color:"red"},children:s[l]})]},l)),e.jsxs("div",{className:"form-group",style:{flex:"1 1 150px"},children:[e.jsx("label",{htmlFor:"final_price",children:"Final Price"}),e.jsx("input",{type:"text",id:"final_price",value:t.final_price||"0.00",readOnly:!0,style:{backgroundColor:"#f0f0f0",cursor:"not-allowed"}})]})]}),e.jsxs("div",{className:"form-group",style:{marginTop:"1rem"},children:[e.jsx("label",{htmlFor:"notes",children:"Notes"}),e.jsx("textarea",{id:"notes",placeholder:"Enter Additional Notes",value:t.notes||"",onChange:o=>n("notes",o.target.value),style:{width:"100%",minHeight:"80px"}}),s.notes&&e.jsx("span",{className:"error",style:{color:"red"},children:s.notes})]})]})},rr="https://linkloadsapiprod.onrender.com/api",sr=(t,r,s)=>{const[a,n]=C.useState({id:0,customer:"",customer_ref_no:"",branch:"",booked_by:"",account_rep:"",sales_rep:"",customer_po_no:"",commodity:"",equipment:"",load_type:"",temperature:"",origin_location:[],destination_location:[],hot:!1,team:!1,air_ride:!1,tarp:!1,hazmat:!1,currency:"",base_price:"",charges:[],discounts:[],gst:"",pst:"",hst:"",qst:"",final_price:"",notes:"",created_at:"",updated_at:""});C.useEffect(()=>{if(t){const b=Array.isArray(t.origin_location)?t.origin_location:JSON.parse(t.origin_location||"[]"),x=Array.isArray(t.destination_location)?t.destination_location:JSON.parse(t.destination_location||"[]"),S=Array.isArray(t.charges)?t.charges:JSON.parse(t.charges||"[]"),P=Array.isArray(t.discounts)?t.discounts:JSON.parse(t.discounts||"[]"),F={...t,origin_location:b.length>0?b:[],destination_location:x.length>0?x:[],charges:S.length>0?S:[],discounts:P.length>0?P:[]};n(F)}},[t]);const o=()=>!!a.customer&&!!a.customer_ref_no&&!!a.equipment&&!!a.load_type;return{formOrder:a,setFormOrder:n,updateOrder:async()=>{var b,x;if(!o()){_.fire("Validation Error","Please fill in all required fields.","error");return}try{const S=localStorage.getItem("token");if(!S||typeof S!="string"){_.fire({icon:"error",title:"Unauthorized",text:"Please log in again."});return}const P=await O.put(`${rr}/order/${a.id}`,a,{headers:{Authorization:`Bearer ${S}`}});_.fire({icon:"success",title:"Updated!",text:"Order updated successfully."}),s(P.data),r()}catch(S){console.error("Error updating order:",((b=S.response)==null?void 0:b.data)||S.message),_.fire({icon:"error",title:"Oops...",text:((x=S.response)==null?void 0:x.status)===401?"Unauthorized. Please log in again.":"Failed to update order."})}},handleAddOrigin:()=>{n(b=>b&&{...b,origin_location:[...b.origin_location,{address:"",city:"",state:"",postal:"",country:"",date:"",time:"",currency:"",equipment:"",pickup_po:"",phone:"",packages:0,weight:0,dimensions:"",notes:""}]})},handleRemoveOrigin:b=>{n(x=>x&&{...x,origin_location:x.origin_location.filter((S,P)=>P!==b)})},handleOriginChange:(b,x)=>{n(S=>S&&{...S,origin_location:S.origin_location.map((P,F)=>F===b?x:P)})},handleAddDestination:()=>{n(b=>b&&{...b,destination_location:[...b.destination_location,{address:"",city:"",state:"",postal:"",country:"",date:"",time:"",currency:"",equipment:"",pickup_po:"",phone:"",packages:0,weight:0,dimensions:"",notes:""}]})},handleRemoveDestination:b=>{n(x=>x&&{...x,destination_location:x.destination_location.filter((S,P)=>P!==b)})},handleDestinationChange:(b,x)=>{n(S=>S&&{...S,destination_location:S.destination_location.map((P,F)=>F===b?x:P)})},handleAddCharge:()=>{n(b=>b&&{...b,charges:[...b.charges,{type:"",charge:0,percent:""}]})},handleRemoveCharge:b=>{n(x=>x&&{...x,charges:x.charges.filter((S,P)=>P!==b)})},handleChargeChange:(b,x)=>{n(S=>S&&{...S,charges:S.charges.map((P,F)=>F===b?x:P)})},handleAddDiscount:()=>{n(b=>b&&{...b,discounts:[...b.discounts,{type:"",charge:0,percent:""}]})},handleRemoveDiscount:b=>{n(x=>x&&{...x,discounts:x.discounts.filter((S,P)=>P!==b)})},handleDiscountChange:(b,x)=>{n(S=>S&&{...S,discounts:S.discounts.map((P,F)=>F===b?x:P)})}}},ar=({order:t,onClose:r,onUpdate:s})=>{var w;const{formOrder:a,setFormOrder:n,updateOrder:o,handleAddOrigin:l,handleRemoveOrigin:i,handleOriginChange:c,handleAddDestination:d,handleRemoveDestination:h,handleDestinationChange:u,handleAddCharge:m,handleRemoveCharge:g,handleChargeChange:p,handleAddDiscount:y,handleRemoveDiscount:j,handleDiscountChange:v}=sr(t,r,s);return e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:b=>{b.preventDefault(),o()},className:"form-main",children:[a&&e.jsxs(e.Fragment,{children:[e.jsx(Kt,{formOrder:a,setFormOrder:n}),e.jsx(qt,{formOrder:a,setFormOrder:n}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Origin"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",children:[(w=a.origin_location)==null?void 0:w.map((b,x)=>e.jsx(Je,{order:a,setOrder:n,origin_location:a.origin_location,index:x,onAddOrigin:l,handleOriginChange:c,handleRemoveOrigin:i},x)),a.origin_location.length===0&&e.jsx("button",{type:"button",onClick:l,className:"add-button",children:e.jsx(H,{})})]})]}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Destination"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",children:[a.destination_location.map((b,x)=>e.jsx(Ve,{order:a,setOrder:n,destination_location:a.destination_location,index:x,onAddDestination:d,handleDestinationChange:u,handleRemoveDestination:h},x)),a.destination_location.length===0&&e.jsx("button",{type:"button",onClick:d,className:"add-button",children:e.jsx(H,{})})]})]}),e.jsx($t,{formOrder:a,setFormOrder:n}),e.jsx(Zt,{formOrder:a,setFormOrder:n}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Charges"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",children:[a.charges.map((b,x)=>e.jsx(Ze,{order:a,setOrder:n,charges:a.charges,index:x,onAddCharge:m,handleChargeChange:p,handleRemoveCharge:g},x)),a.charges.length===0&&e.jsx("button",{type:"button",onClick:m,className:"add-button",children:e.jsx(H,{})})]})]}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Discounts"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",children:[a.discounts.map((b,x)=>e.jsx(Ye,{order:a,setOrder:n,discounts:a.discounts,index:x,onAddDiscount:y,handleDiscountChange:v,handleRemoveDiscount:j},x)),a.discounts.length===0&&e.jsx("button",{type:"button",onClick:y,className:"add-button",children:e.jsx(H,{})})]})]}),e.jsx(tr,{formOrder:a,setFormOrder:n})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn-submit",children:"Save"}),e.jsx("button",{type:"button",className:"btn-cancel",onClick:r,children:"Cancel"})]})]})})},nr=f.object({branch:f.string().max(150,"Branch cannot exceed 150 characters").regex(/^[a-zA-Z0-9\s.,'"-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),booked_by:f.string().max(100,"Booked By cannot exceed 100 characters").regex(/^[a-zA-Z0-9\s.,'"-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),account_rep:f.string().max(100,"Account Rep cannot exceed 100 characters").regex(/^[a-zA-Z0-9\s.,'"-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),sales_rep:f.string().max(100,"Sales Rep cannot exceed 100 characters").regex(/^[a-zA-Z0-9\s.,'"-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),customer_po_no:f.string().max(20,"Customer PO Number cannot exceed 20 characters").regex(/^[a-zA-Z0-9-_\/]*$/,"Only letters, numbers, dashes, underscores, and slashes allowed").optional(),customer:f.string().min(1,"Customer is required").max(200,"Customer name cannot exceed 200 characters").regex(/^[a-zA-Z0-9\s.,'"-]+$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed"),customer_ref_no:f.string().min(1,"Customer Ref. No is required").max(100,"Customer Ref. No cannot exceed 100 characters").regex(/^[a-zA-Z0-9\s.,'"-]+$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed")}),or=[{key:"branch",label:"Branch",placeholder:"Enter Branch Name",type:"text"},{key:"booked_by",label:"Booked By",placeholder:"Enter Person Who Booked",type:"text"},{key:"account_rep",label:"Account Rep",placeholder:"Enter Account Representative Name",type:"text"},{key:"sales_rep",label:"Sales Rep",placeholder:"Enter Sales Representative Name",type:"text"},{key:"customer_po_no",label:"Customer PO Number",placeholder:"Enter Purchase Order Number",type:"text"}],ir=({order:t,setOrder:r})=>{const[s,a]=C.useState({}),[n,o]=C.useState([]),[l,i]=C.useState([]),c="https://linkloadsapiprod.onrender.com/api";C.useEffect(()=>{(async()=>{try{const u=localStorage.getItem("token"),m=await O.get(`${c}/customer`,{headers:{Authorization:`Bearer ${u}`}});if(!m||!m.data){console.error("API response is undefined or invalid:",m);return}console.log("Fetched customers:",m.data);const g=m.data.map(p=>({value:p.cust_name,label:p.cust_name,refNo:p.cust_ref_no}));o(g)}catch(u){console.error("Error fetching customers:",u)}})()},[]),C.useEffect(()=>{if(t.customer){const h=n.find(u=>u.value===t.customer);i(h?[{value:h.refNo,label:h.refNo}]:[])}else i([])},[t.customer,n]);const d=(h,u)=>{let m=u,g="";const p={...t,[h]:m},y=nr.safeParse(p);if(!y.success){const j=y.error.errors.find(v=>v.path[0]===h);g=j?j.message:""}a(j=>({...j,[h]:g})),r(p)};return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"General"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[e.jsxs("label",{htmlFor:"customer",children:["Customer ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{id:"quote_customer",value:t.customer||"",onChange:h=>d("customer",h.target.value),onBlur:()=>d("customer",t.customer||""),children:[e.jsx("option",{value:"",disabled:!0,children:"Select a customer"}),n.length>0?n.map((h,u)=>e.jsx("option",{value:h.value,children:h.label},`${h.refNo}-${u}`)):e.jsx("option",{disabled:!0,children:"No customers found"})]}),s.customer&&e.jsx("span",{className:"error",style:{color:"red"},children:s.customer})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsxs("label",{htmlFor:"customerRefNo",children:["Customer Ref. No ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{id:"quote_customer_ref_no",value:t.customer_ref_no||"",onChange:h=>d("customer_ref_no",h.target.value),onBlur:()=>d("customer_ref_no",t.customer_ref_no||""),children:[e.jsx("option",{value:"",disabled:!0,children:"Select a reference number"}),l.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))]}),s.customer_ref_no&&e.jsx("span",{className:"error",style:{color:"red"},children:s.customer_ref_no})]}),or.map(({key:h,label:u,placeholder:m})=>e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[e.jsx("label",{htmlFor:h,children:u}),e.jsx("input",{type:"text",id:h,placeholder:m,value:String(t[h]||""),onChange:g=>d(h,g.target.value)}),s[h]&&e.jsx("span",{className:"error",style:{color:"red"},children:s[h]})]},h))]})]})},lr=f.object({commodity:f.string().max(100,"Commodity cannot exceed 50 characters").regex(/^[a-zA-Z0-9\s.,'"-]*$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),temperature:f.union([f.string().max(10,"Temperature cannot exceed 10 characters").regex(/^-?\d+(\.\d+)?\s?[째CFK]?$/,"Enter a valid temperature (e.g., 5째C, -10F, 273K)"),f.number()]).optional(),equipment:f.enum(["Dry Van 53'","Flat Bed 53'","Reefer 53'"],{message:"Please select a valid equipment"}),load_type:f.enum(["Partial","FTL","LTL"],{message:"Please select a valid load type"})}),cr=[{key:"commodity",label:"Commodity",placeholder:"Enter Commodity Type",type:"text"},{key:"temperature",label:"Temperature",placeholder:"Enter Required Temperature",type:"text"}],dr=({order:t,setOrder:r})=>{const[s,a]=C.useState({}),n=["Dry Van 53'","Flat Bed 53'","Reefer 53'"],o=["Partial","FTL","LTL"],l=(i,c)=>{let d=c,h="";const u={...t,[i]:d},m=lr.safeParse(u);if(!m.success){const g=m.error.errors.find(p=>p.path[0]===i);h=g?g.message:""}a(g=>({...g,[i]:h})),r(u)};return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Shipment"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[e.jsxs("label",{htmlFor:"equipment",children:["Equipment ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{id:"equipment",value:t.equipment,onChange:i=>r(c=>({...c,equipment:i.target.value})),children:[e.jsx("option",{value:"",disabled:!0,children:"Select..."}),n.map(i=>e.jsx("option",{value:i,children:i},i))]}),s.equipment&&e.jsx("span",{className:"error",style:{color:"red"},children:s.equipment})]}),e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[e.jsxs("label",{htmlFor:"loadType",children:["Load Type ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{id:"loadType",value:t.load_type,onChange:i=>r(c=>({...c,load_type:i.target.value})),children:[e.jsx("option",{value:"",disabled:!0,children:"Select..."}),o.map(i=>e.jsx("option",{value:i,children:i},i))]}),s.load_type&&e.jsx("span",{className:"error",style:{color:"red"},children:s.load_type})]}),cr.map(({label:i,key:c,placeholder:d})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:c,children:i}),e.jsx("input",{type:"text",id:c,placeholder:d,value:t[c]||"",onChange:h=>l(c,h.target.value)}),s[c]&&e.jsx("span",{className:"error",style:{color:"red"},children:s[c]})]},c))]})]})},hr=f.object({hot:f.boolean().optional(),team:f.boolean().optional(),air_ride:f.boolean().optional(),tarp:f.boolean().optional(),hazmat:f.boolean().optional()}),ur=({order:t,setOrder:r})=>{const[s,a]=C.useState({}),n=(o,l)=>{let i=l;["hot","team","air_ride","tarp","hazmat"].includes(o)&&typeof l!="boolean"?i=l==="true":typeof l!="boolean"&&(i=te.sanitize(l));let c="";const d={...t,[o]:i},h=hr.safeParse(d);if(!h.success){const u=h.error.errors.find(m=>m.path[0]===o);c=u?u.message:""}a(u=>({...u,[o]:c})),r(d)};return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Load Specifications"}),e.jsx("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[{id:"hot",label:"Hot"},{id:"team",label:"Team"},{id:"air_ride",label:"Air Ride"},{id:"tarp",label:"TARP"},{id:"hazmat",label:"Hazmat"}].map(({id:o,label:l})=>e.jsx("div",{className:"form-group",style:{flex:1},children:e.jsxs("label",{htmlFor:o,style:{display:"inline-flex",alignItems:"center",width:"100%"},children:[l,e.jsx("input",{type:"checkbox",id:o,checked:!!t[o],onChange:i=>n(o,i.target.checked)})]})},o))})]})},pr=f.object({base_price:f.string().max(20,"Base price cannot exceed 20 characters").regex(/^\d{1,3}(,\d{3})*(\.\d{1,2})?$/,"Enter a valid amount (e.g., 1000, 1,000.50)").optional(),currency:f.enum(["CAD","USD"],{message:"Please select a valid currency"}).optional()}),mr=[{key:"base_price",label:"Base Price",placeholder:"Enter Base Price",type:"text"}],gr=({order:t,setOrder:r})=>{const[s,a]=C.useState({}),n=["CAD","USD"],o=(l,i)=>{let c=i,d="";const h={...t,[l]:c},u=pr.safeParse(h);if(!u.success){const m=u.error.errors.find(g=>g.path[0]===l);d=m?m.message:""}a(m=>({...m,[l]:d})),r(h)};return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Revenue"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",alignItems:"center"},children:[e.jsxs("div",{className:"form-group",style:{flex:"1 1 auto",minWidth:"250px"},children:[e.jsx("label",{htmlFor:"currency",children:"Currency"}),e.jsxs("select",{id:"currency",value:t.currency,onChange:l=>r(i=>({...i,currency:l.target.value})),style:{minWidth:"250px",padding:"8px",width:"100%"},children:[e.jsx("option",{value:"",children:"Select..."}),n.map(l=>e.jsx("option",{value:l,children:l},l))]}),s.currency&&e.jsx("span",{className:"error",style:{color:"red"},children:s.currency})]}),mr.map(({label:l,key:i,placeholder:c})=>e.jsxs("div",{className:"form-group",style:{flex:"1 1 auto",minWidth:"250px"},children:[e.jsx("label",{htmlFor:i,children:l}),e.jsx("input",{type:"text",id:i,placeholder:c,value:t[i]||"",onChange:d=>o(i,d.target.value),style:{minWidth:"250px",padding:"8px",width:"100%"}}),s[i]&&e.jsx("span",{className:"error",style:{color:"red"},children:s[i]})]},i))]})]})},fr=f.object({base_price:f.string().regex(/^\d+(\.\d{1,2})?$/,"Enter a valid price (e.g., 100.50)").optional(),gst:f.string().regex(/^\d+(\.\d{1,2})?$/,"Enter a valid GST amount (e.g., 5.00)").optional(),pst:f.string().regex(/^\d+(\.\d{1,2})?$/,"Enter a valid PST amount (e.g., 7.50)").optional(),hst:f.string().regex(/^\d+(\.\d{1,2})?$/,"Enter a valid HST amount (e.g., 13.00)").optional(),qst:f.string().regex(/^\d+(\.\d{1,2})?$/,"Enter a valid QST amount (e.g., 9.97)").optional(),final_price:f.string().regex(/^\d+(\.\d{1,2})?$/,"Enter a valid price (e.g., 150.75)").optional(),notes:f.string().max(500,"Notes cannot exceed 500 characters").regex(/^[a-zA-Z0-9\s,.'-]*$/,"Invalid notes format").optional()}),xr=[{key:"base_price",label:"Base Price"},{key:"gst",label:"GST"},{key:"pst",label:"PST"},{key:"hst",label:"HST"},{key:"qst",label:"QST"}],yr=({order:t,setOrder:r})=>{const[s,a]=C.useState({}),n=(o,l)=>{const i=l.trim();let c="";const d={...t,[o]:i},h=fr.safeParse(d);if(!h.success){const u=h.error.errors.find(m=>m.path[0]===o);c=u?u.message:""}a(u=>({...u,[o]:c})),r(d)};return C.useEffect(()=>{const o=Number(t.base_price)||0,l=Number(t.gst)||0,i=Number(t.pst)||0,c=Number(t.hst)||0,d=Number(t.qst)||0,h=(o+l+i+c+d).toFixed(2);r(u=>({...u,final_price:h}))},[t.base_price,t.gst,t.pst,t.hst,t.qst,r]),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Tax"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-grid",style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[xr.map(({label:o,key:l})=>e.jsxs("div",{className:"form-group",style:{flex:"1 1 150px"},children:[e.jsx("label",{htmlFor:l,children:o}),e.jsx("input",{type:"text",id:l,placeholder:`Enter ${o}`,value:t[l]||"",onChange:i=>n(l,i.target.value)}),s[l]&&e.jsx("span",{className:"error",style:{color:"red"},children:s[l]})]},l)),e.jsxs("div",{className:"form-group",style:{flex:"1 1 150px"},children:[e.jsx("label",{htmlFor:"final_price",children:"Final Price"}),e.jsx("input",{type:"text",id:"final_price",value:t.final_price||"0.00",readOnly:!0,style:{backgroundColor:"#f0f0f0",cursor:"not-allowed"}})]})]}),e.jsxs("div",{className:"form-group",style:{marginTop:"1rem"},children:[e.jsx("label",{htmlFor:"notes",children:"Notes"}),e.jsx("textarea",{id:"notes",placeholder:"Enter Additional Notes",value:t.notes||"",onChange:o=>n("notes",o.target.value),style:{width:"100%",minHeight:"80px"}}),s.notes&&e.jsx("span",{className:"error",style:{color:"red"},children:s.notes})]})]})},ze="https://linkloadsapiprod.onrender.com/api",vr=(t,r)=>{const s={id:0,customer:"",customer_ref_no:"",branch:"",booked_by:"",account_rep:"",sales_rep:"",customer_po_no:"",commodity:"",equipment:"",load_type:"",temperature:"",origin_location:[],destination_location:[],hot:!1,team:!1,air_ride:!1,tarp:!1,hazmat:!1,currency:"",base_price:"",charges:[],discounts:[],gst:"",pst:"",hst:"",qst:"",final_price:"",notes:"",created_at:"",updated_at:""},[a,n]=C.useState(s),o=()=>!!a.customer&&!!a.customer_ref_no&&!!a.equipment&&!!a.load_type,l=async x=>{if(x.preventDefault(),!o()){_.fire("Validation Error","Please fill in all required fields.","error");return}try{const S=localStorage.getItem("token");if(!S){_.fire("Error","No token found","error");return}const P={Authorization:`Bearer ${S}`},F=a.id?await O.put(`${ze}/order/${a.id}`,a,{headers:P}):await O.post(`${ze}/order`,a,{headers:P});_.fire(a.id?"Success!":"Saved!","Order created successfully.","success"),i(),r()}catch(S){console.error("Error saving/updating order:",S.response?S.response.data:S.message),_.fire("Error","An error occurred while processing the order.","error")}},i=()=>{n({id:0,customer:"",customer_ref_no:"",branch:"",booked_by:"",account_rep:"",sales_rep:"",customer_po_no:"",commodity:"",equipment:"",load_type:"",temperature:"",origin_location:[],destination_location:[],hot:!1,team:!1,air_ride:!1,tarp:!1,hazmat:!1,currency:"",base_price:"",charges:[],discounts:[],gst:"",pst:"",hst:"",qst:"",final_price:"",notes:"",created_at:"",updated_at:""})};return{order:a,setOrder:n,handleSubmit:l,clearOrderForm:i,handleAddOrigin:()=>{n(x=>({...x,origin_location:[...x.origin_location,{address:"",city:"",state:"",postal:"",country:"",date:"",time:"",currency:"",equipment:"",pickup_po:"",phone:"",packages:0,weight:0,dimensions:"",notes:""}]}))},handleOriginChange:(x,S)=>{const P=a.origin_location.map((F,T)=>T===x?S:F);n(F=>({...F,origin_location:P}))},handleRemoveOrigin:x=>{n(S=>({...S,origin_location:S.origin_location.filter((P,F)=>F!==x)}))},handleAddDestination:()=>{n(x=>({...x,destination_location:[...x.destination_location,{address:"",city:"",state:"",postal:"",country:"",date:"",time:"",currency:"",equipment:"",pickup_po:"",phone:"",packages:0,weight:0,dimensions:"",notes:""}]}))},handleDestinationChange:(x,S)=>{const P=a.destination_location.map((F,T)=>T===x?S:F);n(F=>({...F,destination_location:P}))},handleRemoveDestination:x=>{n(S=>({...S,destination_location:S.destination_location.filter((P,F)=>F!==x)}))},handleAddCharge:()=>{n(x=>({...x,charges:[...x.charges,{type:"",charge:0,percent:""}]}))},handleChargeChange:(x,S)=>{const P=a.charges.map((F,T)=>T===x?S:F);n(F=>({...F,charges:P}))},handleRemoveCharge:x=>{n(S=>({...S,charges:S.charges.filter((P,F)=>F!==x)}))},handleAddDiscount:()=>{n(x=>({...x,discounts:[...x.discounts,{type:"",charge:0,percent:""}]}))},handleDiscountChange:(x,S)=>{const P=a.discounts.map((F,T)=>T===x?S:F);n(F=>({...F,discounts:P}))},handleRemoveDiscount:x=>{n(S=>({...S,discounts:S.discounts.filter((P,F)=>F!==x)}))}}},jr=({onClose:t,onSuccess:r})=>{const{order:s,setOrder:a,handleSubmit:n,handleAddOrigin:o,handleOriginChange:l,handleRemoveOrigin:i,handleAddDestination:c,handleDestinationChange:d,handleRemoveDestination:h,handleAddCharge:u,handleChargeChange:m,handleRemoveCharge:g,handleAddDiscount:p,handleDiscountChange:y,handleRemoveDiscount:j}=vr(t,r);return e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:n,className:"form-main",children:[e.jsx(ir,{order:s,setOrder:a}),e.jsx(dr,{order:s,setOrder:a}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Origin"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:s.origin_location.map((v,w)=>e.jsx(Je,{order:s,setOrder:a,origin_location:s.origin_location,index:w,onAddOrigin:o,handleOriginChange:l,handleRemoveOrigin:i},w))}),s.origin_location.length===0&&e.jsx("button",{type:"button",onClick:o,className:"add-button",children:e.jsx(H,{})})]}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Destination"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:s.destination_location.map((v,w)=>e.jsx(Ve,{order:s,setOrder:a,destination_location:s.destination_location,index:w,onAddDestination:c,handleDestinationChange:d,handleRemoveDestination:h},w))}),s.destination_location.length===0&&e.jsx("button",{type:"button",onClick:c,className:"add-button",children:e.jsx(H,{})})]}),e.jsx(ur,{order:s,setOrder:a}),e.jsx(gr,{order:s,setOrder:a}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Charges"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:s.charges.map((v,w)=>e.jsx(Ze,{order:s,setOrder:a,charges:s.charges,index:w,onAddCharge:u,handleChargeChange:m,handleRemoveCharge:g},w))}),s.charges.length===0&&e.jsx("button",{type:"button",onClick:u,className:"add-button",children:e.jsx(H,{})})]}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Discounts"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:s.discounts.map((v,w)=>e.jsx(Ye,{order:s,setOrder:a,discounts:s.discounts,index:w,onAddDiscount:p,handleDiscountChange:y,handleRemoveDiscount:j},w))}),s.discounts.length===0&&e.jsx("button",{type:"button",onClick:p,className:"add-button",children:e.jsx(H,{})})]}),e.jsx(yr,{order:s,setOrder:a}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn-submit",children:"Generate Order"}),e.jsx("button",{type:"button",className:"btn-cancel",onClick:t,children:"Cancel"})]})]})})},br=f.object({carrier:f.string().min(1,"Carrier is required").max(200,"Carrier cannot exceed 200 characters").regex(/^[a-zA-Z0-9\s.,'"-]+$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed"),contact:f.string().max(30,"Contact cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional(),equipment:f.enum(["DRY VAN 53'","FLATBED 53'","REEFER 53'"],{errorMap:()=>({message:"Invalid equipment type"})}),driver_mobile:f.string().max(30,"Driver cell cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional(),truck_unit_no:f.string().max(20,"Truck unit no cannot exceed 20 characters").regex(/^[a-zA-Z0-9-_\/]*$/,"Only letters, numbers, dashes, underscores, and slashes allowed").optional(),trailer_unit_no:f.string().max(20,"Trailer unit no cannot exceed 20 characters").regex(/^[a-zA-Z0-9-_\/]*$/,"Only letters, numbers, dashes, underscores, and slashes allowed").optional(),paps_pars_no:f.string().max(20,"PAPS#/PARS# cannot exceed 20 characters").regex(/^[a-zA-Z0-9-_\/]*$/,"Only letters, numbers, dashes, underscores, and slashes allowed").optional(),tracking_code:f.string().max(200,"Tracking code cannot exceed 200 characters").regex(/^[a-zA-Z0-9\s.,'"-]+$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),border:f.string().max(100,"Border cannot exceed 100 characters").regex(/^[a-zA-Z0-9\s.,'"-]+$/,"Only letters, numbers, spaces, apostrophes, periods, commas, and hyphens allowed").optional(),currency:f.enum(["CAD","USD"],{errorMap:()=>({message:"Invalid currency"})})}),Sr=[{key:"contact",label:"Contact",placeholder:"Enter Contact",type:"text"},{key:"equipment",label:"Equipment",placeholder:"Enter Equipment",type:"dropdown"},{key:"driver_mobile",label:"Driver Cell",placeholder:"Enter Driver Cell",type:"text"},{key:"truck_unit_no",label:"Truck Unit No",placeholder:"Enter Truck Unit No",type:"text"},{key:"trailer_unit_no",label:"Trailer Unit No",placeholder:"Enter Trailer Unit No",type:"text"},{key:"paps_pars_no",label:"PAPS#/PARS#",placeholder:"Enter PAPS#/PARS#",type:"text"},{key:"tracking_code",label:"Tracking Code",placeholder:"Enter Tracking Code",type:"text"},{key:"border",label:"Border",placeholder:"Enter Border",type:"text"},{key:"currency",label:"Currency",placeholder:"Enter Currency",type:"dropdown"}],Cr=({dispatch:t,setDispatch:r})=>{const[s,a]=C.useState({}),[n,o]=C.useState([]),l="https://linkloadsapiprod.onrender.com/api";C.useEffect(()=>{(async()=>{try{const d=localStorage.getItem("token"),h=await O.get(`${l}/carrier`,{headers:{Authorization:`Bearer ${d}`}});if(!h||!h.data){console.error("API response is undefined or invalid:",h);return}console.log("Fetched carriers:",h.data);const u=h.data.map(m=>({value:m.dba,label:m.dba}));o(u)}catch(d){console.error("Error fetching carriers:",d)}})()},[]);const i=(c,d)=>{let h=d,u="";const m={...t,[c]:h},g=br.safeParse(m);if(!g.success){const p=g.error.errors.find(y=>y.path[0]===c);u=p?p.message:""}a(p=>({...p,[c]:u})),r(m)};return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Dispatch Details"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[e.jsxs("label",{htmlFor:"carrier",children:["Carrier ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{id:"quote_carrier",value:t.carrier||"",onChange:c=>i("carrier",c.target.value),onBlur:()=>i("carrier",t.carrier||""),children:[e.jsx("option",{value:"",disabled:!0,children:"Select a carrier"}),n.length>0?n.map((c,d)=>e.jsx("option",{value:c.value,children:c.label},`${c.value}-${d}`)):e.jsx("option",{disabled:!0,children:"No carriers found"})]}),s.carrier&&e.jsx("span",{className:"error",style:{color:"red"},children:s.carrier})]}),Sr.map(({key:c,label:d,placeholder:h,type:u})=>e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[e.jsx("label",{htmlFor:c,children:d}),u==="dropdown"?e.jsxs("select",{id:c,value:String(t[c]||""),onChange:m=>i(c,m.target.value),children:[e.jsxs("option",{value:"",disabled:!0,children:["Select ",d.toLowerCase()]}),c==="equipment"&&["DRY VAN 53'","FLATBED 53'","REEFER 53'"].map(m=>e.jsx("option",{value:m,children:m},m)),c==="currency"&&["CAD","USD"].map(m=>e.jsx("option",{value:m,children:m},m))]}):e.jsx("input",{type:"text",id:c,placeholder:h,value:String(t[c]||""),onChange:m=>i(c,m.target.value)}),s[c]&&e.jsx("span",{className:"error",style:{color:"red"},children:s[c]})]},c))]})]})},Ar=f.object({rate:f.string().regex(/^\d+(\.\d{1,2})?$/,"Enter a valid rate (e.g., 100.50)").optional(),gst:f.string().regex(/^\d+(\.\d{1,2})?$/,"Enter a valid GST amount (e.g., 5.00)").optional(),pst:f.string().regex(/^\d+(\.\d{1,2})?$/,"Enter a valid PST amount (e.g., 7.50)").optional(),hst:f.string().regex(/^\d+(\.\d{1,2})?$/,"Enter a valid HST amount (e.g., 13.00)").optional(),qst:f.string().regex(/^\d+(\.\d{1,2})?$/,"Enter a valid QST amount (e.g., 9.97)").optional(),final_price:f.string().regex(/^\d+(\.\d{1,2})?$/,"Enter a valid price (e.g., 150.75)").optional()}),Nr=[{key:"rate",label:"Rate"},{key:"gst",label:"GST"},{key:"pst",label:"PST"},{key:"hst",label:"HST"},{key:"qst",label:"QST"}],wr=({dispatch:t,setDispatch:r})=>{const[s,a]=C.useState({}),n=(o,l)=>{const i=l.trim();let c="";const d={...t,[o]:i},h=Ar.safeParse(d);if(!h.success){const u=h.error.errors.find(m=>m.path[0]===o);c=u?u.message:""}a(u=>({...u,[o]:c})),r(d)};return C.useEffect(()=>{const o=Number(t.rate)||0,l=Number(t.gst)||0,i=Number(t.pst)||0,c=Number(t.hst)||0,d=Number(t.qst)||0,h=(o+l+i+c+d).toFixed(2);r(u=>({...u,final_price:h}))},[t.rate,t.gst,t.pst,t.hst,t.qst,r]),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Tax"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-grid",style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[Nr.map(({label:o,key:l})=>e.jsxs("div",{className:"form-group",style:{flex:"1 1 150px"},children:[e.jsx("label",{htmlFor:l,children:o}),e.jsx("input",{type:"text",id:l,placeholder:`Enter ${o}`,value:t[l]||"",onChange:i=>n(l,i.target.value)}),s[l]&&e.jsx("span",{className:"error",style:{color:"red"},children:s[l]})]},l)),e.jsxs("div",{className:"form-group",style:{flex:"1 1 150px"},children:[e.jsx("label",{htmlFor:"final_price",children:"Final Price"}),e.jsx("input",{type:"text",id:"final_price",value:t.final_price||"0.00",readOnly:!0,style:{backgroundColor:"#f0f0f0",cursor:"not-allowed"}})]})]})]})},Oe="https://linkloadsapiprod.onrender.com/api",Pr=(t,r)=>{const s={id:0,carrier:"",contact:"",equipment:"",driver_mobile:"",truck_unit_no:"",trailer_unit_no:"",paps_pars_no:"",tracking_code:"",border:"",currency:"",rate:"",charges:[],discounts:[],gst:"",pst:"",hst:"",qst:"",final_price:"",status:"",created_at:"",updated_at:""},[a,n]=C.useState(s),o=()=>!!a.carrier&&!!a.equipment&&!!a.currency&&!!a.rate,l=async p=>{if(p.preventDefault(),!o()){_.fire("Validation Error","Please fill in all required fields.","error");return}try{const y=localStorage.getItem("token");if(!y){_.fire("Error","No token found","error");return}const j={Authorization:`Bearer ${y}`},v=a.id?await O.put(`${Oe}/dispatch/${a.id}`,a,{headers:j}):await O.post(`${Oe}/dispatch`,a,{headers:j});_.fire(a.id?"Success!":"Saved!","Dispatch created successfully.","success"),i(),r()}catch(y){console.error("Error saving/updating dispatch:",y.response?y.response.data:y.message),_.fire("Error","An error occurred while processing the dispatch.","error")}},i=()=>{n({id:0,carrier:"",contact:"",equipment:"",driver_mobile:"",truck_unit_no:"",trailer_unit_no:"",paps_pars_no:"",tracking_code:"",border:"",currency:"",rate:"",charges:[],discounts:[],gst:"",pst:"",hst:"",qst:"",final_price:"",status:"",created_at:"",updated_at:""})};return{dispatch:a,setDispatch:n,handleSubmit:l,clearDispatchForm:i,handleAddCharge:()=>{n(p=>({...p,charges:[...p.charges,{type:"",charge:0,percent:""}]}))},handleChargeChange:(p,y)=>{const j=a.charges.map((v,w)=>w===p?y:v);n(v=>({...v,charges:j}))},handleRemoveCharge:p=>{n(y=>({...y,charges:y.charges.filter((j,v)=>v!==p)}))},handleAddDiscount:()=>{n(p=>({...p,discounts:[...p.discounts,{type:"",charge:0,percent:""}]}))},handleDiscountChange:(p,y)=>{const j=a.discounts.map((v,w)=>w===p?y:v);n(v=>({...v,discounts:j}))},handleRemoveDiscount:p=>{n(y=>({...y,discounts:y.discounts.filter((j,v)=>v!==p)}))}}},Dr=({onClose:t,onSuccess:r})=>{const{dispatch:s,setDispatch:a,handleSubmit:n,handleAddCharge:o,handleChargeChange:l,handleRemoveCharge:i,handleAddDiscount:c,handleDiscountChange:d,handleRemoveDiscount:h}=Pr(t,r);return e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:n,className:"form-main",children:[e.jsx(Cr,{dispatch:s,setDispatch:a}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Charges"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:s.charges.map((u,m)=>e.jsx(At,{dispatch:s,setDispatch:a,charges:s.charges,index:m,onAddCharge:o,handleChargeChange:l,handleRemoveCharge:i},m))}),s.charges.length===0&&e.jsx("button",{type:"button",onClick:o,className:"add-button",children:e.jsx(H,{})})]}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Discounts"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:s.discounts.map((u,m)=>e.jsx(Nt,{dispatch:s,setDispatch:a,discounts:s.discounts,index:m,onAddDiscount:c,handleDiscountChange:d,handleRemoveDiscount:h},m))}),s.discounts.length===0&&e.jsx("button",{type:"button",onClick:c,className:"add-button",children:e.jsx(H,{})})]}),e.jsx(wr,{dispatch:s,setDispatch:a}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn-submit",children:"Dispatch"}),e.jsx("button",{type:"button",className:"btn-cancel",onClick:t,children:"Cancel"})]})]})})},Fr=({formOrder:t})=>{const[r,s]=C.useState([]),[a,n]=C.useState([]),o="https://linkloadsapiprod.onrender.com/api";return C.useEffect(()=>{(async()=>{try{const i=localStorage.getItem("token"),{data:c}=await O.get(`${o}/customer`,{headers:{Authorization:`Bearer ${i}`}});console.log("Fetched customers:",c);const d=c.map(h=>({value:h.value,label:h.label,refNo:h.refNo}));s(d)}catch(i){console.error("Error fetching customers:",i)}})()},[]),C.useEffect(()=>{if(t.customer){const l=r.find(i=>i.value===t.customer);n(l?[{value:l.refNo,label:l.refNo}]:[])}else n([])},[t.customer,r]),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"General"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"customer",children:"Customer"}),e.jsx("div",{children:t.customer})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"customerRefNo",children:"Customer Ref. No"}),e.jsx("div",{children:t.customer_ref_no})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"remitName",children:"Branch"}),e.jsx("div",{children:t.branch})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"accNo",children:"Booked By"}),e.jsx("div",{children:t.booked_by})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"branch",children:"Account Rep"}),e.jsx("div",{children:t.account_rep})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"website",children:"Sales Rep"}),e.jsx("div",{children:t.sales_rep})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"fedIdNo",children:"Customer PO Number"}),e.jsx("div",{children:t.customer_po_no})]})]})]})},Er=({formOrder:t})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Shipment"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"commodity",children:"Commodity"}),e.jsx("div",{children:t.commodity||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"equipment",children:"Equipment"}),e.jsx("div",{children:t.equipment||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"load_type",children:"Load Type"}),e.jsx("div",{children:t.load_type||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"temperature",children:"Temperature"}),e.jsx("div",{children:t.temperature||""})]})]})]}),Br=({origin:t})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Address"}),e.jsx("div",{children:t.address||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"City"}),e.jsx("div",{children:t.city||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"State"}),e.jsx("div",{children:t.state||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Postal Code"}),e.jsx("div",{children:t.postal||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Country"}),e.jsx("div",{children:t.country||""})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Date"}),e.jsx("div",{children:t.date||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Time"}),e.jsx("div",{children:t.time||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Currency"}),e.jsx("div",{children:t.currency||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Equipment"}),e.jsx("div",{children:t.equipment||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Pickup PO"}),e.jsx("div",{children:t.pickup_po||""})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Phone"}),e.jsx("div",{children:t.phone||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Packages"}),e.jsx("div",{children:t.packages||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Weight"}),e.jsx("div",{children:t.weight||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Dimensions"}),e.jsx("div",{children:t.dimensions||""})]})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Notes"}),e.jsx("div",{children:t.notes||""})]})]}),kr=({destination:t})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Address"}),e.jsx("div",{children:t.address||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"City"}),e.jsx("div",{children:t.city||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"State"}),e.jsx("div",{children:t.state||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Postal Code"}),e.jsx("div",{children:t.postal||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Country"}),e.jsx("div",{children:t.country||""})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Date"}),e.jsx("div",{children:t.date||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Time"}),e.jsx("div",{children:t.time||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Currency"}),e.jsx("div",{children:t.currency||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Equipment"}),e.jsx("div",{children:t.equipment||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Pickup PO"}),e.jsx("div",{children:t.pickup_po||""})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Phone"}),e.jsx("div",{children:t.phone||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Packages"}),e.jsx("div",{children:t.packages||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Weight"}),e.jsx("div",{children:t.weight||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Dimensions"}),e.jsx("div",{children:t.dimensions||""})]})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Notes"}),e.jsx("div",{children:t.notes||""})]})]}),_r=({formOrder:t})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Load Specifications"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"hot",style:{display:"block"},children:"Hot"}),e.jsx("span",{children:t.hot?"Yes":"No"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"team",style:{display:"block"},children:"Team"}),e.jsx("span",{children:t.team?"Yes":"No"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"air_ride",style:{display:"block"},children:"Air ride"}),e.jsx("span",{children:t.air_ride?"Yes":"No"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"tarp",style:{display:"block"},children:"TARP"}),e.jsx("span",{children:t.tarp?"Yes":"No"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"hazmat",style:{display:"block"},children:"Hazmat"}),e.jsx("span",{children:t.hazmat?"Yes":"No"})]})]})]}),Tr=({formOrder:t})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Revenue"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Currency"}),e.jsx("div",{children:t.currency||""})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Base Price"}),e.jsx("div",{children:t.base_price||""})]})]})]}),Rr=({charge:t})=>e.jsxs("div",{className:"contact-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Type"}),e.jsx("div",{children:t.type||""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Charge"}),e.jsx("div",{children:t.charge||""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Percent/Flat Rate"}),e.jsx("div",{children:t.percent||""})]})]}),Hr=({discount:t})=>e.jsxs("div",{className:"contact-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Type"}),e.jsx("div",{children:t.type||""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Charge"}),e.jsx("div",{children:t.charge||""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Percent/Flat Rate"}),e.jsx("div",{children:t.percent||""})]})]}),zr=({formOrder:t})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Tax"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:["base_price","gst","pst","hst","qst","final_price"].map(r=>e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:r.replace("_"," ").toUpperCase()}),e.jsx("div",{children:t[r]||""})]},r))}),e.jsx("div",{className:"form-row",style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Notes"}),e.jsx("div",{children:t.notes||""})]})})]}),Or=({order:t,onClose:r})=>{const[s,a]=C.useState({id:0,customer:"",customer_ref_no:"",branch:"",booked_by:"",account_rep:"",sales_rep:"",customer_po_no:"",commodity:"",equipment:"",load_type:"",temperature:"",origin_location:[],destination_location:[],hot:!1,team:!1,air_ride:!1,tarp:!1,hazmat:!1,currency:"",base_price:"",charges:[],discounts:[],gst:"",pst:"",hst:"",qst:"",final_price:"",notes:"",created_at:"",updated_at:""});return C.useEffect(()=>{t&&a({...t,origin_location:Array.isArray(t.origin_location)?t.origin_location:typeof t.origin_location=="string"?JSON.parse(t.origin_location):[],destination_location:Array.isArray(t.destination_location)?t.destination_location:typeof t.destination_location=="string"?JSON.parse(t.destination_location):[],charges:Array.isArray(t.charges)?t.charges:typeof t.charges=="string"?JSON.parse(t.charges):[],discounts:Array.isArray(t.discounts)?t.discounts:typeof t.discounts=="string"?JSON.parse(t.discounts):[]})},[t]),e.jsx("div",{className:"form-container",children:e.jsxs("form",{className:"form-main",children:[e.jsx(Fr,{formOrder:s}),e.jsx(Er,{formOrder:s}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Origin"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:s.origin_location.map((n,o)=>e.jsx(Br,{origin:n,index:o},o))})]}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Destination"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:s.destination_location.map((n,o)=>e.jsx(kr,{destination:n,index:o},o))})]}),e.jsx(_r,{formOrder:s}),e.jsx(Tr,{formOrder:s}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Charges"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:s.charges.map((n,o)=>e.jsx(Rr,{charge:n,index:o},o))})]}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Discounts"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:s.discounts.map((n,o)=>e.jsx(Hr,{discount:n,index:o},o))})]}),e.jsx(zr,{formOrder:s}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"button",className:"btn-cancel",onClick:r,style:{padding:"9px 15px"},children:"Cancel"})})]})})};function Xe(t,r,s,a,n){a=a||{};var o=1.15,l=n.internal.scaleFactor,i=n.internal.getFontSize()/l,c=n.getLineHeightFactor?n.getLineHeightFactor():o,d=i*c,h=/\r\n|\r|\n/g,u="",m=1;if((a.valign==="middle"||a.valign==="bottom"||a.halign==="center"||a.halign==="right")&&(u=typeof t=="string"?t.split(h):t,m=u.length||1),s+=i*(2-o),a.valign==="middle"?s-=m/2*d:a.valign==="bottom"&&(s-=m*d),a.halign==="center"||a.halign==="right"){var g=i;if(a.halign==="center"&&(g*=.5),u&&m>=1){for(var p=0;p<u.length;p++)n.text(u[p],r-n.getStringUnitWidth(u[p])*g,s),s+=d;return n}r-=n.getStringUnitWidth(t)*g}return a.halign==="justify"?n.text(t,r,s,{maxWidth:a.maxWidth||100,align:"justify"}):n.text(t,r,s),n}var We={},Z=function(){function t(r){this.jsPDFDocument=r,this.userStyles={textColor:r.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:r.internal.getFontSize(),fontStyle:r.internal.getFont().fontStyle,font:r.internal.getFont().fontName,lineWidth:r.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:r.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(r,s){s===void 0&&(s=null),s?s.__autoTableDocumentDefaults=r:We=r},t.unifyColor=function(r){return Array.isArray(r)?r:typeof r=="number"?[r,r,r]:typeof r=="string"?[r]:null},t.prototype.applyStyles=function(r,s){var a,n,o;s===void 0&&(s=!1),r.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(r.fontStyle);var l=this.jsPDFDocument.internal.getFont(),i=l.fontStyle,c=l.fontName;if(r.font&&(c=r.font),r.fontStyle){i=r.fontStyle;var d=this.getFontList()[c];d&&d.indexOf(i)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),i=d[0])}if(this.jsPDFDocument.setFont(c,i),r.fontSize&&this.jsPDFDocument.setFontSize(r.fontSize),!s){var h=t.unifyColor(r.fillColor);h&&(a=this.jsPDFDocument).setFillColor.apply(a,h),h=t.unifyColor(r.textColor),h&&(n=this.jsPDFDocument).setTextColor.apply(n,h),h=t.unifyColor(r.lineColor),h&&(o=this.jsPDFDocument).setDrawColor.apply(o,h),typeof r.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(r.lineWidth)}},t.prototype.splitTextToSize=function(r,s,a){return this.jsPDFDocument.splitTextToSize(r,s,a)},t.prototype.rect=function(r,s,a,n,o){return this.jsPDFDocument.rect(r,s,a,n,o)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(r){return this.jsPDFDocument.getTextWidth(r)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(r){this.jsPDFDocument.setPage(r)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return We||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var r=this.jsPDFDocument.internal.pageSize;return r.width==null&&(r={width:r.getWidth(),height:r.getHeight()}),r},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var r=this.jsPDFDocument;return r.getLineHeightFactor?r.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(r){return r/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var r=this.jsPDFDocument.internal.getCurrentPageInfo();return r?r.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),be=function(t,r){return be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(s[n]=a[n])},be(t,r)};function Ge(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");be(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}var et=function(t){Ge(r,t);function r(s){var a=t.call(this)||this;return a._element=s,a}return r}(Array);function Wr(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Qr(t){var r={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return r[t]}function oe(t,r,s){s.applyStyles(r,!0);var a=Array.isArray(t)?t:[t],n=a.map(function(o){return s.getTextWidth(o)}).reduce(function(o,l){return Math.max(o,l)},0);return n}function tt(t,r,s,a){var n=r.settings.tableLineWidth,o=r.settings.tableLineColor;t.applyStyles({lineWidth:n,lineColor:o});var l=rt(n,!1);l&&t.rect(s.x,s.y,r.getWidth(t.pageSize().width),a.y-s.y,l)}function rt(t,r){var s=t>0,a=r||r===0;return s&&a?"DF":s?"S":a?"F":null}function le(t,r){var s,a,n,o;if(t=t||r,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=r}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(s=t.left)!==null&&s!==void 0?s:r,top:(a=t.top)!==null&&a!==void 0?a:r,right:(n=t.right)!==null&&n!==void 0?n:r,bottom:(o=t.bottom)!==null&&o!==void 0?o:r}):(typeof t!="number"&&(t=r),{top:t,right:t,bottom:t,left:t})}function st(t,r){var s=le(r.settings.margin,0);return t.pageSize().width-(s.left+s.right)}function Kr(t,r,s,a,n){var o={},l=1.3333333333333333,i=xe(r,function(b){return n.getComputedStyle(b).backgroundColor});i!=null&&(o.fillColor=i);var c=xe(r,function(b){return n.getComputedStyle(b).color});c!=null&&(o.textColor=c);var d=Ur(a,s);d&&(o.cellPadding=d);var h="borderTopColor",u=l*s,m=a.borderTopWidth;if(a.borderBottomWidth===m&&a.borderRightWidth===m&&a.borderLeftWidth===m){var g=(parseFloat(m)||0)/u;g&&(o.lineWidth=g)}else o.lineWidth={top:(parseFloat(a.borderTopWidth)||0)/u,right:(parseFloat(a.borderRightWidth)||0)/u,bottom:(parseFloat(a.borderBottomWidth)||0)/u,left:(parseFloat(a.borderLeftWidth)||0)/u},o.lineWidth.top||(o.lineWidth.right?h="borderRightColor":o.lineWidth.bottom?h="borderBottomColor":o.lineWidth.left&&(h="borderLeftColor"));var p=xe(r,function(b){return n.getComputedStyle(b)[h]});p!=null&&(o.lineColor=p);var y=["left","right","center","justify"];y.indexOf(a.textAlign)!==-1&&(o.halign=a.textAlign),y=["middle","bottom","top"],y.indexOf(a.verticalAlign)!==-1&&(o.valign=a.verticalAlign);var j=parseInt(a.fontSize||"");isNaN(j)||(o.fontSize=j/l);var v=Ir(a);v&&(o.fontStyle=v);var w=(a.fontFamily||"").toLowerCase();return t.indexOf(w)!==-1&&(o.font=w),o}function Ir(t){var r="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(r="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(r+="italic"),r}function xe(t,r){var s=at(t,r);if(!s)return null;var a=s.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!a||!Array.isArray(a))return null;var n=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])],o=parseInt(a[4]);return o===0||isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function at(t,r){var s=r(t);return s==="rgba(0, 0, 0, 0)"||s==="transparent"||s==="initial"||s==="inherit"?t.parentElement==null?null:at(t.parentElement,r):s}function Ur(t,r){var s=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],a=96/(72/r),n=(parseInt(t.lineHeight)-parseInt(t.fontSize))/r/2,o=s.map(function(i){return parseInt(i||"0")/a}),l=le(o,0);return n>l.top&&(l.top=n),n>l.bottom&&(l.bottom=n),l}function nt(t,r,s,a,n){var o,l;a===void 0&&(a=!1),n===void 0&&(n=!1);var i;typeof r=="string"?i=s.document.querySelector(r):i=r;var c=Object.keys(t.getFontList()),d=t.scaleFactor(),h=[],u=[],m=[];if(!i)return console.error("Html table could not be found with input: ",r),{head:h,body:u,foot:m};for(var g=0;g<i.rows.length;g++){var p=i.rows[g],y=(l=(o=p==null?void 0:p.parentElement)===null||o===void 0?void 0:o.tagName)===null||l===void 0?void 0:l.toLowerCase(),j=qr(c,d,s,p,a,n);j&&(y==="thead"?h.push(j):y==="tfoot"?m.push(j):u.push(j))}return{head:h,body:u,foot:m}}function qr(t,r,s,a,n,o){for(var l=new et(a),i=0;i<a.cells.length;i++){var c=a.cells[i],d=s.getComputedStyle(c);if(n||d.display!=="none"){var h=void 0;o&&(h=Kr(t,c,r,d,s)),l.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:h,_element:c,content:Mr(c)})}}var u=s.getComputedStyle(a);if(l.length>0&&(n||u.display!=="none"))return l}function Mr(t){var r=t.cloneNode(!0);return r.innerHTML=r.innerHTML.replace(/\n/g,"").replace(/ +/g," "),r.innerHTML=r.innerHTML.split(/<br.*?>/).map(function(s){return s.trim()}).join(`
`),r.innerText||r.textContent||""}function Lr(t,r,s){for(var a=0,n=[t,r,s];a<n.length;a++){var o=n[a];o&&typeof o!="object"&&console.error("The options parameter should be of type object, is: "+typeof o),o.startY&&typeof o.startY!="number"&&(console.error("Invalid value for startY option",o.startY),delete o.startY)}}function W(t,r,s,a,n){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(t),l=1;l<arguments.length;l++){var i=arguments[l];if(i!=null)for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(o[c]=i[c])}return o}function ot(t,r){var s=new Z(t),a=s.getDocumentOptions(),n=s.getGlobalOptions();Lr(n,a,r);var o=W({},n,a,r),l;typeof window<"u"&&(l=window);var i=$r(n,a,r),c=Jr(n,a,r),d=Vr(s,o),h=Yr(s,o,l);return{id:r.tableId,content:h,hooks:c,styles:i,settings:d}}function $r(t,r,s){for(var a={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},n=function(c){if(c==="columnStyles"){var d=t[c],h=r[c],u=s[c];a.columnStyles=W({},d,h,u)}else{var m=[t,r,s],g=m.map(function(p){return p[c]||{}});a[c]=W({},g[0],g[1],g[2])}},o=0,l=Object.keys(a);o<l.length;o++){var i=l[o];n(i)}return a}function Jr(t,r,s){for(var a=[t,r,s],n={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},o=0,l=a;o<l.length;o++){var i=l[o];i.didParseCell&&n.didParseCell.push(i.didParseCell),i.willDrawCell&&n.willDrawCell.push(i.willDrawCell),i.didDrawCell&&n.didDrawCell.push(i.didDrawCell),i.willDrawPage&&n.willDrawPage.push(i.willDrawPage),i.didDrawPage&&n.didDrawPage.push(i.didDrawPage)}return n}function Vr(t,r){var s,a,n,o,l,i,c,d,h,u,m,g,p=le(r.margin,40/t.scaleFactor()),y=(s=Zr(t,r.startY))!==null&&s!==void 0?s:p.top,j;r.showFoot===!0?j="everyPage":r.showFoot===!1?j="never":j=(a=r.showFoot)!==null&&a!==void 0?a:"everyPage";var v;r.showHead===!0?v="everyPage":r.showHead===!1?v="never":v=(n=r.showHead)!==null&&n!==void 0?n:"everyPage";var w=(o=r.useCss)!==null&&o!==void 0?o:!1,b=r.theme||(w?"plain":"striped"),x=!!r.horizontalPageBreak,S=(l=r.horizontalPageBreakRepeat)!==null&&l!==void 0?l:null;return{includeHiddenHtml:(i=r.includeHiddenHtml)!==null&&i!==void 0?i:!1,useCss:w,theme:b,startY:y,margin:p,pageBreak:(c=r.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(d=r.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(h=r.tableWidth)!==null&&h!==void 0?h:"auto",showHead:v,showFoot:j,tableLineWidth:(u=r.tableLineWidth)!==null&&u!==void 0?u:0,tableLineColor:(m=r.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:x,horizontalPageBreakRepeat:S,horizontalPageBreakBehaviour:(g=r.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function Zr(t,r){var s=t.getLastAutoTable(),a=t.scaleFactor(),n=t.pageNumber(),o=!1;if(s&&s.startPageNumber){var l=s.startPageNumber+s.pageNumber-1;o=l===n}return typeof r=="number"?r:(r==null||r===!1)&&o&&(s==null?void 0:s.finalY)!=null?s.finalY+20/a:null}function Yr(t,r,s){var a=r.head||[],n=r.body||[],o=r.foot||[];if(r.html){var l=r.includeHiddenHtml;if(s){var i=nt(t,r.html,s,l,r.useCss)||{};a=i.head||a,n=i.body||a,o=i.foot||a}else console.error("Cannot parse html in non browser environment")}var c=r.columns||Xr(a,n,o);return{columns:c,head:a,body:n,foot:o}}function Xr(t,r,s){var a=t[0]||r[0]||s[0]||[],n=[];return Object.keys(a).filter(function(o){return o!=="_element"}).forEach(function(o){var l=1,i;Array.isArray(a)?i=a[parseInt(o)]:i=a[o],typeof i=="object"&&!Array.isArray(i)&&(l=(i==null?void 0:i.colSpan)||1);for(var c=0;c<l;c++){var d=void 0;Array.isArray(a)?d=n.length:d=o+(c>0?"_".concat(c):"");var h={dataKey:d};n.push(h)}}),n}var Se=function(){function t(r,s,a){this.table=s,this.pageNumber=s.pageNumber,this.settings=s.settings,this.cursor=a,this.doc=r.getDocument()}return t}(),Gr=function(t){Ge(r,t);function r(s,a,n,o,l,i){var c=t.call(this,s,a,i)||this;return c.cell=n,c.row=o,c.column=l,c.section=o.section,c}return r}(Se),es=function(){function t(r,s){this.pageNumber=1,this.id=r.id,this.settings=r.settings,this.styles=r.styles,this.hooks=r.hooks,this.columns=s.columns,this.head=s.head,this.body=s.body,this.foot=s.foot}return t.prototype.getHeadHeight=function(r){return this.head.reduce(function(s,a){return s+a.getMaxCellHeight(r)},0)},t.prototype.getFootHeight=function(r){return this.foot.reduce(function(s,a){return s+a.getMaxCellHeight(r)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(r,s,a,n,o,l){for(var i=0,c=s;i<c.length;i++){var d=c[i],h=new Gr(r,this,a,n,o,l),u=d(h)===!1;if(a.text=Array.isArray(a.text)?a.text:[a.text],u)return!1}return!0},t.prototype.callEndPageHooks=function(r,s){r.applyStyles(r.userStyles);for(var a=0,n=this.hooks.didDrawPage;a<n.length;a++){var o=n[a];o(new Se(r,this,s))}},t.prototype.callWillDrawPageHooks=function(r,s){for(var a=0,n=this.hooks.willDrawPage;a<n.length;a++){var o=n[a];o(new Se(r,this,s))}},t.prototype.getWidth=function(r){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var s=this.columns.reduce(function(n,o){return n+o.wrappedWidth},0);return s}else{var a=this.settings.margin;return r-a.left-a.right}},t}(),it=function(){function t(r,s,a,n,o){o===void 0&&(o=!1),this.height=0,this.raw=r,r instanceof et&&(this.raw=r._element,this.element=r._element),this.index=s,this.section=a,this.cells=n,this.spansMultiplePages=o}return t.prototype.getMaxCellHeight=function(r){var s=this;return r.reduce(function(a,n){var o;return Math.max(a,((o=s.cells[n.index])===null||o===void 0?void 0:o.height)||0)},0)},t.prototype.hasRowSpan=function(r){var s=this;return r.filter(function(a){var n=s.cells[a.index];return n?n.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(r,s){return this.getMaxCellHeight(s)<=r},t.prototype.getMinimumRowHeight=function(r,s){var a=this;return r.reduce(function(n,o){var l=a.cells[o.index];if(!l)return 0;var i=s.getLineHeight(l.styles.fontSize),c=l.padding("vertical"),d=c+i;return d>n?d:n},0)},t}(),lt=function(){function t(r,s,a){var n;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=s,this.section=a,this.raw=r;var o=r;r!=null&&typeof r=="object"&&!Array.isArray(r)?(this.rowSpan=r.rowSpan||1,this.colSpan=r.colSpan||1,o=(n=r.content)!==null&&n!==void 0?n:r,r._element&&(this.raw=r._element)):(this.rowSpan=1,this.colSpan=1);var l=o!=null?""+o:"",i=/\r\n|\r|\n/g;this.text=l.split(i)}return t.prototype.getTextPos=function(){var r;if(this.styles.valign==="top")r=this.y+this.padding("top");else if(this.styles.valign==="bottom")r=this.y+this.height-this.padding("bottom");else{var s=this.height-this.padding("vertical");r=this.y+s/2+this.padding("top")}var a;if(this.styles.halign==="right")a=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var n=this.width-this.padding("horizontal");a=this.x+n/2+this.padding("left")}else a=this.x+this.padding("left");return{x:a,y:r}},t.prototype.getContentHeight=function(r,s){s===void 0&&(s=1.15);var a=Array.isArray(this.text)?this.text.length:1,n=this.styles.fontSize/r*s,o=a*n+this.padding("vertical");return Math.max(o,this.styles.minCellHeight)},t.prototype.padding=function(r){var s=le(this.styles.cellPadding,0);return r==="vertical"?s.top+s.bottom:r==="horizontal"?s.left+s.right:s[r]},t}(),ts=function(){function t(r,s,a){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=r,this.raw=s,this.index=a}return t.prototype.getMaxCustomCellWidth=function(r){for(var s=0,a=0,n=r.allRows();a<n.length;a++){var o=n[a],l=o.cells[this.index];l&&typeof l.styles.cellWidth=="number"&&(s=Math.max(s,l.styles.cellWidth))}return s},t}();function rs(t,r){ss(t,r);var s=[],a=0;r.columns.forEach(function(o){var l=o.getMaxCustomCellWidth(r);l?o.width=l:(o.width=o.wrappedWidth,s.push(o)),a+=o.width});var n=r.getWidth(t.pageSize().width)-a;n&&(n=Ce(s,n,function(o){return Math.max(o.minReadableWidth,o.minWidth)})),n&&(n=Ce(s,n,function(o){return o.minWidth})),n=Math.abs(n),!r.settings.horizontalPageBreak&&n>.1/t.scaleFactor()&&(n=n<1?n:Math.round(n),console.warn("Of the table content, ".concat(n," units width could not fit page"))),ns(r),os(r,t),as(r)}function ss(t,r){var s=t.scaleFactor(),a=r.settings.horizontalPageBreak,n=st(t,r);r.allRows().forEach(function(o){for(var l=0,i=r.columns;l<i.length;l++){var c=i[l],d=o.cells[c.index];if(d){var h=r.hooks.didParseCell;r.callCellHooks(t,h,d,o,c,null);var u=d.padding("horizontal");d.contentWidth=oe(d.text,d.styles,t)+u;var m=oe(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,t);if(d.minReadableWidth=m+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||a===!0)d.contentWidth>n?(d.minWidth=n,d.wrappedWidth=n):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var g=10/s;d.minWidth=d.styles.minCellWidth||g,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),r.allRows().forEach(function(o){for(var l=0,i=r.columns;l<i.length;l++){var c=i[l],d=o.cells[c.index];if(d&&d.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,d.wrappedWidth),c.minWidth=Math.max(c.minWidth,d.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,d.minReadableWidth);else{var h=r.styles.columnStyles[c.dataKey]||r.styles.columnStyles[c.index]||{},u=h.cellWidth||h.minCellWidth;u&&typeof u=="number"&&(c.minWidth=u,c.wrappedWidth=u)}d&&(d.colSpan>1&&!c.minWidth&&(c.minWidth=d.minWidth),d.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=d.minWidth))}})}function Ce(t,r,s){for(var a=r,n=t.reduce(function(g,p){return g+p.wrappedWidth},0),o=0;o<t.length;o++){var l=t[o],i=l.wrappedWidth/n,c=a*i,d=l.width+c,h=s(l),u=d<h?h:d;r-=u-l.width,l.width=u}if(r=Math.round(r*1e10)/1e10,r){var m=t.filter(function(g){return r<0?g.width>s(g):!0});m.length&&(r=Ce(m,r,s))}return r}function as(t){for(var r={},s=1,a=t.allRows(),n=0;n<a.length;n++)for(var o=a[n],l=0,i=t.columns;l<i.length;l++){var c=i[l],d=r[c.index];if(s>1)s--,delete o.cells[c.index];else if(d)d.cell.height+=o.height,s=d.cell.colSpan,delete o.cells[c.index],d.left--,d.left<=1&&delete r[c.index];else{var h=o.cells[c.index];if(!h)continue;if(h.height=o.height,h.rowSpan>1){var u=a.length-n,m=h.rowSpan>u?u:h.rowSpan;r[c.index]={cell:h,left:m,row:o}}}}}function ns(t){for(var r=t.allRows(),s=0;s<r.length;s++)for(var a=r[s],n=null,o=0,l=0,i=0;i<t.columns.length;i++){var c=t.columns[i];if(l-=1,l>1&&t.columns[i+1])o+=c.width,delete a.cells[c.index];else if(n){var d=n;delete a.cells[c.index],n=null,d.width=c.width+o}else{var d=a.cells[c.index];if(!d)continue;if(l=d.colSpan,o=0,d.colSpan>1){n=d,o+=c.width;continue}d.width=c.width+o}}}function os(t,r){for(var s={count:0,height:0},a=0,n=t.allRows();a<n.length;a++){for(var o=n[a],l=0,i=t.columns;l<i.length;l++){var c=i[l],d=o.cells[c.index];if(d){r.applyStyles(d.styles,!0);var h=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=r.splitTextToSize(d.text,h+1/r.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=Qe(d.text,h,d.styles,r,"...");else if(d.styles.overflow==="hidden")d.text=Qe(d.text,h,d.styles,r,"");else if(typeof d.styles.overflow=="function"){var u=d.styles.overflow(d.text,h);typeof u=="string"?d.text=[u]:d.text=u}d.contentHeight=d.getContentHeight(r.scaleFactor(),r.getLineHeightFactor());var m=d.contentHeight/d.rowSpan;d.rowSpan>1&&s.count*s.height<m*d.rowSpan?s={height:m,count:d.rowSpan}:s&&s.count>0&&s.height>m&&(m=s.height),m>o.height&&(o.height=m)}}s.count--}}function Qe(t,r,s,a,n){return t.map(function(o){return is(o,r,s,a,n)})}function is(t,r,s,a,n){var o=1e4*a.scaleFactor();if(r=Math.ceil(r*o)/o,r>=oe(t,s,a))return t;for(;r<oe(t+n,s,a)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+n}function ct(t,r){var s=new Z(t),a=ls(r,s.scaleFactor()),n=new es(r,a);return rs(s,n),s.applyStyles(s.userStyles),n}function ls(t,r){var s=t.content,a=ds(s.columns);if(s.head.length===0){var n=Ke(a,"head");n&&s.head.push(n)}if(s.foot.length===0){var n=Ke(a,"foot");n&&s.foot.push(n)}var o=t.settings.theme,l=t.styles;return{columns:a,head:ye("head",s.head,a,l,o,r),body:ye("body",s.body,a,l,o,r),foot:ye("foot",s.foot,a,l,o,r)}}function ye(t,r,s,a,n,o){var l={},i=r.map(function(c,d){for(var h=0,u={},m=0,g=0,p=0,y=s;p<y.length;p++){var j=y[p];if(l[j.index]==null||l[j.index].left===0)if(g===0){var v=void 0;Array.isArray(c)?v=c[j.index-m-h]:v=c[j.dataKey];var w={};typeof v=="object"&&!Array.isArray(v)&&(w=(v==null?void 0:v.styles)||{});var b=hs(t,j,d,n,a,o,w),x=new lt(v,b,t);u[j.dataKey]=x,u[j.index]=x,g=x.colSpan-1,l[j.index]={left:x.rowSpan-1,times:g}}else g--,m++;else l[j.index].left--,g=l[j.index].times,h++}return new it(c,d,t,u)});return i}function Ke(t,r){var s={};return t.forEach(function(a){if(a.raw!=null){var n=cs(r,a.raw);n!=null&&(s[a.dataKey]=n)}}),Object.keys(s).length>0?s:null}function cs(t,r){if(t==="head"){if(typeof r=="object")return r.header||null;if(typeof r=="string"||typeof r=="number")return r}else if(t==="foot"&&typeof r=="object")return r.footer;return null}function ds(t){return t.map(function(r,s){var a,n;return typeof r=="object"?n=(a=r.dataKey)!==null&&a!==void 0?a:s:n=s,new ts(n,r,s)})}function hs(t,r,s,a,n,o,l){var i=Qr(a),c;t==="head"?c=n.headStyles:t==="body"?c=n.bodyStyles:t==="foot"&&(c=n.footStyles);var d=W({},i.table,i[t],n.styles,c),h=n.columnStyles[r.dataKey]||n.columnStyles[r.index]||{},u=t==="body"?h:{},m=t==="body"&&s%2===0?W({},i.alternateRow,n.alternateRowStyles):{},g=Wr(o),p=W({},g,d,m,u);return W(p,l)}function us(t,r,s){var a;s===void 0&&(s={});var n=st(t,r),o=new Map,l=[],i=[],c=[];Array.isArray(r.settings.horizontalPageBreakRepeat)?c=r.settings.horizontalPageBreakRepeat:(typeof r.settings.horizontalPageBreakRepeat=="string"||typeof r.settings.horizontalPageBreakRepeat=="number")&&(c=[r.settings.horizontalPageBreakRepeat]),c.forEach(function(m){var g=r.columns.find(function(p){return p.dataKey===m||p.index===m});g&&!o.has(g.index)&&(o.set(g.index,!0),l.push(g.index),i.push(r.columns[g.index]),n-=g.wrappedWidth)});for(var d=!0,h=(a=s==null?void 0:s.start)!==null&&a!==void 0?a:0;h<r.columns.length;){if(o.has(h)){h++;continue}var u=r.columns[h].wrappedWidth;if(d||n>=u)d=!1,l.push(h),i.push(r.columns[h]),n-=u;else break;h++}return{colIndexes:l,columns:i,lastIndex:h-1}}function ps(t,r){for(var s=[],a=0;a<r.columns.length;a++){var n=us(t,r,{start:a});n.columns.length&&(s.push(n),a=n.lastIndex)}return s}function dt(t,r){var s=r.settings,a=s.startY,n=s.margin,o={x:n.left,y:a},l=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns),i=a+n.bottom+l;if(s.pageBreak==="avoid"){var c=r.body,d=c.reduce(function(m,g){return m+g.height},0);i+=d}var h=new Z(t);(s.pageBreak==="always"||s.startY!=null&&i>h.pageSize().height)&&(ut(h),o.y=n.top),r.callWillDrawPageHooks(h,o);var u=W({},o);r.startPageNumber=h.pageNumber(),s.horizontalPageBreak?ms(h,r,u,o):(h.applyStyles(h.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&r.head.forEach(function(m){return Q(h,r,m,o,r.columns)}),h.applyStyles(h.userStyles),r.body.forEach(function(m,g){var p=g===r.body.length-1;ie(h,r,m,p,u,o,r.columns)}),h.applyStyles(h.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&r.foot.forEach(function(m){return Q(h,r,m,o,r.columns)})),tt(h,r,u,o),r.callEndPageHooks(h,o),r.finalY=o.y,t.lastAutoTable=r,h.applyStyles(h.userStyles)}function ms(t,r,s,a){var n=ps(t,r),o=r.settings;if(o.horizontalPageBreakBehaviour==="afterAllRows")n.forEach(function(d,h){t.applyStyles(t.userStyles),h>0?G(t,r,s,a,d.columns,!0):Ie(t,r,a,d.columns),gs(t,r,s,a,d.columns),ve(t,r,a,d.columns)});else for(var l=-1,i=n[0],c=function(){var d=l;if(i){t.applyStyles(t.userStyles);var h=i.columns;l>=0?G(t,r,s,a,h,!0):Ie(t,r,a,h),d=Ue(t,r,l+1,a,h),ve(t,r,a,h)}var u=d-l;n.slice(1).forEach(function(m){t.applyStyles(t.userStyles),G(t,r,s,a,m.columns,!0),Ue(t,r,l+1,a,m.columns,u),ve(t,r,a,m.columns)}),l=d};l<r.body.length-1;)c()}function Ie(t,r,s,a){var n=r.settings;t.applyStyles(t.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&r.head.forEach(function(o){return Q(t,r,o,s,a)})}function gs(t,r,s,a,n){t.applyStyles(t.userStyles),r.body.forEach(function(o,l){var i=l===r.body.length-1;ie(t,r,o,i,s,a,n)})}function Ue(t,r,s,a,n,o){t.applyStyles(t.userStyles),o=o??r.body.length;var l=Math.min(s+o,r.body.length),i=-1;return r.body.slice(s,l).forEach(function(c,d){var h=s+d===r.body.length-1,u=ht(t,r,h,a);c.canEntireRowFit(u,n)&&(Q(t,r,c,a,n),i=s+d)}),i}function ve(t,r,s,a){var n=r.settings;t.applyStyles(t.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&r.foot.forEach(function(o){return Q(t,r,o,s,a)})}function fs(t,r,s){var a=s.getLineHeight(t.styles.fontSize),n=t.padding("vertical"),o=Math.floor((r-n)/a);return Math.max(0,o)}function xs(t,r,s,a){var n={};t.spansMultiplePages=!0,t.height=0;for(var o=0,l=0,i=s.columns;l<i.length;l++){var c=i[l],d=t.cells[c.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var h=new lt(d.raw,d.styles,d.section);h=W(h,d),h.text=[];var u=fs(d,r,a);d.text.length>u&&(h.text=d.text.splice(u,d.text.length));var m=a.scaleFactor(),g=a.getLineHeightFactor();d.contentHeight=d.getContentHeight(m,g),d.contentHeight>=r&&(d.contentHeight=r,h.styles.minCellHeight-=r),d.contentHeight>t.height&&(t.height=d.contentHeight),h.contentHeight=h.getContentHeight(m,g),h.contentHeight>o&&(o=h.contentHeight),n[c.index]=h}}var p=new it(t.raw,-1,t.section,n,!0);p.height=o;for(var y=0,j=s.columns;y<j.length;y++){var c=j[y],h=p.cells[c.index];h&&(h.height=p.height);var d=t.cells[c.index];d&&(d.height=t.height)}return p}function ys(t,r,s,a){var n=t.pageSize().height,o=a.settings.margin,l=o.top+o.bottom,i=n-l;r.section==="body"&&(i-=a.getHeadHeight(a.columns)+a.getFootHeight(a.columns));var c=r.getMinimumRowHeight(a.columns,t),d=c<s;if(c>i)return console.error("Will not be able to print row ".concat(r.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var h=r.hasRowSpan(a.columns),u=r.getMaxCellHeight(a.columns)>i;return u?(h&&console.error("The content of row ".concat(r.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(h||a.settings.rowPageBreak==="avoid")}function ie(t,r,s,a,n,o,l){var i=ht(t,r,a,o);if(s.canEntireRowFit(i,l))Q(t,r,s,o,l);else if(ys(t,s,i,r)){var c=xs(s,i,r,t);Q(t,r,s,o,l),G(t,r,n,o,l),ie(t,r,c,a,n,o,l)}else G(t,r,n,o,l),ie(t,r,s,a,n,o,l)}function Q(t,r,s,a,n){a.x=r.settings.margin.left;for(var o=0,l=n;o<l.length;o++){var i=l[o],c=s.cells[i.index];if(!c){a.x+=i.width;continue}t.applyStyles(c.styles),c.x=a.x,c.y=a.y;var d=r.callCellHooks(t,r.hooks.willDrawCell,c,s,i,a);if(d===!1){a.x+=i.width;continue}vs(t,c,a);var h=c.getTextPos();Xe(c.text,h.x,h.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},t.getDocument()),r.callCellHooks(t,r.hooks.didDrawCell,c,s,i,a),a.x+=i.width}a.y+=s.height}function vs(t,r,s){var a=r.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof a.lineWidth=="number"){var n=rt(a.lineWidth,a.fillColor);n&&t.rect(r.x,s.y,r.width,r.height,n)}else typeof a.lineWidth=="object"&&(a.fillColor&&t.rect(r.x,s.y,r.width,r.height,"F"),js(t,r,s,a.lineWidth))}function js(t,r,s,a){var n,o,l,i;a.top&&(n=s.x,o=s.y,l=s.x+r.width,i=s.y,a.right&&(l+=.5*a.right),a.left&&(n-=.5*a.left),c(a.top,n,o,l,i)),a.bottom&&(n=s.x,o=s.y+r.height,l=s.x+r.width,i=s.y+r.height,a.right&&(l+=.5*a.right),a.left&&(n-=.5*a.left),c(a.bottom,n,o,l,i)),a.left&&(n=s.x,o=s.y,l=s.x,i=s.y+r.height,a.top&&(o-=.5*a.top),a.bottom&&(i+=.5*a.bottom),c(a.left,n,o,l,i)),a.right&&(n=s.x+r.width,o=s.y,l=s.x+r.width,i=s.y+r.height,a.top&&(o-=.5*a.top),a.bottom&&(i+=.5*a.bottom),c(a.right,n,o,l,i));function c(d,h,u,m,g){t.getDocument().setLineWidth(d),t.getDocument().line(h,u,m,g,"S")}}function ht(t,r,s,a){var n=r.settings.margin.bottom,o=r.settings.showFoot;return(o==="everyPage"||o==="lastPage"&&s)&&(n+=r.getFootHeight(r.columns)),t.pageSize().height-a.y-n}function G(t,r,s,a,n,o){n===void 0&&(n=[]),o===void 0&&(o=!1),t.applyStyles(t.userStyles),r.settings.showFoot==="everyPage"&&!o&&r.foot.forEach(function(i){return Q(t,r,i,a,n)}),r.callEndPageHooks(t,a);var l=r.settings.margin;tt(t,r,s,a),ut(t),r.pageNumber++,a.x=l.left,a.y=l.top,s.y=l.top,r.callWillDrawPageHooks(t,a),r.settings.showHead==="everyPage"&&(r.head.forEach(function(i){return Q(t,r,i,a,n)}),t.applyStyles(t.userStyles))}function ut(t){var r=t.pageNumber();t.setPage(r+1);var s=t.pageNumber();return s===r?(t.addPage(),!0):!1}function bs(t){t.API.autoTable=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var a=r[0],n=ot(this,a),o=ct(this,n);return dt(this,o),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(r,s,a,n){Xe(r,s,a,n,this)},t.API.autoTableSetDefaults=function(r){return Z.setDefaults(r,this),this},t.autoTableSetDefaults=function(r,s){Z.setDefaults(r,s)},t.API.autoTableHtmlToJson=function(r,s){var a;if(s===void 0&&(s=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var n=new Z(this),o=nt(n,r,window,s,!1),l=o.head,i=o.body,c=((a=l[0])===null||a===void 0?void 0:a.map(function(d){return d.content}))||[];return{columns:c,rows:i,data:i}}}var je;function qe(t,r){var s=ot(t,r),a=ct(t,s);dt(t,a)}try{if(typeof window<"u"&&window){var Me=window,Le=Me.jsPDF||((je=Me.jspdf)===null||je===void 0?void 0:je.jsPDF);Le&&bs(Le)}}catch(t){console.error("Could not apply autoTable plugin",t)}const ne="https://linkloadsapiprod.onrender.com/api",Ss=()=>{const[t,r]=C.useState([]),[s,a]=C.useState([]),[n,o]=C.useState(!0),[l,i]=C.useState(""),[c,d]=C.useState("created_at"),[h,u]=C.useState(!0),[m,g]=C.useState(1),[p,y]=C.useState(null),[j,v]=C.useState(!1),[w,b]=C.useState(!1),[x,S]=C.useState(!1),[P,F]=C.useState(!1),[T,I]=C.useState([]),[Y,we]=C.useState(10),J=async()=>{try{const D=localStorage.getItem("token");if(!D)throw new Error("No token found");o(!0);const{data:N}=await O.get(`${ne}/order`,{headers:{Authorization:`Bearer ${D}`}});r(N)}catch(D){console.error("Error loading orders:",D),de(D)}finally{o(!1)}};C.useEffect(()=>{J()},[]);const ce=async()=>{try{const D=localStorage.getItem("token"),{data:N}=await O.get(`${ne}/customer`,{headers:{Authorization:`Bearer ${D}`}});a(N)}catch(D){console.error("Error fetching customers:",D)}};C.useEffect(()=>{J(),ce()},[]);const de=D=>{D.response&&D.response.status===401&&_.fire({icon:"error",title:"Unauthorized",text:"You need to log in to access this resource."})},he=D=>{g(D)},ue=D=>{y(D),v(!0)},pe=()=>{v(!1),y(null)},B=D=>{y(D),F(!0)},U=()=>{F(!1),y(null)},q=D=>{r(N=>N.map(E=>E.id===D.id?{...E,...D}:E))},k=()=>{T.length===me.length?I([]):I(me.map(D=>D.id))},M=D=>{I(N=>N.includes(D)?N.filter(E=>E!==D):[...N,D])},L=async()=>{if(T.length===0){_.fire({icon:"warning",title:"No record selected",text:"Please select a record to delete."});return}if((await _.fire({title:"Are you sure?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete selected!",cancelButtonText:"No, cancel!"})).isConfirmed)try{const N=localStorage.getItem("token");if(!N)throw new Error("No token found");await Promise.all(T.map(E=>O.delete(`${ne}/order/${E}`,{headers:{Authorization:`Bearer ${N}`}}))),r(E=>E.filter(A=>!T.includes(A.id))),I([]),_.fire("Deleted!","Selected orders have been deleted.","success")}catch(N){console.error("Error deleting orders:",N),_.fire({icon:"error",title:"Error!",text:"Failed to delete selected orders."})}},pt=async D=>{var N,E;try{const A=localStorage.getItem("token"),V=(await O.post(`${ne}/order/${D}/duplicate`,{},{headers:{Authorization:`Bearer ${A}`}})).data.order;_.fire({icon:"success",title:"Duplicated!",text:"Order has been duplicated successfully.",timer:2e3,showConfirmButton:!1}),r(X=>[V,...X])}catch(A){console.error("Failed to duplicate order:",A),_.fire({icon:"error",title:"Error",text:((E=(N=A==null?void 0:A.response)==null?void 0:N.data)==null?void 0:E.message)||"Could not duplicate the order."})}},mt=()=>{var A,re,V,X;const D=T[0],N=t.find(R=>R.id===D);if(!N)return;const E=new Te;E.setFontSize(16),E.text(`Order Details - ID: ${N.id}`,10,10),E.setFontSize(12),E.text(`Customer: ${N.customer||"-"}`,10,20),E.text(`Ref No: ${N.customer_ref_no||"-"}`,10,30),E.text(`PO No: ${N.customer_po_no||"-"}`,10,40),E.text(`Equipment: ${N.equipment||"-"}`,10,50);try{const R=typeof N.origin_location=="string"?JSON.parse(N.origin_location):N.origin_location,z=typeof N.destination_location=="string"?JSON.parse(N.destination_location):N.destination_location;E.text(`Pickup Date: ${((A=R==null?void 0:R[0])==null?void 0:A.date)||"-"}`,10,60),E.text(`Pickup Time: ${((re=R==null?void 0:R[0])==null?void 0:re.time)||"-"}`,10,70),E.text(`Delivery Date: ${((V=z==null?void 0:z[0])==null?void 0:V.date)||"-"}`,10,80),E.text(`Delivery Time: ${((X=z==null?void 0:z[0])==null?void 0:X.time)||"-"}`,10,90)}catch{E.text("Error parsing pickup/delivery data.",10,100)}E.save(`Order_${N.id}.pdf`)},gt=()=>{var ke,_e;const D=T[0],N=t.find(K=>K.id===D);if(!N)return;const E=s.find(K=>K.cust_name===N.customer);if(!E)return;const A=new Te;A.setFontSize(20),A.text("INVOICE",105,20,{align:"center"}),A.setFontSize(12),A.text("MAGMA LOGISTICS INC.",14,30),A.text("8501 Bruceville RD APT 235",14,36),A.text("Elk Grove ,CA,95758",14,42),A.text("Phone: 916-301-2136 Fax:",14,48),A.addImage("data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAAAAAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCADIAMgDAREAAhEBAxEB/8QAHQABAAEEAwEAAAAAAAAAAAAAAAkFBgcIAgMEAf/EAEkQAAEDAwMCAQcFDAgGAwAAAAECAwQABQYHERIIITEJExQiQVFhFRkycZUWGDlCVFdygZG10uIjNkNYdZSz1DNSYqGiwYKDsf/EABsBAQACAwEBAAAAAAAAAAAAAAABAgMEBQYH/8QAMBEBAAICAQMCBQIGAgMAAAAAAAECAxEEBRIhMUETIlFhcYHBBhQykaHRQrEVUvD/2gAMAwEAAhEDEQA/AJU6oFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoFAoLTz7VLD9LYMeZmOT2vGYslwtMvXWWhhLqwNylPIjc7e6gsn78XQz87WIfbDP8VToPvxdDPztYh9sM/xU0H34uhn52sQ+2Gf4qaD78XQz87WIfbDP8VNB9+LoZ+drEPthn+Kmg+/F0M/O1iH2wz/ABU0H34uhn52sQ+2Gf4qaD78XQz87WIfbDP8VNB9+LoZ+drEPthn+Kmg+/F0M/O1iH2wz/FTQuvT/WfAtU3ZjWGZjZcndiBKpDdqnNvqaB7AqCSSAdvGoF70CgUCgUCgUCgUCgUCgUEYHlo4Td0vOh8F/kY8ibNacCDseKlRgdvjsatAzEnyPnT2Ug+j5L9r/wAlNj78z309/k+S/a/8lNh8z309/k+S/a/8lNh8z309/k+S/a/8lSHzPfT3+T5L9r/yUD5nvp7/ACfJftf+SgfM99Pf5Pkv2v8AyUD5nzp7/J8l+1/5KD4ryP3TyhJUpnJAkeJN32A/8Kj1HTC8kT06T2Uvxfuhksq8HGr0FJP6wipnceJgYL8mVhtu0666ddMVswdTabPElwYqX181+bbnNpTyV7TsPGo9hKvVQoFAoFAoFAoFAoFAoFBGR5ZP+tegn+JS/wDUi1aBJo39AfUKqOdToKsFBwUoISVKISkDcknYAUFt3vUGx2GHHkPylPMPlSUORWlPJ9UEkqKAQkbJPc9qtFLW8RCs2iPVrZqn1eZk3kCbDpziUa8rm8UW6eJaX1yV7bkBkbBAG+xKlbjY+r2O3WwcHHNe/PbWvXx+7UvnvE6pG1v5bo/1M5FbYU6flqrlc5ZUXbLbrr8l2+CPxQ4tpAcdPvCSB29tZ8efgUmYiuo+sxuZ/Zitjz28zP6ekI++oO4as4NnVww/OcpuD823kDzUa4OLjEKTyBTsRv2Pckb++vWcOvGy44y4a+v28uNmnLS00vLr6euqjPenm/JkY7clS7U6selWWasriyBv37b+or/qTsffvVuXwcPLrq8efr7ow8i+Gd1lsP5MbLE531y635EiMYabrClzRHUsLLfOc0rjyHjtv4183y4/hWtTe9S9TS3fWLJW611ygUCgUCgUCgUCgUCgUEZHlk/616Cf4lL/ANSLVoEmjf0B9QpEaHOpHzcAb+ygxzqxqjJwXHXZFgtKcnvS+aWYaJjbLTfFJKnHlqVulCdu/EKPgANzWxgxRltq86hitftjx5aMq6wsr1GyyFHl4deINyRJ4iTb74tm3IaWQhZW2vjyCRyO3Ie47V6L/wAdjw0m0XiY/Hlzf5i1ramv+lTyLW7DZersfF/uk9NsTMBbdrkWuCXZUV9okNtLJK1upWQV7pWOQSEgAHvjpxcsYZydup3536LTlr8Tt34Y6z/Asw0x0wg57c9SZOJZFKdQ/Esa4zcZbJDii2XGUErSt3YK7J4pAIPbtW7iy4s+WcNcfdX67/f7Ne9b0p8Sbalut0V6nZ7qZphGm5vADzhbS7HyBqUytqeFexKEAFJR9FW/tBFee6hhxYcs1wz+n0dLjXvem7o/+tuJmurnVy7g6bWwJ4lJh2tiK1w8624eSXFqIHIlPcq327fCvV9Lti4/D+Lvx6y4/Ki+XP2abx9N/k/tP9C9rncGhmGSONpCpV0ZQplhQ2J8y0QQk7j6RJPb2V5rl9Vzcr5Y+Wv2/d1cHEx4vM+Za0dATaWvKN9RqEJCEJ+UAlKRsAPlBvsBXHbyT2qBQKBQKBQKBQKBQKBQKCMfyyq0t5PoOtZCUpuEslROwA5xqtAy71X+UVtulDbFp07Fnyy6SWzzuKZwdZhqBIKVNo7qPtB5AV6HgdItyPmzbrH/AG5nI5kYvFPMtEbx1367Xe4vzFahXCIXf7GG2200ge5KQnt/+16ivSuHWNdjkTy80z/UoF76t9Zcisciz3HUW+SLfIVydb9I4KV8OaQFbfDfas1On8Wlu6uONqzyc0x2zZi4XacJCJHpsjz7auSHfOq5JO++4O/bv3rd7a61pr9073tdOE49f9bNQ7BjCrsqRcrpJTEZlXWSpSG+aiSSpRJ28TsPE/E1gyXpxcVskR4j6MlItmvFdpbdLOgDSvTLDm4UyI5fbsVNvSrvJWUKeUkhQSlO/FKNx4ftNeCz9U5Ge+4nUfR6PHxceOuvVpHO65pw1ZyiHmVoYyrTkPPxmccfix1L/ovVjkvbb7pKQeQUdtztXo69Lj4NZxT23+vn9fDl/wA3PxJi/mv0SIdIms9j1k0bsdwtwtsG4ss8J1ot69xDXyUACk9wCBvufHfxNeT53Gvx81q23r2mfd2OPkjJjiYZZfxq0y7tHur9shvXOPv5mYthJeb7EeqvbcdiR4+01pRa0R2xPhsaje1WqEow+gb8JB1H/pXH94ooJPKrIVAUCgUCgUCgUCgUCgUEWvlrDIdu2jLUZr+m9IneZIIJUsqj7Db69vH31kprcbRPpOl5aI+TTezZqFl2sd6myLrMJck2ZtPBQSOyUqcB7dh7ANvAe+vUcjrPw94uLXUR7uRj4Pd8+WfLHXXB0QYXoVhiMiw566ngUiQxMkJeQ2FL4hROwUN/Aezse9bnTOp5eTk+Hl0wcri0xV7qNGa9Q5JQc477kZ1LrLi2nUndK21FKgfgRSYiY1JE69Gbcd6ssxs+imV4DJvd5nrunozMKW5cFlMFhtRU42gE7+uNk9j4Vy79PxW5Fc0REa9fHq3K8m8Y7UmfVSenjRW1ax5m1YrvlDeOl9lbza1BJ7J77rUpQCQfAbclHfw271k5nJvxqd9a7VwYYy21M6SYdKHTXcenrPZvyLao0/D7lBbYOSSZ3KfIUndwOFkDihtRVxCR3HEE+NeK5vMjl44m8/NE+mvDucfBOG3yx4bc1x2+UEYfQN+Eg6j/ANK4/vFFBJ5QKoFAoFAoFAoFAoFAoFBGD5Y6ExHzHQt9tpKXnrlKLi/arZcXarx6CTtv/hp+oUGqvlHp1jtPTxMevDy/NyJ0dgQ2VBK5p3UQjfx2T3X29qe+9djpEXtyYin0/s0eXNYxT3Iaa+ivMFAoL30a0cyPXHOoOJ4xHS5PlElTz3IMsIAJK3FAHYDb9pArW5HJx8XHOTJ6MuLFbLbtqmO0M6NdOtH8asTf3Owp+QQ2kqlXN8F0vyCByXsrtsCPVG3q79u/evnnJ6hn5Npmbaj6PTYuNjxRGo8s/Vzm0UCgjD6BvwkHUf8ApXH94ooJPKBVAoFAoFAoFAoFAoFAoIyPLJ/1r0E/xKX/AKkWrQJNG/oD6hUiMHyvd0uxzXAbc4eNjTAffZAUdlvlwJWSPeEhGx/6jXsv4fivZkt7+P7OH1GbbrHs0Pj4/LcjJkvBEOKr6L0pfAK/RHir/wCINdy3OwRf4dZ7rfSPLnxx8k17pjUfdxMa3Mp9aa7IXtvswzskHfw5KIP/AGrNF81vSuvzP+v9sfbjj1nb4l6Gt3zcaAt1aylKA88VK3+pIT41PZk1u19fiP8Aezur7VS0dCvR9L0nxWXkGYD0O/3xpsi1wXVs+hNDuErWlW6lncEjfYdh414PqXLjkX7KTMxHvPu9DxMM467tGpltza8et1k5mDFQypY9dYJUpX1k7k1xm+qdAoFBGH0DfhIOo/8ASuP7xRQSeUCqBQKBQKBQKBQKBQKBQRkeWT/rXoJ/iUv/AFItWgSaN/QH1CpGs/XX02v6+6dR5MC4twrnjgfmsMuxg4mSCj1kcgOSTsnttuCfEeBGXFa0fJFtRKloj+qY9EVOomOLxO6RIGWwSHJURmXEuUBwhMhhQ2SsAjY7bFJHqkKBB7iunx+PzMEzlwR6eJ15/wANTJkwZI7MjyYDZcOj5JGm3nlkdlQSHLUqYbc64Tvt/TcVpG3j4jety3WeXSs0tWIn8fswRwcNp7oncNvGc+6bn9JJ+KJ0+m4NdHYriIGRzrei4eYfI5NuGU0So7K277bgVz69Rz/FjJe0zHvHs2p42PsmtYbyaSdRWnmeWG2RoGeWS6XdMVpD7SZIacW7xAUQ25xV3Vv7K5lpibTNfRtRuI8stIUFp5JIUk9wR7ahLlQKBQRh9A34SDqP/SuP7xRQSeVQKBQKBQKBQKBQKBQKBQRkeWT/AK16Cf4lL/1ItWgSaN/QH1CkApSW0lSiEpHiSdgKkaQdfmnmmt70WukWDd8fj5fb5puFvZlXRpt5suOcpDSATvsvdSuB7cjuNq7HTebPHzxOS3yz4n9mjyePGTHMVjy046SdfcS0mseXY3n2BozSzXjg/GYDDTjiH0gpI3X3SlST9JPcEfGtvq/J4/JmtsVtzH2YeFiy4YmLx4Y+fs17RfLhc7bDXh1ulPuOx2JUv0dDTSiSlsFZClgJ2G+x32rzs634dOPTy8t/mWp22OB+RGn3vklTcq2xiyhPf1g4SEhZ9xSgd/xiKhLKXTZq7r3aL5Gg6bSL3kDCVpCrU42uXD238FcvVbHj3BTt76CZCwP3CTYre9do7cO6OR21S47K+aGnSkc0pV7QFbgGgqVAoIw+gb8JB1H/AKVx/eKKCTyqBQKBQKBQKBQKBQU+63y3WKMqRcp8W3x0jcuynktJA9+6iBQYiy3rQ0XwwOCdn1skvIG/mbaVS1n4DzYUP+9ToYayzyqWmdqS4mxWO+390fRUptEVtX61KKv/ABpoaSdYfU071Y37C5X3P/c6jGX3XoraJHpC31LLZ2V6oA2LQ8PeanQyBfusDqVy6MX/AJUTittdGyXkRGIDW3vS493P6iaQMTZXnl/yV1w5nq5c70pQ9aNb335gPw9ZTbX7CakWYb3jNv5KiWB65vb7+fvEslJ/+trj/wB1mgvbAsG1d1OBYwrF7gIiyAXbRAERgfpPbJ9/tUaDO2J+S11KyCG9MyPIbRZJikbojKcXKcWrfwWtI2T9YKvqqY1vz6InevDZDQLyfGD4LFXJzPHoWRXXdC2lypC30NnvySUbJQrYgEHj338BtVr9n/BFd/8AJtdaLJb7BDTDtcCNboiBsliIylpCfqSkAVRZ76BQKjYjD6BvwkHUf+lcf3iio9hJ5UBQKBQKBQKCwdTdbcT0kihzIJz4fWnk3DgxHZT6x8ENpO31nYUGqOonlKLwy46xg2lV6lgdkzb4w62k/HzTYJ/aoUGtmc9YXUhm3nGzJu1hjK/sbJaVx9h3/H4lf/lVxh9GHaoao3nzUi3ZJfp6gXFOXBLyghI7qUpbnZKR7SSBQe9Ohrlo3+XbjJDiTsqJY7VInO/Vz4oa/Ys0HD5CgWkKFv05yG8OD6L97DyEfX5llKf2FZoOpy96hMtqRbMflY8yB9Gz2ZUZW3xcCPOH9ajQWBfjf1yXH5toyC5S1d1LMCQ6tR+Kin/3QeDHLxPh3MOXrTXKbpASQfMRErjLX8Cosr2/UKDYrTvq3xTTXg5aukOVKmI22mXWY/Md39+7kYgfqAoMyMeV3zGO2lprp1uraEjZKETHgAPcAI1Bz+d+zX+7xd/84/8A7agfO/Zr/d4u/wDnH/8AbUD537Nf7vF3/wA4/wD7agfO/Zr/AHeLv/nH/wDbUD537Nf7vF3/AM4//tqB879mv93i7/5x/wD21RoUjyXqskzXq31k1EueKXHHYF9hvySmWwtLbTj0tDgaC1JTyOwV7PZUiUyqBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKDwXq6N2Wzzbg6N2orK3lDfbcJBJ8fqoNC9J+qjXfqI1VeGFuY3Z8MtdzabuUK4R0Ca3DKvXd2W6FKHHcckpABIHeg6L91c69Z5qtkVm0rZxRdihXEW+KLqltL7qt+PJPN9Bc3IJ9RJ7be00F19Z3W5kWhPyRi2HLtt1zRqO3IvEt+Mp2MwnjsTwSocSpXhuewI8d6C49WepjUDFNHNJhYxaZOpmaohgtriqcYQp1CVKIaCwoDdaQNz76Cs9SGv+a4JmumenOEvWqVmWRSG0Tn5kcrZaZTsHXAgKHH8ZQ3PYJNBiGT5Qy/Reo7MMdPyUrArJAnKacDJ9JkSGGiRsvnsQpYIAA8KCl5B1yavYx0/YXk12Yx6DmGYXNxcNhUVSmIdtSoJS44gL5FSu5B37g+FBsD0yaraoa5Xy45bcI0Cx6XpSWLUy7DUJ9zcHYyORVshrffYbHfwB2BNAuWu+YX7q3g6cYu7bEYpaoJn5DKfjl1wJ23ShDgWEoJJQO4PifdQYf1N6wtX9SM4yTHdAbBDlWzHioT79OjB1sFO4OylrS2N+J2G5JA32oGC+UUu8fp4u+QZTZWrpnlvunyQ1EtrJaalrUgLS5wKlEAA7K27b7beNBU9HNRuri/51aL1ndntGM6cOhUud5+Cy24zHCCoJ28+XEqVsBuodt+4oLCu3lDNRrdg+V5gm32ty0TLwu1YuBBWopQ2N3Xn/XHMbKbA22G/Lv2oL3TrT1LYfoBlGdZAvFLu+VsPWmXBbZVFbiFJU68rg//AEg8EJSDy3B8aC2MZ6vdebHo1ftTc5j4/GsD8BKccS1ALS50txzihRT51SvNpCVEggE7jbtQVPIOsjWh+24pgWGY3bcl1bmwETbu8zHPokIuDmlsI57AoQpIUVqAB/YAtvJer3qGws41p9fW8ctWpl2eUp2bOjtphx21EhptSg6G0rPEkkkj1kjbeg3c0HOoB0xtK9UHIK8yX5xUwW9pLbSBzPBOyVKSTxAJIO3egyHQKBQKBQKDDnU5rdddFMERc7JhU7OrnKfTHRbYqHOHEhRUpakIXsAB7u+9BHdgmNalQL3n+ssbS6fh8Z+3SLfa7Ow2867IkyNmzskoCghA5OFXHbcJA+AeTpaxWfp+5d9QL9pRmq8lxSIXoDr0yVIZuE50qQ2BEU0nslJUoq5HYpB8SKDu1V6UtUYWntvzS83a/TsuzuYhV0x+FDdcRDYKittLi0klJA47p2AB7EnjQXtnGbZbZ+sKy3y26TX/ACe3Yow1YrIh2NLYjBwIDXpClBKkHYlWxI9gO/aguNMnLrxm+s2ukrEb4xd7cwcdxaEYUkKUpfqreDX/AC7d+aU7+uaDE2ZdEGQvv6LWZq33Zd2v7a5V6uSVyiYKnnEqWFOBXbg0dvX9oI9tBcuu+mWRarXXU29M4nflY1glvi2LGreuC8hyYUrCCpsbclAJSskjffkmg3z0lvsjFOlzE7nLtU5EyBjMdS7aI61SA4hgbt+bPrctxtse9BpL0dXvUO4Z/qNEe0zvFtu+ZNyJkvJLk3KjpitIQotsNpdHHcrUAAFDx8PVoLW0vzzXLTvCb/o7i+kt5F6utye89epDD54haQhQ84QEbAJJCyvYb/tCtam9M+ZdM1m0svNnxN3MxaZgud1Yt6HH2/TitK+HFHJZQEoCQsjb1fjtQXHeNTta8r6fM3vN7smSSLrmV1TZrPYBCkbW+N3LrpACVoB3CAo7eBNBbWsd2ySw6cQunvFtDLnkkSzNNMM5CsSQXJqhyedQPNncFa1AEuHt40FzZppPqLjmgWjWgSbNcl3DIZxevsq3BSo1rZW+VlCnkgj1OXffbfidvZQZI1l02f1a6h9LdJomPXFrTvDozc+bPdYfbjO+aSA2z5wEJWfVSNj/AM6qDGOlNw1X0K6w8785pk9eomVzuBuynX+EWIlxTnnUEJWj6H9nuCSlI3oLP1+vupfWhm9ssVo0LmWCUzJLKL7PcebAjciOTpW0hKQAeW25PsG9BKRjNpVYcdtdrU+qSqDEajF5fi4UICeR+J23/XQVSgUCgUCg6n30RmHHnDshAKifhUxG50MSzepXGIucw8SZg3S4XV8oK/Q2ErbYQpXFK1nn4die2+wG9dmnSM9uPPJmYisfWfVrznr3dnu9OW9SWF4dlNmx6XIkybjdHUtNCIxzQ2VLCElxRI4gk/HwNV43SOVyMN89YiK1+s/r4LZ6VtFZ93Cb1IYzDzFrGURLrMua0BxZix0raZQVFIU4vnskbg96U6TntgnkbiK/efM/gnPWLdr04nr/AI/mOYTsctlvuzkiEVCTMMUeitEICyC4FHvsR7PE1XP0vNx8EcjJMan0jfn+ya5q3t2wp2SdTeL47lcPHBBut0uskcg1b2EOBKOXHmSVjtvv8e1ZcPR8+bDOfcRWPrKts9a27fd3yOo7GY+Zs4wmFd5NxWlDi1xoyXGWUKWpIWtYV6o3SdzVKdJz2wTyJmIr958z+Eznr3dvu5t9Q+Pysol2SFbbvP8AQlcJlwjx0mJGUU80pW6VAAlPcD4ionpWauGMt7RG/SN+Z9vEEZqzaaxHo6YHUviFxlwIzCZ6nJsyZCZJZSElcZILqirlsE+sAD7TWS/SOVjrNra8RWfX/wBvREZ6T4j/AO08Vq6scKu2VHH2mLs3MU6+y269FCWHVsjdxKV8tjt/7q9+icrHh+PMxrx7+fPp4RHIpNu1XtPtd8f1Jv11tlnhXXjbi4h+c/FCYwUggKSF8jue/ht761+V0zNxMdcmWY+bWo358/ZfHmrkmYj2ePKepXCcSy6zY1JkyZNyujiW2hFZ5obKlcU+cUSOO539/gavg6Rys+C/IrERWv1n/pFs9K2is+sqbk/VhgeJ3mbari9NbnxYollpDIV51JcCAlBCtirc77e4GsuDofM5GOMuOI1M6/xvz9lbcnHWZiXPLOqfEcNnKhz4V5ecbima+qFDDyY7IUElbhSr1QCQKjj9F5PJr3UmI86jc63P2TbkUpOpXBn+uuM6cY8q9XVUlyAGW3wqM2FKKV7cdkkg/jCtXi9Nz8vL8HF6+n9l75a447pUnHup3CMlud2gQ5MrzlshtTZDrrQQ2lLiQoJ5cvpAK7j2bHv2rPl6Ny8FK3vH9UzEfXwpXkUtMxHs8eKdVOH5bPfiRot2iOJiCeyudFDSZMYq4+dbJV3Tv9W9X5HReTx6xa0xPnU6nep9dSivIpbw44d1Y4Tmc2RFgt3VlxqP6WFTIoaQ6zz4FaFFWxHIH9hqeR0TlcasWvr114nfnW/JXk0vOoXTpRrNZ9Xo0uXZIN0ahR+IEudF8009uVD+jPI8tuJ3/VWnzen5eBMVyzG59oncx+WTHljL5qyFXNZigUCgUCg802OZUR1lK/NlaSnlxCtv1Hxq1Z1Oxgq79J8O/Z/AyibkbinIL7clhhq2sNqC0DsC6ByKN+/Hwr0WLrlsXGtx6U/qjUzuf+vTf3ac8aLX75l0X7o7suQZOvI5WR3VN0EmNIaU0lCWW0snkEeb22UCrc7nw3NZMPX8uHF8CuOO3Ux9/PvtE8Wtrd0yuSB04WaJld1yR6Z6Zd5bLbDL70Rs+iJSFhXmx7CrmdzWlbq2W2CuCI1WJmZ8z5/P40yRgrFpt7uvTLpyg6Z5dfMgiXp6a9dQ7zbfhsgoK1JPZwJ58RxGyd9vhVuX1a3MwUw2prt17z7fb0/Ux4Ix2m2/VRcu6T4Wa5jAvtxyJ3jDebfbjtW5hCuSFFQHnQOQSSdymtjjdcvxsFsNKeu43uff7em1LcaL27pl6ovS3b42pK8xVf5D0taUpMdyCwpKQEqGyFFJKPpEniQTWOetXni/yvZ4+u5/z9U/y8d/ft6sX6cVYrd8hehZXMNrvTxlP21yGyUB8gDmF7ctgB2T4d6x5urfGx0rbHHdTxE7n0/Ca4O2ZmJ8SpGHdJcTE7v6YcpnT22EyUwo70VoIjCQ5zdPb6SiQBufAVscjrt8+Ps+HEb1udz57Y1H4VrxorO9vmG9H9kwvIJF5iXuXInyWXmn3JUdtzmpx0rKxuPVO2ye3iB3pyOvZeRijDakRETGtb9o1r9ynGik7iVe0p6dY+lTl+ehX16a7dt1LdfhMJWklZWSVpAUsbnwUSB7Kwc7qtudFItTXb95+mv0WxYIxb1Pqt+59Hlmu+WfdLIyS6m6omx5bRSlsMoSzuUt+b22IJJO/j3Pvrax9ey48PwIxx26mPv599qTxazbu35dWTdGGOZbkLl7uN6nLnmVGkNuJabAbS0FbtAbfRUSCfiKnB/EOfj4vg0rHbqY9/f3/Qtxa2numXuybpQg5Tf7hcJWU3JmNcozcOfBjMNIRIZS753hy4kpBUBvt7qxYOuWwYopXHEzWZmJnfida2m3Gi0zO/VcGp/Txa9U2IsS53J9i3MOtrEVhlACkoBAQVeO3h+wVqcHqt+FM3pXdp35/PuyZMMZPEytbDejfG8Nt17iRLvOdF1hNwnnHW2yoBIUFLHb6Sion4bCt7kfxBn5NqWtWPlmZYqcWtImIn1ejFOlONjjEkvZXNuM1dvatTEp6Iyn0aK3vwbQkDbfc7lR7kiq5+t2zTGscRG5tMbnzM+sprxor7/Z1YZ0gWLBod2j2u8SUi4xWYzjjsdta08EkFSSfDkTyI8N6nk9ezcq1ZyVj5ZmfWff/XoU4tab1PqqWCdNsjTnFvkOw5tcbc16S1IU/Ggx23HAjb1FkJ9bkBsSdzWHldWjl5fi5sUT4mPMz7/r7Jpg+HXtrZd2O6dX+z3uJOm57d7vGYdkOrgvtNJbe859FKuI34t/igVoZeXivjtWuGKzOvPnxr/fuy0paJ3NtshVzmYoLa1Fx6dlmBZHZLZN+TrjcYD8WPLKlJ8y4tBSle6e42JB7d6C5aBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKD//Z","JPEG",150,20,40,40);const V=[["INVOICE No.",`${N.id}`],["Invoice Date",new Date().toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})],["Customer Ref no.",N.customer_ref_no||"-"],["Order Date",N.created_at||"-"],["Equipment",N.equipment||"-"]];qe(A,{body:V,theme:"grid",styles:{fontSize:10},margin:{left:130},startY:54,tableWidth:65,columnStyles:{0:{cellWidth:30},1:{cellWidth:35}},didParseCell:function(K){K.row.index===0&&(K.cell.styles.fontStyle="bold")}});const R=14,z=54,yt=90,De=30;A.setDrawColor(0),A.rect(R,z,yt,De),A.setFontSize(12),A.setFont("helvetica","bold"),A.text("Invoice To:",R+2,z+6),A.setFontSize(10),A.setFont("helvetica","normal"),A.text(E.cust_name||"N/A",R+2,z+12),A.text(`Phone: ${E.cust_contact_no||""} Fax: ${E.cust_ap_fax||""}`,R+2,z+18),A.text(`Email: ${E.cust_email||""}`,R+2,z+24);let se={},ge={};try{se=typeof N.origin_location=="string"?JSON.parse(N.origin_location)[0]:(ke=N.origin_location)==null?void 0:ke[0],ge=typeof N.destination_location=="string"?JSON.parse(N.destination_location)[0]:(_e=N.destination_location)==null?void 0:_e[0]}catch{}const Fe=z+De+20,vt=[[se.equipment,se.name||"",se.date||"-",ge.pickup_po||"",ge.date||"-",`$ ${N.final_price||"0.00"}`]];qe(A,{head:[["Item","Shipper","Pick-up Date","Consignee","Delivery Date","Amount CAD"]],body:vt,startY:Fe,styles:{fontSize:10}});const $=A.lastAutoTable.finalY||Fe+30;A.setFontSize(10),A.setFont("helvetica","normal"),A.setTextColor(0,0,0),A.text("Terms: -",14,$+10),A.text("Due Date: -",14,$+16),A.text("Thank you for your business",14,$+24);const fe=120,Ee=N.final_price||"0.00";A.setFont("helvetica","bold"),A.setTextColor(0,0,0),A.text(`Sub Total (CAD) = $ ${Ee}`,fe,$+10),A.text("Tax Exempt",fe,$+16),A.text(`Total Amount (CAD) = $ ${Ee}`,fe,$+24),A.setFont("helvetica","normal");const jt=["Terms & Conditions","Invoice is payable to - Magma Logistics inc.","Mailing Address #34073 RPO Clover Square","Surrey ,BC.V3S 8C4","GST#719716607","Overdue Invoices will be charged 2% monthly interest."];let Be=$+56;jt.forEach(K=>{A.text(K,14,Be),Be+=6}),A.save(`Invoice_${N.id}.pdf`)},ft=D=>{c===D?u(!h):(d(D),u(!1))},Pe=t.filter(D=>Object.values(D).some(N=>N==null?void 0:N.toString().toLowerCase().includes(l.toLowerCase()))),me=Pe.sort((D,N)=>{let E=D[c]??"",A=N[c]??"";return typeof E=="string"&&typeof A=="string"?h?A.localeCompare(E):E.localeCompare(A):typeof E=="number"&&typeof A=="number"?h?A-E:E-A:0}).slice((m-1)*Y,m*Y),xt=Math.ceil(Pe.length/Y);return{fetchOrders:J,orders:t,loading:n,searchQuery:l,setSearchQuery:i,sortBy:c,sortDesc:h,selectedIds:T,setSelectedIds:I,paginatedData:me,totalPages:xt,currentPage:m,setCurrentPage:g,isEditModalOpen:j,isAddModalOpen:w,isDispatchModalOpen:x,isViewModalOpen:P,selectedOrder:p,openEditModal:ue,closeEditModal:pe,openViewModal:B,closeViewModal:U,setEditModalOpen:v,setAddModalOpen:b,setDispatchModalOpen:S,setViewModalOpen:F,toggleSelectAll:k,toggleSelect:M,deleteSelected:L,duplicateOrder:pt,generatePdf:mt,generateInvoice:gt,handleSort:ft,updateOrder:q,handlePageChange:he}},Cs=()=>{const{fetchOrders:t,orders:r,loading:s,searchQuery:a,setSearchQuery:n,sortBy:o,sortDesc:l,selectedIds:i,paginatedData:c,totalPages:d,currentPage:h,isEditModalOpen:u,isAddModalOpen:m,isDispatchModalOpen:g,isViewModalOpen:p,selectedOrder:y,openEditModal:j,openViewModal:v,setEditModalOpen:w,setAddModalOpen:b,setDispatchModalOpen:x,setViewModalOpen:S,toggleSelectAll:P,toggleSelect:F,deleteSelected:T,duplicateOrder:I,generatePdf:Y,generateInvoice:we,handleSort:J,updateOrder:ce,handlePageChange:de}=Ss(),{fetchDispatches:he}=wt(),ue=B=>B.key==="checkbox"||B.key==="actions"?B.label:e.jsxs("div",{className:"sortable-header",onClick:()=>J(B.key),children:[B.label,e.jsx("span",{className:"sort-icon",children:o===B.key?l?"":"":""})]}),pe=[{key:"checkbox",label:e.jsx("input",{type:"checkbox",checked:i.length===c.length&&c.length>0,onChange:P}),render:B=>e.jsx("input",{type:"checkbox",checked:i.includes(B.id),onChange:()=>F(B.id)})},{key:"customer",label:"Customer",render:B=>B.customer||e.jsx("span",{children:"-"})},{key:"customer_ref_no",label:"Ref No",render:B=>B.customer_ref_no||e.jsx("span",{children:"-"})},{key:"customer_po_no",label:"PO No",render:B=>B.customer_po_no||e.jsx("span",{children:"-"})},{key:"equipment",label:"Equipment",render:B=>B.equipment||e.jsx("span",{children:"-"})},{key:"pickup_date",label:"Pickup Date/Time",render:B=>{var U,q;try{const k=typeof B.origin_location=="string"?JSON.parse(B.origin_location):B.origin_location,M=((U=k==null?void 0:k[0])==null?void 0:U.date)||null,L=((q=k==null?void 0:k[0])==null?void 0:q.time)||null;return M&&L?e.jsxs("div",{className:"pickup-date-time",children:[e.jsx(Re,{})," ",M," ",e.jsx(He,{})," ",L]}):e.jsx("span",{children:"-"})}catch(k){return console.error("Error parsing pickup location data:",k),e.jsx("span",{children:"-"})}}},{key:"delivery_date",label:"Delivery Date/Time",render:B=>{var U,q;try{const k=typeof B.destination_location=="string"?JSON.parse(B.destination_location):B.destination_location,M=((U=k==null?void 0:k[0])==null?void 0:U.date)||null,L=((q=k==null?void 0:k[0])==null?void 0:q.time)||null;return M&&L?e.jsxs("div",{className:"delivery-date-time",children:[e.jsx(Re,{})," ",M," ",e.jsx(He,{})," ",L]}):e.jsx("span",{children:"-"})}catch(k){return console.error("Error parsing delivery location data:",k),e.jsx("span",{children:"-"})}}},{key:"actions",label:"",render:B=>e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>v(B),className:"btn-view",children:e.jsx(Dt,{})}),e.jsx("button",{onClick:()=>j(B),className:"btn-edit",children:e.jsx(bt,{})}),e.jsx("button",{onClick:()=>I(B.id),className:"btn-duplicate",children:e.jsx(kt,{})})]})}];return e.jsxs("div",{children:[e.jsxs("div",{className:"header-container",children:[e.jsx("div",{className:"header-container-left",children:e.jsx("h1",{className:"page-heading",children:"Orders"})}),e.jsxs("div",{className:"search-container",children:[e.jsxs("div",{className:"search-input-wrapper",children:[e.jsx(Ft,{className:"search-icon"}),e.jsx("input",{className:"search-bar",value:a,onChange:B=>n(B.target.value)})]}),e.jsxs("button",{onClick:()=>b(!0),className:"add-button",children:[e.jsx(H,{})," New"]})]})]}),i.length>0&&e.jsxs("div",{className:"selection-banner",children:[e.jsxs("span",{children:[i.length," item",i.length>1?"s":""," selected"]}),e.jsxs("button",{onClick:()=>b(!0),className:"dispatch-button",disabled:i.length!==1,children:[e.jsx(Ot,{}),"Dispatch"]}),e.jsxs("button",{onClick:Y,className:"pdf-button",disabled:i.length!==1,children:[e.jsx(Pt,{}),"PDF"]}),e.jsxs("button",{onClick:we,className:"invoice-button",disabled:i.length!==1,children:[e.jsx(Rt,{}),"Invoice"]}),e.jsxs("button",{className:"text-delete-btn",onClick:T,children:[e.jsx(ee,{})," Delete"]})]}),s?e.jsx("div",{children:"Loading..."}):r.length===0?e.jsx("div",{className:"no-record",children:"No records found"}):e.jsx(St,{data:c,headers:pe.map(B=>({...B,label:ue(B)})),handleSort:J,sortBy:o,sortDesc:l}),e.jsx(Ct,{currentPage:h,totalPages:d,onPageChange:de}),e.jsx(ae,{isOpen:u,onClose:()=>w(!1),title:"Edit Order",children:y&&e.jsx(ar,{order:y,onClose:()=>w(!1),onUpdate:ce})}),e.jsx(ae,{isOpen:m,onClose:()=>b(!1),title:"Add Order",children:e.jsx(jr,{onClose:()=>b(!1),onSuccess:t})}),e.jsx(ae,{isOpen:g,onClose:()=>x(!1),title:"Add Dispatch",children:e.jsx(Dr,{onClose:()=>x(!1),onSuccess:he})}),e.jsx(ae,{isOpen:p,onClose:()=>S(!1),title:"Order Details",children:y&&e.jsx(Or,{order:y,onClose:()=>S(!1)})})]})},Rs=()=>e.jsx("div",{children:e.jsx(Cs,{})});export{Rs as default};
