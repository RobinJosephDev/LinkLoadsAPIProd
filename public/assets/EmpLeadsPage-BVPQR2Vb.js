import{r as y,j as e,b as S,S as _}from"./index-DLyAIf-h.js";import{R as F,a as P,b as V,T as O,M as A}from"./Modal-DtI_D4zj.js";import{z as c,P as Z}from"./Pagination-DfY4bufF.js";import b from"./purify.es-Ci5xwkH_.js";import{u as Y}from"./useGoogleAutocomplete-BW9foyuU.js";import{u as H,d as C}from"./useEditLead-CNrrBZ3n.js";import{L as Q}from"./LeadFollowupTable-BIyVsTKC.js";/* empty css             */import{u as G}from"./useLeadTable-CTHme1Cb.js";import{R as E}from"./CalendarOutlined-CkRf31Np.js";import{o as W,R as J}from"./EyeOutlined-CQEGpqEu.js";import{R as K}from"./ClockCircleOutlined-BS9qm0fM.js";const X=c.object({name:c.string().max(200,"Name must be at most 200 characters").regex(/^[a-zA-Z\s.,'-]+$/,"Only letters, spaces, apostrophes, periods,commas and hyphens allowed").optional(),phone:c.string().max(30,"Phone cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional(),email:c.string().max(255,"Email must be at most 255 characters").email("Invalid email format").optional()}),ee=({contacts:s,index:p,handleContactChange:l,handleRemoveContact:u,onAddContact:m})=>{const h=s[p]??{},[o,d]=y.useState({}),x=y.useCallback((t,r)=>{const n=b.sanitize(r);let j="";const g={...h,[t]:n},f=X.safeParse(g);if(!f.success){const v=f.error.errors.find(N=>N.path[0]===t);j=v?v.message:""}d(v=>({...v,[t]:j})),l(p,g)},[h,l,p]),a=[{label:"Name",key:"name",type:"text",placeholder:"Enter name"},{label:"Phone",key:"phone",type:"tel",placeholder:"Enter phone"},{label:"Email",key:"email",type:"email",placeholder:"Enter email"}];return e.jsxs("fieldset",{className:"form-section",style:{display:"flex",alignItems:"center",gap:"10px"},children:[a.map(({label:t,key:r,type:n,placeholder:j})=>e.jsxs("div",{className:"form-group",style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{htmlFor:`${r}-${p}`,children:t}),e.jsx("input",{id:`${r}-${p}`,type:n,name:r,value:h[r]||"",onChange:g=>x(r,g.target.value),placeholder:j}),o[r]&&e.jsx("span",{className:"error",style:{color:"red"},children:o[r]})]},r)),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0px"},children:[e.jsx("button",{type:"button",onClick:m,className:"add-button",children:e.jsx(F,{})}),e.jsx("button",{type:"button",onClick:()=>u(p),className:"delete-button",children:e.jsx(P,{})})]})]})},se=c.object({lead_no:c.string().max(200,"Legal No must be at most 200 characters long").regex(/^[a-zA-Z0-9\s.,'-]+$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),lead_date:c.string().optional(),customer_name:c.string().max(200,"Customer Name must be at most 200 characters long").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),phone:c.string().max(30,"Phone cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional(),email:c.string().max(255,"Email cannot exceed 255 characters").email("Invalid email format").optional(),website:c.string().max(255,"Website must be at most 255 characters long").url("Invalid website URL").optional(),lead_type:c.enum(["AB","BC","BDS","CA","DPD MAGMA","MB","ON","Super Leads","TBAB","USA"],{errorMap:()=>({message:"Invalid lead type"})}),lead_status:c.enum(["Prospect","Lanes discussed","Prod/Equip noted","E-mail sent","Portal registration","Quotations","Fob/Have broker","VM/No answer","Diff Dept.","No reply","Not Int.","Asset based"],{errorMap:()=>({message:"Invalid lead status"})})}),ae=({formLead:s,setFormLead:p})=>{const[l,u]=y.useState({}),m=(o,d)=>{const x=b.sanitize(d);let a="";const t={...s,[o]:x},r=se.safeParse(t);if(!r.success){const n=r.error.errors.find(j=>j.path[0]===o);a=n?n.message:""}u(n=>({...n,[o]:a})),p(t)},h=[{label:"Lead#",key:"lead_no",type:"text",placeholder:"Enter lead#",required:!0},{label:"Lead Date",key:"lead_date",type:"date",placeholder:"Enter lead date",required:!0},{label:"Customer Name",key:"customer_name",placeholder:"Enter customer name"},{label:"Phone",key:"phone",type:"text",placeholder:"Enter phone number"},{label:"Email",key:"email",type:"text",placeholder:"Enter email"},{label:"Website",key:"website",type:"text",placeholder:"Enter website URL"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Lead Details"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[h.map(({label:o,key:d,type:x,placeholder:a,required:t})=>e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:d,children:[o," ",t&&e.jsx("span",{style:{color:"red"},children:"*"})]})," ",e.jsx("input",{type:x,id:d,placeholder:a,value:s[d]||"",onChange:r=>m(d,r.target.value)}),l[d]&&e.jsx("span",{className:"error",style:{color:"red"},children:l[d]})]},d)),e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[e.jsxs("label",{htmlFor:"lead_type",children:["Lead Type ",e.jsx("span",{style:{color:"red"},children:"*"})]})," ",e.jsxs("select",{id:"lead_type",value:s.lead_type||"",onChange:o=>p(d=>({...d,lead_type:o.target.value})),children:[e.jsx("option",{value:"",children:"Select Lead Type"}),e.jsx("option",{value:"AB",children:"AB"}),e.jsx("option",{value:"BC",children:"BC"}),e.jsx("option",{value:"BDS",children:"BDS"}),e.jsx("option",{value:"CA",children:"CA"}),e.jsx("option",{value:"DPD MAGMA",children:"DPD MAGMA"}),e.jsx("option",{value:"MB",children:"MB"}),e.jsx("option",{value:"ON",children:"ON"}),e.jsx("option",{value:"Super Leads",children:"Super Leads"}),e.jsx("option",{value:"TBAB",children:"TBAB"}),e.jsx("option",{value:"USA",children:"USA"})]}),l.lead_type&&e.jsx("span",{className:"error",style:{color:"red"},children:l.lead_type})]}),e.jsxs("div",{className:"form-group",style:{flex:"1 1 45%"},children:[e.jsxs("label",{htmlFor:"lead_status",children:["Lead Status ",e.jsx("span",{style:{color:"red"},children:"*"})]})," ",e.jsxs("select",{id:"lead_status",value:s.lead_status||"",onChange:o=>p(d=>({...d,lead_status:o.target.value})),children:[e.jsx("option",{value:"",children:"Select Lead Status"}),e.jsx("option",{value:"Prospect",children:"Prospect"}),e.jsx("option",{value:"Lanes discussed",children:"Lanes discussed"}),e.jsx("option",{value:"Prod/Equip noted",children:"Prod/Equip noted"}),e.jsx("option",{value:"E-mail sent",children:"E-mail sent"}),e.jsx("option",{value:"Portal registration",children:"Portal registration"}),e.jsx("option",{value:"Quotations",children:"Quotations"}),e.jsx("option",{value:"Fob/Have broker",children:"Fob/Have broker"}),e.jsx("option",{value:"VM/No answer",children:"VM/No answer"}),e.jsx("option",{value:"Diff Dept.",children:"Diff Dept."}),e.jsx("option",{value:"No reply",children:"No reply"}),e.jsx("option",{value:"Not Int.",children:"Not Int."}),e.jsx("option",{value:"Asset based",children:"Asset based"})]}),l.lead_status&&e.jsx("span",{className:"error",style:{color:"red"},children:l.lead_status})]})]})]})},te=c.object({address:c.string().max(255,"Address is too long").regex(/^[a-zA-Z0-9\s,.'-]*$/,"Invalid street format").optional(),city:c.string().max(200,"City name is too long").regex(/^[a-zA-Z\s.'-]*$/,"Invalid city format").optional(),state:c.string().max(200,"Invalid state").regex(/^[a-zA-Z\s.'-]*$/,"Invalid state format").optional(),country:c.string().max(100,"Invalid country").regex(/^[a-zA-Z\s.'-]*$/,"Invalid country format").optional(),postal_code:c.string().max(20,"Postal code cannot exceed 20 characters").regex(/^[a-zA-Z0-9-\s ]*$/,"Invalid postal code").optional(),unit_no:c.string().max(30,"Phone cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional()}),le=({formLead:s,setFormLead:p})=>{const[l,u]=y.useState({}),h=Y(x=>{const a=t=>{var r,n;return((n=(r=x.address_components)==null?void 0:r.find(j=>j.types.includes(t)))==null?void 0:n.long_name)||""};p(t=>({...t,address:`${a("street_number")} ${a("route")}`.trim(),city:a("locality"),state:a("administrative_area_level_1"),country:a("country"),postal_code:a("postal_code")}))}),o=(x,a)=>{const t=b.sanitize(a);let r="";const n={...s,[x]:t},j=te.safeParse(n);if(!j.success){const g=j.error.errors.find(f=>f.path[0]===x);r=g?g.message:""}u(g=>({...g,[x]:r})),p(n)},d=[{label:"Address",key:"address",placeholder:"Enter street address"},{label:"City",key:"city",placeholder:"Enter city name"},{label:"State",key:"state",placeholder:"Enter state"},{label:"Country",key:"country",placeholder:"Enter country"},{label:"Postal Code",key:"postal_code",placeholder:"Enter postal code"},{label:"Unit No.",key:"unit_no",placeholder:"Enter unit number"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Address Details"}),e.jsx("hr",{}),e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:d.map(({label:x,key:a,placeholder:t})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:a,children:x}),e.jsx("input",{type:"text",id:a,placeholder:t,value:s[a]||"",onChange:r=>o(a,r.target.value),ref:a==="address"?h:void 0}),l[a]&&e.jsx("span",{className:"error",style:{color:"red"},children:l[a]})]},a))})]})},re=c.object({follow_up_date:c.string().optional(),contact_person:c.string().max(200,"Contact name must be at most 200 characters long").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),lead_type:c.enum(["AB","BC","BDS","CA","DPD MAGMA","MB","ON","Super Leads","TBAB","USA"],{errorMap:()=>({message:"Invalid lead type"})}),equipment_type:c.enum(["Van","Reefer","Flatbed","Triaxle","Maxi","Btrain","Roll tite"],{errorMap:()=>({message:"Invalid equipment type"})}),assigned_to:c.string().min(1,"Assigned To is required").max(200,"Assigned To must be at most 200 characters long").regex(/^[a-zA-Z\s'-]+$/,"Only letters, spaces, apostrophes, and hyphens allowed"),notes:c.string().max(500,"Notes must be at most 200 characters long").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional()}),oe=({formLead:s,setFormLead:p})=>{const[l,u]=y.useState({}),m="https://linkloadsapiprod.onrender.com/api",[h,o]=y.useState([]);y.useEffect(()=>{(async()=>{var t,r;try{const n=localStorage.getItem("token");if(!n)throw new Error("No token found. Please log in.");const g=(await S.get(`${m}/user`,{headers:{Authorization:`Bearer ${n}`}})).data.filter(f=>f.role==="employee");o(g)}catch(n){console.error("Error fetching users:",n),_.fire({icon:"error",title:((t=n.response)==null?void 0:t.status)===401?"Unauthorized":"Error",text:((r=n.response)==null?void 0:r.status)===401?"You are not authorized to view this data. Please log in again.":"An error occurred while fetching users. Please try again."})}})()},[m]);const d=(a,t)=>{const r=b.sanitize(t);let n="";const j={...s,[a]:r},g=re.safeParse(j);if(!g.success){const f=g.error.errors.find(v=>v.path[0]===a);n=f?f.message:""}u(f=>({...f,[a]:n})),p(j)},x=[{label:"Next Follow-Up Date",key:"follow_up_date",type:"date",placeholder:"Enter follow-up date"},{label:"Contact Person",key:"contact_person",type:"text",placeholder:"Enter contact person"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Additional Information"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[x.map(({label:a,key:t,type:r,placeholder:n})=>e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:t,children:a}),e.jsx("input",{type:r,id:t,placeholder:n,value:s[t]||"",onChange:j=>d(t,j.target.value)}),l[t]&&e.jsx("span",{className:"error",style:{color:"red"},children:l[t]})]},t)),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"equipmentType",children:"Equipment Type"}),e.jsxs("select",{id:"equipmentType",value:s.equipment_type||"",onChange:a=>p(t=>({...t,equipment_type:a.target.value})),children:[e.jsx("option",{value:"",children:"Select Equipment Type"}),e.jsx("option",{value:"Van",children:"Van"}),e.jsx("option",{value:"Reefer",children:"Reefer"}),e.jsx("option",{value:"Flatbed",children:"Flatbed"}),e.jsx("option",{value:"Triaxle",children:"Triaxle"}),e.jsx("option",{value:"Maxi",children:"Maxi"}),e.jsx("option",{value:"Btrain",children:"Btrain"}),e.jsx("option",{value:"Roll tite",children:"Roll tite"})]}),l.equipment_type&&e.jsx("span",{className:"error",style:{color:"red"},children:l.equipment_type})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"assignedTo",children:"Assigned To"}),e.jsxs("select",{id:"assignedTo",value:s.assigned_to,onChange:a=>d("assigned_to",a.target.value),children:[e.jsx("option",{value:"",children:"Select Employee"}),h.map(a=>e.jsx("option",{value:a.name,children:a.name},a.name))]}),l.assigned_to&&e.jsx("span",{className:"error",style:{color:"red"},children:l.assigned_to})]})]}),e.jsx("div",{className:"form-row",style:{display:"flex"},children:e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"notes",children:"Notes"}),e.jsx("textarea",{id:"notes",placeholder:"Enter notes",value:s.notes||"",onChange:a=>d("notes",a.target.value),style:{width:"100%",minHeight:"100px"}}),l.notes&&e.jsx("span",{className:"error",style:{color:"red"},children:l.notes})]})})]})},ne=({lead:s,onClose:p,onUpdate:l})=>{const{formLead:u,setFormLead:m,updateLead:h,handleAddContact:o,handleRemoveContact:d,handleContactChange:x}=H(s,p,l);return e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:a=>{a.preventDefault(),h()},className:"form-main",children:[e.jsx(ae,{formLead:u,setFormLead:m}),e.jsx(le,{formLead:u,setFormLead:m}),e.jsx(oe,{formLead:u,setFormLead:m}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Contacts"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",children:[u.contacts.map((a,t)=>e.jsx(ee,{contacts:u.contacts,index:t,onAddContact:o,handleContactChange:x,handleRemoveContact:d},t)),e.jsx("button",{type:"button",onClick:o,className:"add-button",children:e.jsx(F,{})})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn-submit",children:"Save"}),e.jsx("button",{type:"button",className:"btn-cancel",onClick:p,children:"Cancel"})]})]})})},ie=({formLead:s})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Lead Details"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"leadNo",children:"Lead No"}),e.jsx("div",{children:s.lead_no||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"leadDate",children:"Lead Date"}),e.jsx("div",{children:s.lead_date||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"customerName",children:"Customer Name"}),e.jsx("div",{children:s.customer_name||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"phone",children:"Phone"}),e.jsx("div",{children:s.phone||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("div",{children:s.email||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"website",children:"Website"}),e.jsx("div",{children:s.website||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"leadType",children:"Lead Type"}),e.jsx("div",{children:s.lead_type||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"leadStatus",children:"Lead Status"}),e.jsx("div",{children:s.lead_status||"N/A"})]})]})]}),de=({formLead:s})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Address Details"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"address",children:"Address"}),e.jsx("div",{children:s.address||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"unitNo",children:"Unit No"}),e.jsx("div",{children:s.unit_no||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"city",children:"City"}),e.jsx("div",{children:s.city||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"state",children:"State"}),e.jsx("div",{children:s.state||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"country",children:"Country"}),e.jsx("div",{children:s.country||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"postalCode",children:"Postal Code"}),e.jsx("div",{children:s.postal_code||"N/A"})]})]})]}),ce=({formLead:s})=>{const p="https://linkloadsapiprod.onrender.com/api",[l,u]=y.useState([]);return y.useEffect(()=>{(async()=>{var h;try{const o=localStorage.getItem("token");if(!o)throw new Error("No token found. Please log in.");const x=(await S.get(`${p}/users`,{headers:{Authorization:`Bearer ${o}`}})).data.filter(a=>a.role==="employee");u(x)}catch(o){console.error("Error fetching users:",o),((h=o.response)==null?void 0:h.status)===401?_.fire({icon:"error",title:"Unauthorized",text:"You are not authorized to view this data. Please log in again."}):_.fire({icon:"error",title:"Error",text:"An error occurred while fetching users. Please try again."})}})()},[]),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Additional Information"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"follow_up_date",children:"Next Follow-Up Date"}),e.jsx("div",{children:s.follow_up_date||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"equipmentType",children:"Equipment Type"}),e.jsx("div",{children:s.equipment_type||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"assignedTo",children:"Assigned To"}),e.jsx("div",{children:s.assigned_to||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"contactPerson",children:"Contact Person"}),e.jsx("div",{children:s.contact_person||"N/A"})]})]}),e.jsx("div",{className:"form-row",style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:"notes",children:"Notes"}),e.jsx("div",{children:s.notes||"N/A"})]})})]})},pe=({contact:s,index:p,onRemove:l})=>e.jsxs("div",{className:"contact-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name"}),e.jsx("div",{children:s.name||"N/A"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone"}),e.jsx("div",{children:s.phone||"N/A"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email"}),e.jsx("div",{children:s.email||"N/A"})]})]}),me=({lead:s,onClose:p})=>{const[l,u]=y.useState({id:0,lead_no:"",lead_date:"",customer_name:"",phone:"",email:"",website:"",address:"",unit_no:"",city:"",state:"",country:"",postal_code:"",equipment_type:"",lead_type:"",lead_status:"",contact_person:"",notes:"",follow_up_date:"",assigned_to:"",contacts:[]});return y.useEffect(()=>{if(s){let m=[];if(Array.isArray(s.contacts))m=s.contacts;else if(typeof s.contacts=="string")try{m=JSON.parse(s.contacts)||[]}catch{m=[]}u({...s,contacts:m.length>0?m:[]})}},[s]),e.jsx("div",{className:"form-container",children:e.jsxs("form",{className:"form-main",children:[e.jsx(ie,{formLead:l}),e.jsx(de,{formLead:l}),e.jsx(ce,{formLead:l}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Contacts"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:l.contacts&&l.contacts.map((m,h)=>e.jsx(pe,{contact:m,index:h},h))})]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"button",className:"btn-cancel",onClick:p,style:{padding:"9px 15px"},children:"Cancel"})})]})})},he=()=>{const{leads:s,loading:p,searchQuery:l,setSearchQuery:u,sortBy:m,sortDesc:h,selectedIds:o,paginatedData:d,totalPages:x,currentPage:a,isEditModalOpen:t,isViewModalOpen:r,selectedLead:n,openEditModal:j,closeEditModal:g,openViewModal:f,closeViewModal:v,isFollowupModalOpen:N,isFollowupLoading:D,followupData:I,openFollowupModal:M,closeFollowupModal:k,toggleSelectAll:T,toggleSelect:$,deleteSelected:B,handleSort:w,updateLead:L,handlePageChange:R}=G(),z=i=>i.key==="checkbox"||i.key==="actions"?i.label:e.jsxs("div",{className:"sortable-header",onClick:()=>w(i.key),children:[i.label,e.jsx("span",{className:"sort-icon",children:m===i.key?h?"▼":"▲":"▼"})]}),q=i=>({Prospect:"badge-prospect","Lanes discussed":"badge-lanes","Prod/Equip noted":"badge-product","E-mail sent":"badge-email","Portal registration":"badge-carrier",Quotations:"badge-quotation","Fob/Have broker":"badge-broker","VM/No answer":"badge-voicemail","Diff Dept.":"badge-different","No reply":"badge-callback","Not Int.":"badge-not-interested","Asset based":"badge-asset"})[i]||"badge-default",U=[{key:"checkbox",label:e.jsx("input",{type:"checkbox",onChange:T,checked:o.length===d.length&&d.length>0}),render:i=>e.jsx("input",{type:"checkbox",checked:o.includes(i.id),onChange:()=>$(i.id)})},{key:"lead_no",label:"Lead#"},{key:"customer_name",label:"Name"},{key:"lead_date",label:"Date",render:i=>e.jsxs("div",{className:"date-picker-container-normal",children:[e.jsx(E,{style:{marginRight:5}}),i.lead_date?C(i.lead_date).format("DD MMM, YYYY"):"-"]})},{key:"city",label:"City"},{key:"lead_type",label:"Type"},{key:"assigned_to",label:"Assigned To",render:i=>e.jsx("span",{children:i.assigned_to||"Unassigned"})},{key:"lead_status",label:"Status",render:i=>e.jsx("span",{className:`badge ${q(i.lead_status)}`,children:i.lead_status})},{key:"follow_up_date",label:"Follow Up",render:i=>e.jsxs("div",{className:"date-picker-container",children:[e.jsx(E,{style:{marginRight:5}}),i.follow_up_date?C(i.follow_up_date).format("DD MMM, YYYY"):"-"]})},{key:"actions",label:"Actions",render:i=>e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>f(i),className:"btn-view",children:e.jsx(W,{})}),e.jsx("button",{onClick:()=>j(i),className:"btn-edit",children:e.jsx(V,{})})]})}];return e.jsxs("div",{children:[e.jsxs("div",{className:"header-container",children:[e.jsx("div",{className:"header-container-left",children:e.jsx("div",{className:"header-actions",children:e.jsx("h1",{className:"page-heading",children:"Leads"})})}),e.jsxs("div",{className:"search-container",children:[e.jsxs("div",{className:"search-input-wrapper",children:[e.jsx(J,{className:"search-icon"}),e.jsx("input",{className:"search-bar",value:l,onChange:i=>u(i.target.value)})]}),e.jsxs("button",{onClick:M,className:"view-fu-button",children:[e.jsx(K,{})," Follow-ups"]})]})]}),o.length>0&&e.jsxs("div",{className:"selection-banner",children:[e.jsxs("span",{children:[o.length," item",o.length>1?"s":""," selected"]}),e.jsxs("button",{className:"text-delete-btn",onClick:B,children:[e.jsx(P,{}),"  Delete"]})]}),p?e.jsx("div",{children:"Loading..."}):s.length===0?e.jsx("div",{children:"No records found"}):e.jsx(O,{data:d,headers:U.map(i=>({...i,label:z(i)})),handleSort:w,sortBy:m,sortDesc:h}),e.jsx(Z,{currentPage:a,totalPages:x,onPageChange:R}),e.jsx(A,{isOpen:t,onClose:g,title:"Edit Lead",children:n&&e.jsx(ne,{lead:n,onClose:g,onUpdate:L})}),e.jsx(A,{isOpen:N,onClose:k,title:"Follow-ups",children:e.jsx(Q,{followupData:I,loading:D})}),e.jsx(A,{isOpen:r,onClose:v,title:"Lead Details",children:n&&e.jsx(me,{lead:n,onClose:v})})]})},Ee=()=>e.jsx("div",{children:e.jsx(he,{})});export{Ee as default};
