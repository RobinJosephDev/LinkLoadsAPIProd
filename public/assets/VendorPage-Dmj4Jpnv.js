import{r as _,j as e,S as A,b as k}from"./index-Cbvw9UaN.js";import{R,a as re,b as ne,T as le,M as Z}from"./Modal-BWB1UxEb.js";/* empty css             */import v from"./purify.es-Ci5xwkH_.js";import{z as n,P as oe}from"./Pagination-CcGIvBBs.js";import{u as P}from"./useGoogleAutocomplete-Bc_iNf8a.js";import{o as ie,R as ce}from"./EyeOutlined-CITt_E_k.js";import{R as de}from"./MailOutlined-CCvmWzeJ.js";const me=n.object({legal_name:n.string().min(1,"Legal Name is required").max(100,"Legal Name must be at most 100 characters long").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed"),remit_name:n.string().min(1,"Remit Name is required").max(200,"Remit Name must be at most 200 characters long").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed"),vendor_type:n.string().min(1,"Vendor Type is required").max(50,"Vendor Type must be at most 50 characters long").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed"),service:n.string().min(1,"Service is required").max(100,"Service must be at most 100 characters long").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed"),scac:n.string().max(10,"SCAC must be at most 10 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),docket_number:n.string().max(50,"Docket# must be at most 50 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),vendor_code:n.string().max(20,"Vendor Code must be at most 20 characters long").regex(/^[a-zA-Z\s0-9-]*$/,"Only letters, numbers, spaces and dashes allowed").optional(),gst_hst_number:n.string().max(20,"CA Bond# must be at most 50 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),qst_number:n.string().max(20,"CA Bond# must be at most 50 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),ca_bond_number:n.string().max(50,"CA Bond# must be at most 50 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),website:n.string().max(255,"Website must be at most 255 characters long").url("Invalid website URL").optional()}),pe=({vendor:a,setVendor:x})=>{const[c,p]=_.useState({}),h=(d,s)=>{const o=v.sanitize(s);let r="";const i={...a,[d]:o},t=me.safeParse(i);if(!t.success){const l=t.error.errors.find(m=>m.path[0]===d);r=l?l.message:""}p(l=>({...l,[d]:r})),x(i)},g=[{label:"Legal Name",key:"legal_name",placeholder:"Enter legal name",required:!0},{label:"Remit Name",key:"remit_name",placeholder:"Enter remit name",required:!0},{label:"Vendor Type",key:"vendor_type",placeholder:"Enter vendor type",required:!0},{label:"Service",key:"service",placeholder:"Enter service type",required:!0},{label:"SCAC",key:"scac",placeholder:"Enter SCAC code"},{label:"Docket#",key:"docket_number",placeholder:"Enter docket number"},{label:"Vendor Code",key:"vendor_code",placeholder:"Enter vendor code"},{label:"GST/HST#",key:"gst_hst_number",placeholder:"Enter GST/HST number"},{label:"QST#",key:"qst_number",placeholder:"Enter QST number"},{label:"CA Bond#",key:"ca_bond_number",placeholder:"Enter CA bond number"},{label:"Website",key:"website",placeholder:"Enter website URL"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Vendor Details"}),e.jsx("hr",{}),e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:g.map(({label:d,key:s,placeholder:o,required:r})=>e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:s,children:[d," ",r&&e.jsx("span",{style:{color:"red"},children:"*"})]})," ",e.jsx("input",{type:"text",id:s,placeholder:o,value:a[s]||"",onChange:i=>h(s,i.target.value)}),c[s]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[s]})]},s))})]})},xe=n.object({primary_address:n.string().max(255,"Address is too long").regex(/^[a-zA-Z0-9\s,.'-]*$/,"Invalid street format").optional(),primary_city:n.string().max(200,"City name is too long").regex(/^[a-zA-Z\s.'-]*$/,"Invalid city format").optional(),primary_state:n.string().max(200,"Invalid state").regex(/^[a-zA-Z\s.'-]*$/,"Invalid state format").optional(),primary_country:n.string().max(100,"Invalid country").regex(/^[a-zA-Z\s.'-]*$/,"Invalid country format").optional(),primary_postal:n.string().max(20,"Postal code cannot exceed 20 characters").regex(/^[a-zA-Z0-9-\s ]*$/,"Invalid postal code").optional(),primary_email:n.string().max(255,"Email cannot exceed 255 characters").email("Invalid email format").optional(),primary_phone:n.string().max(30,"Phone cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional(),primary_fax:n.string().max(30,"Fax cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid fax format").optional()}),he=({vendor:a,setVendor:x})=>{const[c,p]=_.useState({}),g=P(o=>{const r=i=>{var t,l;return((l=(t=o.address_components)==null?void 0:t.find(m=>m.types.includes(i)))==null?void 0:l.long_name)||""};x(i=>({...i,primary_address:`${r("street_number")} ${r("route")}`.trim(),primary_city:r("locality"),primary_state:r("administrative_area_level_1"),primary_country:r("country"),primary_postal:r("postal_code")}))}),d=(o,r)=>{const i=v.sanitize(r);let t="";const l={...a,[o]:i},m=xe.safeParse(l);if(!m.success){const u=m.error.errors.find(f=>f.path[0]===o);t=u?u.message:""}p(u=>({...u,[o]:t})),x(l)},s=[{label:"Street",key:"primary_address",placeholder:"Enter street address"},{label:"City",key:"primary_city",placeholder:"Enter city name"},{label:"State",key:"primary_state",placeholder:"Enter state"},{label:"Country",key:"primary_country",placeholder:"Enter country"},{label:"Postal Code",key:"primary_postal",placeholder:"Enter postal code"},{label:"Phone",key:"primary_phone",placeholder:"Enter phone number"},{label:"Fax",key:"primary_fax",placeholder:"Enter fax number"},{label:"Email",key:"primary_email",placeholder:"Enter email address"}];return e.jsxs("fieldset",{children:[e.jsx("legend",{children:"Primary Address"}),e.jsx("hr",{}),e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:s.map(({label:o,key:r,placeholder:i})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:r,children:o}),e.jsx("input",{type:"text",id:r,placeholder:i,value:a[r]||"",onChange:t=>d(r,t.target.value),ref:r==="primary_address"?g:void 0}),c[r]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[r]})]},r))})]})},H=n.object({mailing_address:n.string().max(255,"Address is too long").regex(/^[a-zA-Z0-9\s,.'-]*$/,"Invalid street format").optional(),mailing_city:n.string().max(200,"City name is too long").regex(/^[a-zA-Z\s.'-]*$/,"Invalid city format").optional(),mailing_state:n.string().max(200,"Invalid state").regex(/^[a-zA-Z\s.'-]*$/,"Invalid state format").optional(),mailing_country:n.string().max(100,"Invalid country").regex(/^[a-zA-Z\s.'-]*$/,"Invalid country format").optional(),mailing_postal:n.string().max(20,"Postal code cannot exceed 20 characters").regex(/^[a-zA-Z0-9-\s ]*$/,"Invalid postal code").optional(),mailing_phone:n.string().max(30,"Phone cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional(),mailing_fax:n.string().max(30,"Fax cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid fax format").optional(),mailing_email:n.string().max(255,"Email cannot exceed 255 characters").email("Invalid email format").optional()}),ge=({vendor:a,setVendor:x})=>{const[c,p]=_.useState({}),[h,g]=_.useState(!1);_.useEffect(()=>{if(!h&&s.current){const t=new window.google.maps.places.Autocomplete(s.current,{types:["address"]});t.addListener("place_changed",()=>{const l=t.getPlace();d(l)})}},[h]);const d=t=>{const l=m=>{var u,f;return((f=(u=t.address_components)==null?void 0:u.find(j=>j.types.includes(m)))==null?void 0:f.long_name)||""};x(m=>({...m,mailing_address:`${l("street_number")} ${l("route")}`.trim(),mailing_city:l("locality"),mailing_state:l("administrative_area_level_1"),mailing_country:l("country"),mailing_postal:l("postal_code")}))},s=P(d),o=(t,l)=>{const m=v.sanitize(l);let u="";const f={...a,[t]:m};if(t in H.shape){const j=H.safeParse(f);if(!j.success){const E=j.error.errors.find(C=>C.path[0]===t);u=E?E.message:""}}p(j=>({...j,[t]:u})),x(f)},r=async t=>{const l=t.target.checked;g(l),x(m=>({...m,mailing_address:l?m.primary_address:"",mailing_city:l?m.primary_city:"",mailing_state:l?m.primary_state:"",mailing_country:l?m.primary_country:"",mailing_postal:l?m.primary_postal:"",mailing_phone:l?m.primary_phone:"",mailing_fax:l?m.primary_fax:"",mailing_email:l?m.primary_email:""}));try{const m=await fetch("/api/update-vendor",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({sameAsPrimary:l})});if(!m.ok)throw new Error("Failed to update the database");const u=await m.json();console.log("Update successful:",u)}catch(m){console.error("Error updating the database:",m)}},i=[{label:"Street",key:"mailing_address",placeholder:"Enter street address"},{label:"City",key:"mailing_city",placeholder:"Enter city name"},{label:"State",key:"mailing_state",placeholder:"Enter state"},{label:"Country",key:"mailing_country",placeholder:"Enter country"},{label:"Postal Code",key:"mailing_postal",placeholder:"Enter postal code"},{label:"Phone",key:"mailing_phone",placeholder:"Enter phone number"},{label:"Fax",key:"mailing_fax",placeholder:"Enter fax number"},{label:"Email",key:"mailing_email",placeholder:"Enter email address"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Mailing Address"}),e.jsx("hr",{}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",id:"sameAsPrimary",checked:h,onChange:r,style:{transform:"scale(1.1)",cursor:"pointer",margin:0}}),e.jsx("label",{htmlFor:"sameAsPrimary",style:{margin:0,whiteSpace:"nowrap"},children:"Same as Primary Address"})]}),!h&&e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:i.map(({label:t,key:l})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:l,children:t}),e.jsx("input",{type:"text",id:l,placeholder:`Enter ${l.replace("mailing_","")}`,value:a[l]||"",onChange:m=>o(l,m.target.value),ref:l==="mailing_address"?s:void 0}),c[l]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[l]})]},l))})]})},ue=a=>v.sanitize(a),J=a=>new Date(a),_e=a=>!a||!/^\d{4}-\d{2}-\d{2}$/.test(a)?"":a,ye=n.object({cargo_company:n.string().max(150,"Cargo company must be at most 150 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),cargo_policy_start:n.string().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"Start date must be in YYYY-MM-DD format"}).optional(),cargo_policy_end:n.string().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"End date must be in YYYY-MM-DD format"}).optional(),cargo_ins_amt:n.string().regex(/^\d+(\.\d{1,2})?$/,"Coverage amount must be a valid number").optional()}).refine(a=>!a.cargo_policy_start||!a.cargo_policy_end||J(a.cargo_policy_start)<=J(a.cargo_policy_end),{message:"End date must be after or equal to start date",path:["cargo_policy_end"]}),be=({vendor:a,setVendor:x})=>{const[c,p]=_.useState({}),h=(d,s)=>{const o=typeof s=="string"?ue(s):s;let r=o;(d==="cargo_policy_start"||d==="cargo_policy_end")&&typeof o=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(o)&&(r=o);const i={...a,[d]:r},t=ye.safeParse(i);if(t.success)p({});else{const l={};t.error.errors.forEach(m=>{l[m.path[0]]=m.message}),p(l)}x(i)},g=[{label:"Cargo Insurance Provider",key:"cargo_company",placeholder:"Enter provider name"},{label:"Start Date",key:"cargo_policy_start",type:"date"},{label:"End Date",key:"cargo_policy_end",type:"date"},{label:"Coverage Amount",key:"cargo_ins_amt",type:"text",placeholder:"Enter coverage amount"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Cargo Insurance Details"}),e.jsx("hr",{}),e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:g.map(({label:d,key:s,type:o,placeholder:r})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:s,children:d}),e.jsx("input",{id:s,type:o||"text",value:o==="date"?_e(a[s]):a[s]||"",onChange:i=>h(s,o==="number"?Number(i.target.value):i.target.value),placeholder:r}),c[s]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[s]})]},s))})]})},fe=a=>v.sanitize(a),G=a=>new Date(a),je=a=>!a||!/^\d{4}-\d{2}-\d{2}$/.test(a)?"":a,ve=n.object({liab_company:n.string().max(150,"Liability Insurance Provider must be at most 150 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),liab_policy_start:n.string().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"Start date must be in YYYY-MM-DD format"}).optional(),liab_policy_end:n.string().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"End date must be in YYYY-MM-DD format"}).optional(),liab_ins_amt:n.string().regex(/^\d+(\.\d{1,2})?$/,"Coverage amount must be a valid number").optional()}).refine(a=>!a.liab_policy_start||!a.liab_policy_end||G(a.liab_policy_start)<=G(a.liab_policy_end),{message:"End date must be after or equal to start date",path:["liab_policy_end"]}),Ne=({vendor:a,setVendor:x})=>{const[c,p]=_.useState({}),h=(d,s)=>{const o=typeof s=="string"?fe(s):s;let r=o;(d==="liab_policy_start"||d==="liab_policy_end")&&typeof o=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(o)&&(r=o);const i={...a,[d]:r},t=ve.safeParse(i);if(t.success)p({});else{const l={};t.error.errors.forEach(m=>{l[m.path[0]]=m.message}),p(l)}x(i)},g=[{label:"Liability Insurance Provider",key:"liab_company",placeholder:"Enter provider name"},{label:"Start Date",key:"liab_policy_start",type:"date"},{label:"End Date",key:"liab_policy_end",type:"date"},{label:"Coverage Amount",key:"liab_ins_amt",type:"text",placeholder:"Enter coverage amount"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Liability Insurance Details"}),e.jsx("hr",{}),e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:g.map(({label:d,key:s,type:o,placeholder:r})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:s,children:d}),e.jsx("input",{id:s,type:o||"text",value:o==="date"?je(a[s]):a[s]||"",onChange:i=>h(s,o==="number"?Number(i.target.value):i.target.value),placeholder:r}),c[s]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[s]})]},s))})]})},Ae=n.object({us_tax_id:n.string().regex(/^\d{9}$/,"US Tax ID must be exactly 9 digits").optional(),payroll_no:n.string().max(50,"Payroll# must be at most 50 characters").regex(/^\d*$/,"Payroll# must be numeric").optional(),wcb_no:n.string().max(50,"WCB# must be at most 50 characters").regex(/^\d*$/,"WCB# must be numeric").optional()}),Ce=({vendor:a,setVendor:x})=>{const[c,p]=_.useState({}),h=(d,s)=>{const o=v.sanitize(s).replace(/\D/g,""),r={...a,[d]:o},i=Ae.safeParse(r);p(i.success?{}:Object.fromEntries(i.error.errors.map(t=>[t.path[0],t.message]))),x(r)},g=[{label:"US Tax ID",name:"us_tax_id",placeholder:"Enter 9-digit Tax ID (e.g., 123456789)"},{label:"Payroll#",name:"payroll_no",placeholder:"Enter payroll number"},{label:"WCB#",name:"wcb_no",placeholder:"Enter WCB number"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Additional Details"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:g.map(({label:d,name:s,placeholder:o})=>e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:s,children:d}),e.jsx("input",{type:"text",id:s,value:typeof a[s]=="string"||typeof a[s]=="number"?a[s].toString():"",onChange:r=>h(s,r.target.value),placeholder:o}),c[s]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[s]})]},s))})]})},Ee=n.object({ar_name:n.string().max(200,"Name must be at most 200 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),ar_email:n.string().max(255,"Name must be at most 255 characters").email("Invalid email format").optional(),ar_contact_no:n.string().max(30,"Contact no cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional(),ar_ext:n.string().max(20,"Extension cannot exceed 20 characters").regex(/^[0-9-+()\s]*$/,"Invalid extension format").optional()}),Se=({vendor:a,setVendor:x})=>{const[c,p]=_.useState({}),h=(d,s)=>{const o=v.sanitize(s),r={...a,[d]:o},i=Ee.safeParse(r);p(i.success?{}:Object.fromEntries(i.error.errors.map(t=>[t.path[0],t.message]))),x(r)},g=[{label:"Name",name:"ar_name",placeholder:"Enter full name (e.g., John Doe)"},{label:"Email",name:"ar_email",placeholder:"Enter email (e.g., john.doe@example.com)"},{label:"Contact No",name:"ar_contact_no",placeholder:"Enter contact number (at least 7 digits)"},{label:"Ext",name:"ar_ext",placeholder:"Enter extension (optional)"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Account Receivable Details"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:g.map(({label:d,name:s,placeholder:o})=>e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:s,children:d}),e.jsx("input",{type:"text",id:s,value:a[s]||"",onChange:r=>h(s,r.target.value),placeholder:o}),c[s]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[s]})]},s))})]})},$e=n.object({ap_name:n.string().max(200,"Name must be at most 200 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),ap_email:n.string().max(255,"Name must be at most 255 characters").email("Invalid email format").optional(),ap_contact_no:n.string().max(30,"Contact no cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional(),ap_ext:n.string().max(20,"Extension cannot exceed 20 characters").regex(/^[0-9-+()\s]*$/,"Invalid extension format").optional()}),we=({vendor:a,setVendor:x})=>{const[c,p]=_.useState({}),h=(d,s)=>{const o=v.sanitize(s),r={...a,[d]:o},i=$e.safeParse(r);p(i.success?{}:Object.fromEntries(i.error.errors.map(t=>[t.path[0],t.message]))),x(r)},g=[{label:"Name",name:"ap_name",placeholder:"Enter full name (e.g., John Doe)"},{label:"Email",name:"ap_email",placeholder:"Enter email (e.g., john.doe@example.com)"},{label:"Contact No",name:"ap_contact_no",placeholder:"Enter contact number (at least 7 digits)"},{label:"Ext",name:"ap_ext",placeholder:"Enter extension (optional)"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Account Payable Details"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:g.map(({label:d,name:s,placeholder:o})=>e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:s,children:d}),e.jsx("input",{type:"text",id:s,value:a[s]||"",onChange:r=>h(s,r.target.value),placeholder:o}),c[s]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[s]})]},s))})]})},ke=n.object({bank_name:n.string().max(150,"Bank name must be at most 150 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),bank_phone:n.string().max(30,"Phone no cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional(),bank_email:n.string().max(255,"Email must be at most 255 characters").email("Invalid email format").optional(),bank_us_acc_no:n.string().length(9,"US Account No must be exactly 9 digits").regex(/^\d{9}$/,"Only numbers allowed").optional(),bank_cdn_acc_no:n.string().max(12,"Canadian Account No must be at most 12 digits").regex(/^\d*$/,"Only numbers allowed").optional(),bank_address:n.string().max(100,"Address too long").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional()}),Pe=({vendor:a,setVendor:x})=>{const[c,p]=_.useState({}),g=P(o=>{const r=t=>{var l,m;return((m=(l=o.address_components)==null?void 0:l.find(u=>u.types.includes(t)))==null?void 0:m.long_name)||""},i=o.formatted_address||`${r("street_number")} ${r("route")}, ${r("locality")}, ${r("administrative_area_level_1")} ${r("postal_code")}, ${r("country")}`;x(t=>({...t,bank_address:i}))}),d=(o,r)=>{const i=v.sanitize(r);let t="";const l={...a,[o]:i},m=ke.safeParse(l);if(!m.success){const u=m.error.errors.find(f=>f.path[0]===o);t=u?u.message:""}p(u=>({...u,[o]:t})),x(l)},s=[{label:"Bank Name",key:"bank_name",placeholder:"Enter bank name (e.g., Chase Bank)"},{label:"Phone",key:"bank_phone",placeholder:"Enter phone number (at least 7 digits)"},{label:"Email",key:"bank_email",placeholder:"Enter bank email (e.g., support@bank.com)"},{label:"US Account No",key:"bank_us_acc_no",placeholder:"Enter 9-digit US account number"},{label:"Canadian Account No",key:"bank_cdn_acc_no",placeholder:"Enter 7-12 digit Canadian account number"},{label:"Address",key:"bank_address",placeholder:"Enter bank address"}];return e.jsxs("fieldset",{children:[e.jsx("legend",{children:"Bank Details"}),e.jsx("hr",{}),e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:s.map(({label:o,key:r,placeholder:i})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:r,children:o}),e.jsx("input",{id:r,type:"text",value:a[r]||"",onChange:t=>d(r,t.target.value),ref:r==="bank_address"?g:void 0,placeholder:i}),c[r]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[r]})]},r))})]})},Ie=n.object({name:n.string().max(200,"Name must be at most 200 characters").regex(/^[a-zA-Z\s.,'-]+$/,"Only letters, spaces, apostrophes, periods,commas and hyphens allowed").optional(),phone:n.string().max(30,"Phone cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional(),email:n.string().max(255,"Email must be at most 255 characters").email("Invalid email format").optional(),fax:n.string().max(30,"Fax cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid fax format").optional(),designation:n.string().max(100,"Designation must be at most 100 characters").regex(/^[a-zA-Z\s.,'-]+$/,"Only letters, spaces, apostrophes, periods,commas and hyphens allowed").optional()}),te=({contacts:a,index:x,handleContactChange:c,handleRemoveContact:p,onAddContact:h})=>{const g=a[x]??{},[d,s]=_.useState({}),o=_.useCallback((i,t)=>{const l=v.sanitize(t);let m="";const u={...g,[i]:l},f=Ie.safeParse(u);if(!f.success){const j=f.error.errors.find(E=>E.path[0]===i);m=j?j.message:""}s(j=>({...j,[i]:m})),c(x,u)},[g,c,x]),r=[{label:"Name",key:"name",type:"text",placeholder:"Enter name"},{label:"Phone",key:"phone",type:"tel",placeholder:"Enter phone"},{label:"Email",key:"email",type:"email",placeholder:"Enter email"},{label:"Fax",key:"fax",type:"text",placeholder:"Enter fax"},{label:"Designation",key:"designation",type:"text",placeholder:"Enter designation"}];return e.jsxs("fieldset",{className:"form-section",style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"10px",gridTemplateColumns:"repeat(5, 1fr)",flex:1},children:r.map(({label:i,key:t,type:l,placeholder:m})=>e.jsxs("div",{className:"form-group",style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{htmlFor:`${t}-${x}`,children:i}),e.jsx("input",{id:`${t}-${x}`,type:l,name:t,value:g[t]||"",onChange:u=>o(t,u.target.value),placeholder:m}),d[t]&&e.jsx("span",{className:"error",style:{color:"red"},children:d[t]})]},t))}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0px"},children:[e.jsx("button",{type:"button",onClick:h,className:"add-button",children:e.jsx(R,{})}),e.jsx("button",{type:"button",onClick:()=>p(x),className:"delete-button",children:e.jsx(re,{})})]})]})},ze=n.object({type:n.enum(["Vendor","Factoring Company"],{errorMap:()=>({message:"Invalid vendor type"})})}),De=({vendor:a,setVendor:x})=>{const[c,p]=_.useState({}),h=["Vendor","Factoring Company"],g=d=>{const s=v.sanitize(d.trim()),o={...a,type:s},r=ze.safeParse(o);p(r.success?{}:{type:r.error.errors[0].message}),r.success&&x(o)};return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Vendor Type"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:e.jsxs("div",{className:"form-group",style:{width:"24%"},children:[e.jsxs("label",{htmlFor:"type",children:["Vendor Type ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{id:"type",value:a.type||"",onChange:d=>g(d.target.value),style:{width:"100%",height:"40px",padding:"6px",fontSize:"12px",border:"1px solid #ccc",borderRadius:"4px"},children:[e.jsx("option",{value:"",disabled:!0,children:"Select Vendor Type"}),h.map(d=>e.jsx("option",{value:d,children:d},d))]}),c.type&&e.jsx("span",{className:"error",style:{color:"red"},children:c.type})]})})]})},K="https://linkloadsapiprod.onrender.com/api",Ve=(a,x)=>{const[c,p]=_.useState({id:0,type:"",legal_name:"",remit_name:"",vendor_type:"",service:"",primary_address:"",primary_city:"",primary_state:"",primary_country:"",primary_postal:"",primary_email:"",primary_phone:"",primary_fax:"",scac:"",docket_number:"",vendor_code:"",gst_hst_number:"",qst_number:"",ca_bond_number:"",website:"",sameAsPrimary:!1,mailing_address:"",mailing_city:"",mailing_state:"",mailing_country:"",mailing_postal:"",mailing_email:"",mailing_phone:"",mailing_fax:"",us_tax_id:"",payroll_no:"",wcb_no:"",ar_name:"",ar_email:"",ar_contact_no:"",ar_ext:"",ap_name:"",ap_email:"",ap_contact_no:"",ap_ext:"",bank_name:"",bank_phone:"",bank_email:"",bank_us_acc_no:"",bank_cdn_acc_no:"",bank_address:"",cargo_company:"",cargo_policy_start:"",cargo_policy_end:"",cargo_ins_amt:0,liab_company:"",liab_policy_start:"",liab_policy_end:"",liab_ins_amt:0,contacts:[],created_at:"",updated_at:""}),h=()=>!!c.type&&!!c.legal_name&&!!c.remit_name&&!!c.vendor_type&&!!c.service,g=async i=>{if(i.preventDefault(),!h()){A.fire("Validation Error","Please fill in all required fields.","error");return}try{const t=localStorage.getItem("token");if(!t){A.fire("Error","No token found","error");return}const l={Authorization:`Bearer ${t}`},m=c.id?await k.put(`${K}/vendor/${c.id}`,c,{headers:l}):await k.post(`${K}/vendor`,c,{headers:l});A.fire(c.id?"Success!":"Saved!","Vendor added successfully.","success"),d(),x()}catch(t){console.error("Error saving/updating vendor:",t.response?t.response.data:t.message),A.fire("Error","An error occurred while processing the vendor.","error")}},d=()=>{p({id:0,type:"",legal_name:"",remit_name:"",vendor_type:"",service:"",primary_address:"",primary_city:"",primary_state:"",primary_country:"",primary_postal:"",primary_email:"",primary_phone:"",primary_fax:"",scac:"",docket_number:"",vendor_code:"",gst_hst_number:"",qst_number:"",ca_bond_number:"",website:"",sameAsPrimary:!1,mailing_address:"",mailing_city:"",mailing_state:"",mailing_country:"",mailing_postal:"",mailing_email:"",mailing_phone:"",mailing_fax:"",us_tax_id:"",payroll_no:"",wcb_no:"",ar_name:"",ar_email:"",ar_contact_no:"",ar_ext:"",ap_name:"",ap_email:"",ap_contact_no:"",ap_ext:"",bank_name:"",bank_phone:"",bank_email:"",bank_us_acc_no:"",bank_cdn_acc_no:"",bank_address:"",cargo_company:"",cargo_policy_start:"",cargo_policy_end:"",cargo_ins_amt:0,liab_company:"",liab_policy_start:"",liab_policy_end:"",liab_ins_amt:0,contacts:[],created_at:"",updated_at:""})};return{vendor:c,setVendor:p,handleAddContact:()=>{p(i=>({...i,contacts:[...i.contacts,{name:"",phone:"",email:"",fax:"",designation:""}]}))},handleRemoveContact:i=>{p(t=>({...t,contacts:t.contacts.filter((l,m)=>m!==i)}))},handleContactChange:(i,t)=>{const l=c.contacts.map((m,u)=>u===i?t:m);p(m=>({...m,contacts:l}))},handleSubmit:g,clearVendorForm:d}},Te=({onClose:a,onSuccess:x})=>{const{vendor:c,setVendor:p,handleAddContact:h,handleRemoveContact:g,handleContactChange:d,handleSubmit:s}=Ve(a,x);return e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:s,className:"form-main",children:[e.jsx(De,{vendor:c,setVendor:p}),e.jsx(pe,{vendor:c,setVendor:p}),e.jsx(he,{vendor:c,setVendor:p}),e.jsx(ge,{vendor:c,setVendor:p}),e.jsx(Ce,{vendor:c,setVendor:p}),e.jsx(Se,{vendor:c,setVendor:p}),e.jsx(we,{vendor:c,setVendor:p}),e.jsx(Pe,{vendor:c,setVendor:p}),e.jsx(be,{vendor:c,setVendor:p}),e.jsx(Ne,{vendor:c,setVendor:p}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Contacts"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:c.contacts.map((o,r)=>e.jsx(te,{contacts:c.contacts,index:r,onAddContact:h,handleContactChange:d,handleRemoveContact:g},r))}),c.contacts.length===0&&e.jsx("button",{type:"button",onClick:h,className:"add-button",children:e.jsx(R,{})})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn-submit",children:"Create Vendor"}),e.jsx("button",{type:"button",className:"btn-cancel",onClick:a,children:"Cancel"})]})]})})},Oe=n.object({type:n.enum(["Vendor","Factoring Company"],{errorMap:()=>({message:"Invalid vendor type"})})}),Fe=({formVendor:a,setFormVendor:x})=>{const[c,p]=_.useState({}),h=["Vendor","Factoring Company"],g=d=>{const s=v.sanitize(d),o={...a,type:s},r=Oe.safeParse(o);p(r.success?{}:{type:r.error.errors[0].message}),r.success&&x(o)};return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Vendor Type"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:e.jsxs("div",{className:"form-group",style:{width:"24%"},children:[e.jsxs("label",{htmlFor:"type",children:["Vendor Type ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{id:"type",value:a.type||"",onChange:d=>g(d.target.value),style:{width:"100%",height:"40px",padding:"6px",fontSize:"12px",border:"1px solid #ccc",borderRadius:"4px"},children:[e.jsx("option",{value:"",disabled:!0,children:"Select Vendor Type"}),h.map(d=>e.jsx("option",{value:d,children:d},d))]}),c.type&&e.jsx("span",{className:"error",style:{color:"red"},children:c.type})]})})]})},Ze=n.object({legal_name:n.string().min(1,"Legal Name is required").max(100,"Legal Name must be at most 100 characters long").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed"),remit_name:n.string().min(1,"Remit Name is required").max(200,"Remit Name must be at most 200 characters long").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed"),vendor_type:n.string().min(1,"Vendor Type is required").max(50,"Vendor Type must be at most 50 characters long").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed"),service:n.string().min(1,"Service is required").max(100,"Service must be at most 100 characters long").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed"),scac:n.string().max(10,"SCAC must be at most 10 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),docket_number:n.string().max(50,"Docket# must be at most 50 characters long").regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),vendor_code:n.string().max(20,"Vendor Code must be at most 20 characters long").regex(/^[a-zA-Z\s0-9-]*$/,"Only letters, numbers, spaces and dashes allowed").optional(),gst_hst_number:n.string().regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),qst_number:n.string().regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),ca_bond_number:n.string().regex(/^[a-zA-Z0-9-]*$/,"Only letters, numbers, and dashes allowed").optional(),website:n.string().max(255,"Website must be at most 255 characters long").url("Invalid website URL").optional()}),Me=({formVendor:a,setFormVendor:x})=>{const[c,p]=_.useState({}),h=(d,s)=>{const o=v.sanitize(s);let r="";const i={...a,[d]:o},t=Ze.safeParse(i);if(!t.success){const l=t.error.errors.find(m=>m.path[0]===d);r=l?l.message:""}p(l=>({...l,[d]:r})),x(i)},g=[{label:"Legal Name",key:"legal_name",required:!0},{label:"Remit Name",key:"remit_name",required:!0},{label:"Vendor Type",key:"vendor_type",required:!0},{label:"Service",key:"service",required:!0},{label:"SCAC",key:"scac"},{label:"Docket#",key:"docket_number"},{label:"Vendor Code",key:"vendor_code"},{label:"GST/HST#",key:"gst_hst_number"},{label:"QST#",key:"qst_number"},{label:"CA Bond#",key:"ca_bond_number"},{label:"Website",key:"website"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Vendor Details"}),e.jsx("hr",{}),e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:g.map(({label:d,key:s,required:o})=>e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:s,children:[d," ",o&&e.jsx("span",{style:{color:"red"},children:"*"})]})," ",e.jsx("input",{type:"text",id:s,value:a[s]||"",onChange:r=>h(s,r.target.value)}),c[s]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[s]})]},s))})]})},Re=n.object({primary_address:n.string().max(255,"Address is too long").regex(/^[a-zA-Z0-9\s,.'-]*$/,"Invalid street format").optional(),primary_city:n.string().max(200,"City name is too long").regex(/^[a-zA-Z\s.'-]*$/,"Invalid city format").optional(),primary_state:n.string().max(200,"Invalid state").regex(/^[a-zA-Z\s.'-]*$/,"Invalid state format").optional(),primary_country:n.string().max(100,"Invalid country").regex(/^[a-zA-Z\s.'-]*$/,"Invalid country format").optional(),primary_postal:n.string().max(20,"Postal code cannot exceed 20 characters").regex(/^[a-zA-Z0-9-\s ]*$/,"Invalid postal code").optional(),primary_email:n.string().max(255,"Email cannot exceed 255 characters").email("Invalid email format").optional(),primary_phone:n.string().max(30,"Phone cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional(),primary_fax:n.string().max(30,"Fax cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid fax format").optional()});function Be({formVendor:a,setFormVendor:x}){const[c,p]=_.useState({}),g=P(o=>{const r=i=>{var t,l;return((l=(t=o.address_components)==null?void 0:t.find(m=>m.types.includes(i)))==null?void 0:l.long_name)||""};x(i=>({...i,primary_address:`${r("street_number")} ${r("route")}`.trim(),primary_city:r("locality"),primary_state:r("administrative_area_level_1"),primary_country:r("country"),primary_postal:r("postal_code")}))}),d=(o,r)=>{const i=v.sanitize(r);let t="";const l={...a,[o]:i},m=Re.safeParse(l);if(!m.success){const u=m.error.errors.find(f=>f.path[0]===o);t=u?u.message:""}p(u=>({...u,[o]:t})),x(l)},s=[{label:"Street",key:"primary_address"},{label:"City",key:"primary_city"},{label:"State",key:"primary_state"},{label:"Country",key:"primary_country"},{label:"Postal Code",key:"primary_postal"},{label:"Phone",key:"primary_phone"},{label:"Fax",key:"primary_fax"},{label:"Email",key:"primary_email"}];return e.jsxs("fieldset",{children:[e.jsx("legend",{children:"Primary Address"}),e.jsx("hr",{}),e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:s.map(({label:o,key:r})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:r,children:o}),e.jsx("input",{type:"text",id:r,value:a[r]||"",onChange:i=>d(r,i.target.value),ref:r==="primary_address"?g:void 0}),c[r]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[r]})]},r))})]})}const X=n.object({mailing_address:n.string().max(255,"Address is too long").regex(/^[a-zA-Z0-9\s,.'-]*$/,"Invalid street format").optional(),mailing_city:n.string().max(200,"City name is too long").regex(/^[a-zA-Z\s.'-]*$/,"Invalid city format").optional(),mailing_state:n.string().max(200,"Invalid state").regex(/^[a-zA-Z\s.'-]*$/,"Invalid state format").optional(),mailing_country:n.string().max(100,"Invalid country").regex(/^[a-zA-Z\s.'-]*$/,"Invalid country format").optional(),mailing_postal:n.string().max(20,"Postal code cannot exceed 20 characters").regex(/^[a-zA-Z0-9-\s]*$/,"Invalid postal code").optional(),mailing_phone:n.string().max(30,"Phone cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional(),mailing_fax:n.string().max(30,"Fax cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid fax format").optional(),mailing_email:n.string().max(255,"Email cannot exceed 255 characters").email("Invalid email format").optional()}),Ye=({formVendor:a,setFormVendor:x})=>{const[c,p]=_.useState({}),[h,g]=_.useState(!1);_.useEffect(()=>{if(!h&&s.current){const t=new window.google.maps.places.Autocomplete(s.current,{types:["address"]});t.addListener("place_changed",()=>{const l=t.getPlace();d(l)})}},[h]);const d=t=>{if(!t.address_components)return;const l=m=>{var u,f;return((f=(u=t.address_components)==null?void 0:u.find(j=>j.types.includes(m)))==null?void 0:f.long_name)||""};x(m=>({...m,mailing_address:`${l("street_number")} ${l("route")}`.trim(),mailing_city:l("locality"),mailing_state:l("administrative_area_level_1"),mailing_country:l("country"),mailing_postal:l("postal_code")}))},s=P(d),o=(t,l)=>{const m=v.sanitize(l);let u="";const f={...a,[t]:m};if(t in X.shape){const j=X.safeParse(f);if(!j.success){const E=j.error.errors.find(C=>C.path[0]===t);u=E?E.message:""}}p(j=>({...j,[t]:u})),x(f)},r=async t=>{const l=t.target.checked;g(l),x(m=>({...m,mailing_address:l?m.primary_address:"",mailing_city:l?m.primary_city:"",mailing_state:l?m.primary_state:"",mailing_country:l?m.primary_country:"",mailing_postal:l?m.primary_postal:"",mailing_phone:l?m.primary_phone:"",mailing_fax:l?m.primary_fax:"",mailing_email:l?m.primary_email:""}));try{const m=await fetch("/api/update-vendor",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({sameAsPrimary:l})});if(!m.ok)throw new Error("Failed to update the database");const u=await m.json();console.log("Update successful:",u)}catch(m){console.error("Error updating the database:",m)}},i=[{label:"Street",key:"mailing_address"},{label:"City",key:"mailing_city"},{label:"State",key:"mailing_state"},{label:"Country",key:"mailing_country"},{label:"Postal Code",key:"mailing_postal"},{label:"Phone",key:"mailing_phone"},{label:"Fax",key:"mailing_fax"},{label:"Email",key:"mailing_email"}];return e.jsxs("fieldset",{children:[e.jsx("legend",{children:"Mailing Address"}),e.jsx("hr",{}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",id:"sameAsPrimary",checked:h,onChange:r,style:{transform:"scale(1.1)",cursor:"pointer",margin:0}}),e.jsx("label",{htmlFor:"sameAsPrimary",style:{margin:0,whiteSpace:"nowrap"},children:"Same as Primary Address"})]}),!h&&e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:i.map(({label:t,key:l})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:l,children:t}),e.jsx("input",{type:"text",id:l,value:a[l]||"",onChange:m=>o(l,m.target.value),ref:l==="mailing_address"?s:void 0}),c[l]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[l]})]},l))})]})},qe=n.object({us_tax_id:n.string().regex(/^\d{9}$/,"US Tax ID must be exactly 9 digits").optional(),payroll_no:n.string().max(50,"Payroll# must be at most 50 characters").regex(/^\d*$/,"Payroll# must be numeric").optional(),wcb_no:n.string().max(50,"WCB# must be at most 50 characters").regex(/^\d*$/,"WCB# must be numeric").optional()}),Le=({formVendor:a,setFormVendor:x})=>{const[c,p]=_.useState({}),h=(d,s)=>{const o=v.sanitize(s).replace(/\D/g,""),r={...a,[d]:o},i=qe.safeParse(r);p(i.success?{}:Object.fromEntries(i.error.errors.map(t=>[t.path[0],t.message]))),x(r)},g=[{label:"US Tax ID",name:"us_tax_id"},{label:"Payroll#",name:"payroll_no"},{label:"WCB#",name:"wcb_no"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Additional Details"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:g.map(({label:d,name:s})=>e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:s,children:d}),e.jsx("input",{type:"text",id:s,value:typeof a[s]=="string"||typeof a[s]=="number"?a[s].toString():"",onChange:o=>h(s,o.target.value)}),c[s]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[s]})]},s))})]})},Ue=n.object({ar_name:n.string().max(200,"Name must be at most 200 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),ar_email:n.string().max(255,"Name must be at most 255 characters").email("Invalid email format").optional(),ar_contact_no:n.string().max(30,"Contact no cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional(),ar_ext:n.string().max(20,"Extension cannot exceed 20 characters").regex(/^[0-9-+()\s]*$/,"Invalid extension format").optional()}),We=({formVendor:a,setFormVendor:x})=>{const[c,p]=_.useState({}),h=(d,s)=>{const o=v.sanitize(s),r={...a,[d]:o},i=Ue.safeParse(r);p(i.success?{}:Object.fromEntries(i.error.errors.map(t=>[t.path[0],t.message]))),x(r)},g=[{label:"Name",name:"ar_name"},{label:"Email",name:"ar_email"},{label:"Contact No",name:"ar_contact_no"},{label:"Ext",name:"ar_ext"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Account Receivable Details"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:g.map(({label:d,name:s})=>e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:s,children:d}),e.jsx("input",{type:"text",id:s,value:a[s]||"",onChange:o=>h(s,o.target.value)}),c[s]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[s]})]},s))})]})},Qe=n.object({ap_name:n.string().max(200,"Name must be at most 200 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),ap_email:n.string().max(255,"Name must be at most 255 characters").email("Invalid email format").optional(),ap_contact_no:n.string().max(30,"Contact no cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional(),ap_ext:n.string().max(20,"Extension cannot exceed 20 characters").regex(/^[0-9-+()\s]*$/,"Invalid extension format").optional()}),He=({formVendor:a,setFormVendor:x})=>{const[c,p]=_.useState({}),h=(d,s)=>{const o=v.sanitize(s),r={...a,[d]:o},i=Qe.safeParse(r);p(i.success?{}:Object.fromEntries(i.error.errors.map(t=>[t.path[0],t.message]))),x(r)},g=[{label:"Name",name:"ap_name"},{label:"Email",name:"ap_email"},{label:"Contact No",name:"ap_contact_no"},{label:"Ext",name:"ap_ext"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Account Payable Details"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:g.map(({label:d,name:s})=>e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{htmlFor:s,children:d}),e.jsx("input",{type:"text",id:s,value:a[s]||"",onChange:o=>h(s,o.target.value)}),c[s]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[s]})]},s))})]})},Je=n.object({bank_name:n.string().max(150,"Bank name must be at most 150 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),bank_phone:n.string().max(30,"Phone no cannot exceed 30 characters").regex(/^[0-9-+()\s]*$/,"Invalid phone format").optional(),bank_email:n.string().max(255,"Email must be at most 255 characters").email("Invalid email format").optional(),bank_us_acc_no:n.string().length(9,"US Account No must be exactly 9 digits").regex(/^\d{9}$/,"Only numbers allowed").optional(),bank_cdn_acc_no:n.string().max(12,"Canadian Account No must be at most 12 digits").regex(/^\d*$/,"Only numbers allowed").optional(),bank_address:n.string().max(100,"Address too long").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional()}),Ge=({formVendor:a,setFormVendor:x})=>{const[c,p]=_.useState({}),g=P(o=>{const r=t=>{var l,m;return((m=(l=o.address_components)==null?void 0:l.find(u=>u.types.includes(t)))==null?void 0:m.long_name)||""},i=o.formatted_address||`${r("street_number")} ${r("route")}, ${r("locality")}, ${r("administrative_area_level_1")} ${r("postal_code")}, ${r("country")}`;x(t=>({...t,bank_address:i}))}),d=(o,r)=>{const i=v.sanitize(r);let t="";const l={...a,[o]:i},m=Je.safeParse(l);if(!m.success){const u=m.error.errors.find(f=>f.path[0]===o);t=u?u.message:""}p(u=>({...u,[o]:t})),x(l)},s=[{label:"Bank Name",key:"bank_name"},{label:"Phone",key:"bank_phone"},{label:"Email",key:"bank_email"},{label:"US Account No",key:"bank_us_acc_no"},{label:"Canadian Account No",key:"bank_cdn_acc_no"},{label:"Address",key:"bank_address"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Bank Details"}),e.jsx("hr",{}),e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:s.map(({label:o,key:r})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:r,children:o}),e.jsx("input",{id:r,type:"text",value:a[r]||"",onChange:i=>d(r,i.target.value),ref:r==="bank_address"?g:void 0}),c[r]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[r]})]},r))})]})},Ke=a=>v.sanitize(a),ee=a=>new Date(a),Xe=a=>!a||!/^\d{4}-\d{2}-\d{2}$/.test(a)?"":a,ea=n.object({cargo_company:n.string().max(150,"Cargo company must be at most 150 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),cargo_policy_start:n.string().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"Start date must be in YYYY-MM-DD format"}).optional(),cargo_policy_end:n.string().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"End date must be in YYYY-MM-DD format"}).optional(),cargo_ins_amt:n.string().regex(/^\d+(\.\d{1,2})?$/,"Coverage amount must be a valid number").optional()}).refine(a=>!a.cargo_policy_start||!a.cargo_policy_end||ee(a.cargo_policy_start)<=ee(a.cargo_policy_end),{message:"End date must be after or equal to start date",path:["cargo_policy_end"]}),aa=({formVendor:a,setFormVendor:x})=>{const[c,p]=_.useState({}),h=(d,s)=>{const o=typeof s=="string"?Ke(s):s;let r=o;(d==="cargo_policy_start"||d==="cargo_policy_end")&&typeof o=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(o)&&(r=o);const i={...a,[d]:r},t=ea.safeParse(i);if(t.success)p({});else{const l={};t.error.errors.forEach(m=>{l[m.path[0]]=m.message}),p(l)}x(i)},g=[{label:"Cargo Insurance Provider",key:"cargo_company"},{label:"Start Date",key:"cargo_policy_start",type:"date"},{label:"End Date",key:"cargo_policy_end",type:"date"},{label:"Coverage Amount",key:"cargo_ins_amt",type:"text"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Cargo Insurance Details"}),e.jsx("hr",{}),e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:g.map(({label:d,key:s,type:o})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:s,children:d}),e.jsx("input",{id:s,type:o||"text",value:o==="date"?Xe(a[s]):a[s]||"",onChange:r=>h(s,o==="number"?Number(r.target.value):r.target.value)}),c[s]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[s]})]},s))})]})},sa=a=>v.sanitize(a),ae=a=>new Date(a),ra=a=>!a||!/^\d{4}-\d{2}-\d{2}$/.test(a)?"":a,ta=n.object({liab_company:n.string().max(150,"Liability Insurance Provider must be at most 150 characters").regex(/^[a-zA-Z0-9\s.,'-]*$/,"Only letters, numbers,spaces, apostrophes, periods, commas, and hyphens allowed").optional(),liab_policy_start:n.string().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"Start date must be in YYYY-MM-DD format"}).optional(),liab_policy_end:n.string().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"End date must be in YYYY-MM-DD format"}).optional(),liab_ins_amt:n.string().regex(/^\d+(\.\d{1,2})?$/,"Coverage amount must be a valid number").optional()}).refine(a=>!a.liab_policy_start||!a.liab_policy_end||ae(a.liab_policy_start)<=ae(a.liab_policy_end),{message:"End date must be after or equal to start date",path:["liab_policy_end"]}),na=({formVendor:a,setFormVendor:x})=>{const[c,p]=_.useState({}),h=(d,s)=>{const o=typeof s=="string"?sa(s):s;let r=o;(d==="liab_policy_start"||d==="liab_policy_end")&&typeof o=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(o)&&(r=o);const i={...a,[d]:r},t=ta.safeParse(i);if(t.success)p({});else{const l={};t.error.errors.forEach(m=>{l[m.path[0]]=m.message}),p(l)}x(i)},g=[{label:"Liability Insurance Provider",key:"liab_company"},{label:"Start Date",key:"liab_policy_start",type:"date"},{label:"End Date",key:"liab_policy_end",type:"date"},{label:"Coverage Amount",key:"liab_ins_amt",type:"text"}];return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Liability Insurance Details"}),e.jsx("hr",{}),e.jsx("div",{className:"form-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:g.map(({label:d,key:s,type:o})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:s,children:d}),e.jsx("input",{id:s,type:o||"text",value:o==="date"?ra(a[s]):a[s]||"",onChange:r=>h(s,o==="number"?Number(r.target.value):r.target.value)}),c[s]&&e.jsx("span",{className:"error",style:{color:"red"},children:c[s]})]},s))})]})},M=a=>{if(!a)return"";const x=typeof a=="string"?new Date(a):a;return isNaN(x.getTime())?"":x.toISOString().split("T")[0]},la="https://linkloadsapiprod.onrender.com/api",oa=(a,x,c)=>{const[p,h]=_.useState({id:0,type:"",legal_name:"",remit_name:"",vendor_type:"",service:"",primary_address:"",primary_city:"",primary_state:"",primary_country:"",primary_postal:"",primary_email:"",primary_phone:"",primary_fax:"",scac:"",docket_number:"",vendor_code:"",gst_hst_number:"",qst_number:"",ca_bond_number:"",website:"",sameAsPrimary:!1,mailing_address:"",mailing_city:"",mailing_state:"",mailing_country:"",mailing_postal:"",mailing_email:"",mailing_phone:"",mailing_fax:"",us_tax_id:"",payroll_no:"",wcb_no:"",ar_name:"",ar_email:"",ar_contact_no:"",ar_ext:"",ap_name:"",ap_email:"",ap_contact_no:"",ap_ext:"",bank_name:"",bank_phone:"",bank_email:"",bank_us_acc_no:"",bank_cdn_acc_no:"",bank_address:"",cargo_company:"",cargo_policy_start:"",cargo_policy_end:"",cargo_ins_amt:0,liab_company:"",liab_policy_start:"",liab_policy_end:"",liab_ins_amt:0,contacts:[],created_at:"",updated_at:""});_.useEffect(()=>{if(a){const i=Array.isArray(a.contacts)?a.contacts:JSON.parse(a.contacts||"[]"),t={...a,contacts:i.length>0?i:[],liab_policy_start:M(a.liab_policy_start),liab_policy_end:M(a.liab_policy_end),cargo_policy_start:M(a.cargo_policy_start),cargo_policy_end:M(a.cargo_policy_end)};h(t)}},[a]);const g=()=>!!p.type&&!!p.legal_name&&!!p.remit_name&&!!p.vendor_type&&!!p.service;return{formVendor:p,setFormVendor:h,updateVendor:async()=>{var i;if(!g()){A.fire("Validation Error","Please fill in all required fields.","error");return}try{const t=localStorage.getItem("token");if(!t){A.fire({icon:"error",title:"Unauthorized",text:"You are not logged in. Please log in again."});return}const l=await k.put(`${la}/vendor/${p.id}`,p,{headers:{Authorization:`Bearer ${t}`}});A.fire({icon:"success",title:"Updated!",text:"Vendor data has been updated successfully."}),c(l.data),x()}catch(t){console.error("Error updating vendor:",t),A.fire({icon:"error",title:"Oops...",text:((i=t.response)==null?void 0:i.status)===401?"Unauthorized. Please log in again.":"Failed to update vendor."})}},handleAddContact:()=>{h(i=>i&&{...i,contacts:[...i.contacts,{name:"",phone:"",email:"",fax:"",designation:""}]})},handleRemoveContact:i=>{h(t=>t&&{...t,contacts:t.contacts.filter((l,m)=>m!==i)})},handleContactChange:(i,t)=>{h(l=>l&&{...l,contacts:l.contacts.map((m,u)=>u===i?t:m)})}}},ia=({vendor:a,onClose:x,onUpdate:c})=>{var r;const{formVendor:p,setFormVendor:h,updateVendor:g,handleAddContact:d,handleRemoveContact:s,handleContactChange:o}=oa(a,x,c);return console.log("Form vendor:",p),e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:i=>{i.preventDefault(),g()},className:"form-main",children:[p&&e.jsxs(e.Fragment,{children:[e.jsx(Fe,{formVendor:p,setFormVendor:h}),e.jsx(Me,{formVendor:p,setFormVendor:h}),e.jsx(Be,{formVendor:p,setFormVendor:h}),e.jsx(Ye,{formVendor:p,setFormVendor:h}),e.jsx(Le,{formVendor:p,setFormVendor:h}),e.jsx(We,{formVendor:p,setFormVendor:h}),e.jsx(He,{formVendor:p,setFormVendor:h}),e.jsx(Ge,{formVendor:p,setFormVendor:h}),e.jsx(aa,{formVendor:p,setFormVendor:h}),e.jsx(na,{formVendor:p,setFormVendor:h}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Contacts"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:(r=p.contacts)==null?void 0:r.map((i,t)=>e.jsx(te,{contacts:p.contacts,index:t,onAddContact:d,handleRemoveContact:s,handleContactChange:o},t))}),p.contacts.length===0&&e.jsx("button",{type:"button",onClick:d,className:"add-button",children:e.jsx(R,{})})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn-submit",children:"Save"}),e.jsx("button",{type:"button",className:"btn-cancel",onClick:x,children:"Cancel"})]})]})})},ca=({formVendor:a})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Vendor Type"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Vendor Type"}),e.jsx("p",{children:a.type||"N/A"})]}),e.jsx("div",{className:"form-group",style:{flex:1},children:e.jsx("input",{type:"hidden"})}),e.jsx("div",{className:"form-group",style:{flex:1},children:e.jsx("input",{type:"hidden"})})]})]}),da=({formVendor:a})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Vendor Details"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Legal Name"}),e.jsx("p",{children:a.legal_name||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Remit Name"}),e.jsx("p",{children:a.remit_name||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Vendor Type"}),e.jsx("p",{children:a.vendor_type||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Service"}),e.jsx("p",{children:a.service||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"SCAC"}),e.jsx("p",{children:a.scac||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Docket#"}),e.jsx("p",{children:a.docket_number||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Vendor Code"}),e.jsx("p",{children:a.vendor_code||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"GST/HST#"}),e.jsx("p",{children:a.gst_hst_number||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"QST#"}),e.jsx("p",{children:a.qst_number||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"CA bond#"}),e.jsx("p",{children:a.ca_bond_number||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Website"}),e.jsx("p",{children:a.website||"N/A"})]})]})]}),ma=({formVendor:a})=>e.jsxs("fieldset",{children:[e.jsx("legend",{children:"Primary Address"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Street"}),e.jsx("p",{children:a.primary_address||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"City"}),e.jsx("p",{children:a.primary_city||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"State"}),e.jsx("p",{children:a.primary_state||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Country"}),e.jsx("p",{children:a.primary_country||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Postal Code"}),e.jsx("p",{children:a.primary_postal||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Email"}),e.jsx("p",{children:a.primary_email||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Phone"}),e.jsx("p",{children:a.primary_phone||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Fax"}),e.jsx("p",{children:a.primary_fax||"N/A"})]}),e.jsx("div",{className:"form-group",style:{flex:1},children:e.jsx("input",{type:"hidden"})})]})]}),pa=({formVendor:a})=>e.jsxs("fieldset",{children:[e.jsx("legend",{children:"Mailing Address"}),e.jsx("hr",{}),!a.sameAsPrimary&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Street"}),e.jsx("p",{children:a.mailing_address||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"City"}),e.jsx("p",{children:a.mailing_city||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"State"}),e.jsx("p",{children:a.mailing_state||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Country"}),e.jsx("p",{children:a.mailing_country||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Postal Code"}),e.jsx("p",{children:a.mailing_postal||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Phone"}),e.jsx("p",{children:a.mailing_phone||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Fax"}),e.jsx("p",{children:a.mailing_fax||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Email"}),e.jsx("p",{children:a.mailing_email||"N/A"})]})]})]})]}),xa=({formVendor:a})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Additional Details"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"US Tax ID"}),e.jsx("p",{children:a.us_tax_id||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Payroll#"}),e.jsx("p",{children:a.payroll_no||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"WCB#"}),e.jsx("p",{children:a.wcb_no||"N/A"})]})]})]}),ha=({formVendor:a})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Account Receivable Details"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Name"}),e.jsx("p",{children:a.ar_name||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Email"}),e.jsx("p",{children:a.ar_email||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Contact No"}),e.jsx("p",{children:a.ar_contact_no||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Ext"}),e.jsx("p",{children:a.ar_ext||"N/A"})]})]})]}),ga=({formVendor:a})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Account Payable Details"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Name"}),e.jsx("p",{children:a.ap_name||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Email"}),e.jsx("p",{children:a.ap_email||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Contact No"}),e.jsx("p",{children:a.ap_contact_no||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Ext"}),e.jsx("p",{children:a.ap_ext||"N/A"})]})]})]}),ua=({formVendor:a})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Bank Details"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Name"}),e.jsx("p",{children:a.bank_name||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Phone"}),e.jsx("p",{children:a.bank_phone||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Email"}),e.jsx("p",{children:a.bank_email||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"US Account No"}),e.jsx("p",{children:a.bank_us_acc_no||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Canadian Account No"}),e.jsx("p",{children:a.bank_cdn_acc_no||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Address"}),e.jsx("p",{children:a.bank_address||"N/A"})]})]})]}),se=a=>{if(!a)return"N/A";const x=new Date(a);return isNaN(x.getTime())?"N/A":x.toISOString().split("T")[0]},_a=({formVendor:a})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Cargo Insurance Details"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Cargo Insurance Provider"}),e.jsx("p",{children:a.cargo_company||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Start Date"}),e.jsx("p",{children:se(a.cargo_policy_start)})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"End Date"}),e.jsx("p",{children:se(a.cargo_policy_end)})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Coverage Amount"}),e.jsx("p",{children:a.cargo_ins_amt||"N/A"})]})]})]}),ya=({formVendor:a})=>{const x=c=>c?new Date(c).toISOString().split("T")[0]:"N/A";return e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Liability Insurance Details"}),e.jsx("hr",{}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Liability Insurance Provider"}),e.jsx("p",{children:a.liab_company||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Start Date"}),e.jsx("p",{children:x(a.liab_policy_start)})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"End Date"}),e.jsx("p",{children:x(a.liab_policy_end)})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Coverage Amount"}),e.jsx("p",{children:a.liab_ins_amt?`$${a.liab_ins_amt}`:"N/A"})]})]})]})},ba=({contact:a,index:x})=>e.jsxs("fieldset",{className:"form-section",children:[e.jsxs("legend",{children:["Contact ",x+1]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Name"}),e.jsx("p",{children:a.name||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Phone"}),e.jsx("p",{children:a.phone||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Email"}),e.jsx("p",{children:a.email||"N/A"})]})]}),e.jsxs("div",{className:"form-row",style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Fax"}),e.jsx("p",{children:a.fax||"N/A"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Designation"}),e.jsx("p",{children:a.designation||"N/A"})]})]})]}),fa=({vendor:a,onClose:x})=>{const[c,p]=_.useState({id:0,type:"",legal_name:"",remit_name:"",vendor_type:"",service:"",primary_address:"",primary_city:"",primary_state:"",primary_country:"",primary_postal:"",primary_email:"",primary_phone:"",primary_fax:"",scac:"",docket_number:"",vendor_code:"",gst_hst_number:"",qst_number:"",ca_bond_number:"",website:"",sameAsPrimary:!1,mailing_address:"",mailing_city:"",mailing_state:"",mailing_country:"",mailing_postal:"",mailing_email:"",mailing_phone:"",mailing_fax:"",us_tax_id:"",payroll_no:"",wcb_no:"",ar_name:"",ar_email:"",ar_contact_no:"",ar_ext:"",ap_name:"",ap_email:"",ap_contact_no:"",ap_ext:"",bank_name:"",bank_phone:"",bank_email:"",bank_us_acc_no:"",bank_cdn_acc_no:"",bank_address:"",cargo_company:"",cargo_policy_start:"",cargo_policy_end:"",cargo_ins_amt:0,liab_company:"",liab_policy_start:"",liab_policy_end:"",liab_ins_amt:0,contacts:[{name:"",phone:"",email:"",fax:"",designation:""}],created_at:"",updated_at:""});return _.useEffect(()=>{if(a){const h=Array.isArray(a.contacts)?a.contacts:JSON.parse(a.contacts||"[]");p({...a,contacts:h.length>0?h:[]})}},[a]),e.jsx("div",{className:"form-container",children:e.jsxs("form",{className:"form-main",children:[e.jsx(ca,{formVendor:c}),e.jsx(da,{formVendor:c}),e.jsx(ma,{formVendor:c}),e.jsx(pa,{formVendor:c}),e.jsx(xa,{formVendor:c}),e.jsx(ha,{formVendor:c}),e.jsx(ga,{formVendor:c}),e.jsx(ua,{formVendor:c}),e.jsx(_a,{formVendor:c}),e.jsx(ya,{formVendor:c}),e.jsxs("fieldset",{className:"form-section",children:[e.jsx("legend",{children:"Contacts"}),e.jsx("hr",{}),e.jsx("div",{className:"form-row",children:Array.isArray(c.contacts)&&c.contacts.map((h,g)=>e.jsx(ba,{contact:h,index:g},g))})]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"button",className:"btn-cancel",onClick:x,style:{padding:"9px 15px"},children:"Cancel"})})]})})},W="https://linkloadsapiprod.onrender.com/api",ja=()=>{const[a,x]=_.useState([]),[c,p]=_.useState(!0),[h,g]=_.useState(""),[d,s]=_.useState("created_at"),[o,r]=_.useState(!0),[i,t]=_.useState(1),[l,m]=_.useState(null),[u,f]=_.useState(!1),[j,E]=_.useState(!1),[C,$]=_.useState([]),[B,D]=_.useState(!1),[Y,V]=_.useState(!1),[w,q]=_.useState(10),[T,L]=_.useState({subject:"",content:""}),I=async()=>{try{const b=localStorage.getItem("token");if(!b)throw new Error("No token found");p(!0);const{data:N}=await k.get(`${W}/vendor`,{headers:{Authorization:`Bearer ${b}`}});x(N)}catch(b){console.error("Error loading vendors:",b),U(b)}finally{p(!1)}};_.useEffect(()=>{I()},[]);const U=b=>{var N;((N=b.response)==null?void 0:N.status)===401&&A.fire({icon:"error",title:"Unauthorized",text:"You need to log in to access this resource."})},O=a.filter(b=>Object.values(b).some(N=>N&&N.toString().toLowerCase().includes(h.toLowerCase()))),z=O.sort((b,N)=>{let S=b[d]||"",F=N[d]||"";return o?F.toString().localeCompare(S.toString()):S.toString().localeCompare(F.toString())}).slice((i-1)*w,i*w),y=Math.ceil(O.length/w);return{fetchVendors:I,vendors:a,loading:c,searchQuery:h,setSearchQuery:g,sortBy:d,sortDesc:o,selectedVendors:C,setSelectedVendors:$,paginatedData:z,totalPages:y,currentPage:i,setCurrentPage:t,isEditModalOpen:u,isAddModalOpen:j,isViewModalOpen:B,isEmailModalOpen:Y,selectedVendor:l,setEditModalOpen:f,setAddModalOpen:E,setViewModalOpen:D,setEmailModalOpen:V,toggleSelectAll:()=>{C.length===z.length?$([]):$(z.map(b=>b.id).filter(b=>b!==void 0))},toggleSelect:b=>{$(N=>N.includes(b)?N.filter(S=>S!==b):[...N,b])},deleteSelected:async()=>{if(C.length===0){A.fire({icon:"warning",title:"No record selected",text:"Please select a record to delete."});return}if((await A.fire({title:"Are you sure?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete selected!",cancelButtonText:"No, cancel!"})).isConfirmed)try{const N=localStorage.getItem("token");if(!N)throw new Error("No token found");await Promise.all(C.map(S=>k.delete(`${W}/vendor/${S}`,{headers:{Authorization:`Bearer ${N}`}}))),x(S=>S.filter(F=>!C.includes(F.id))),$([]),A.fire("Deleted!","The selected vendors have been removed.","success")}catch(N){console.error("Error deleting vendors:",N),A.fire({icon:"error",title:"Error!",text:"Failed to delete selected vendors."})}},openEditModal:b=>{m(b),f(!0)},emailData:T,setEmailData:L,sendEmails:async()=>{if(C.length===0){A.fire({icon:"warning",title:"No vendors selected",text:"Please select a vendor to send an email to."});return}try{const b=localStorage.getItem("token");if(!b)throw new Error("No token found");await k.post(`${W}/email`,{ids:C,...T,module:"vendors"},{headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}}),A.fire("Success!","Email sent.","success"),V(!1),$([])}catch(b){console.error("Error sending email:",b),A.fire("Error!","Failed to send email.","error")}},openViewModal:b=>{m(b),D(!0)},handleSort:b=>{d===b?r(!o):(s(b),r(!1))},updateVendor:b=>{x(N=>N.map(S=>S.id===b.id?{...S,...b}:S))},handlePageChange:b=>{t(b)}}},va=()=>{const{fetchVendors:a,vendors:x,loading:c,searchQuery:p,setSearchQuery:h,sortBy:g,sortDesc:d,selectedVendors:s,paginatedData:o,totalPages:r,currentPage:i,isEditModalOpen:t,isAddModalOpen:l,isViewModalOpen:m,isEmailModalOpen:u,selectedVendor:f,setEditModalOpen:j,setAddModalOpen:E,setViewModalOpen:C,setEmailModalOpen:$,toggleSelectAll:B,toggleSelect:D,deleteSelected:Y,openEditModal:V,emailData:w,setEmailData:q,sendEmails:T,openViewModal:L,handleSort:I,updateVendor:U,handlePageChange:O}=ja(),Q=y=>y.key==="checkbox"||y.key==="actions"?y.label:e.jsxs("div",{className:"sortable-header",onClick:()=>I(y.key),children:[y.label,e.jsx("span",{className:"sort-icon",children:g===y.key?d?"":"":""})]}),z=[{key:"checkbox",label:e.jsx("input",{type:"checkbox",onChange:B,checked:s.length===o.length&&o.length>0}),render:y=>e.jsx("input",{type:"checkbox",checked:s.includes(y.id),onChange:()=>D(y.id)})},{key:"legal_name",label:"Legal Name",render:y=>y.legal_name||e.jsx("span",{children:"-"})},{key:"vendor_code",label:"Code",render:y=>y.vendor_code||e.jsx("span",{children:"-"})},{key:"primary_address",label:"Address",render:y=>y.primary_address||e.jsx("span",{children:"-"})},{key:"primary_phone",label:"Phone",render:y=>y.primary_phone||e.jsx("span",{children:"-"})},{key:"primary_email",label:"Email",render:y=>y.primary_email||e.jsx("span",{children:"-"})},{key:"vendor_type",label:"Type",render:y=>y.vendor_type||e.jsx("span",{children:"-"})},{key:"service",label:"Service",render:y=>y.service||e.jsx("span",{children:"-"})},{key:"actions",label:"",render:y=>e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>L(y),className:"btn-view",children:e.jsx(ie,{})}),e.jsx("button",{onClick:()=>V(y),className:"btn-edit",children:e.jsx(ne,{})})]})}];return e.jsxs("div",{children:[e.jsxs("div",{className:"header-container",children:[e.jsx("div",{className:"header-container-left",children:e.jsx("div",{className:"header-actions",children:e.jsx("h1",{className:"page-heading",children:"Vendors"})})}),e.jsxs("div",{className:"search-container",children:[e.jsxs("div",{className:"search-input-wrapper",children:[e.jsx(ce,{className:"search-icon"}),e.jsx("input",{className:"search-bar",value:p,onChange:y=>h(y.target.value)})]}),e.jsxs("button",{onClick:()=>E(!0),className:"add-button",children:[e.jsx(R,{}),"New"]}),e.jsx("button",{onClick:()=>$(!0),className:"send-email-button",disabled:s.length===0,children:e.jsx(de,{})}),e.jsx("button",{onClick:Y,className:"delete-button",children:e.jsx(re,{})})]})]}),c?e.jsx("div",{children:"Loading..."}):x.length===0?e.jsx("div",{className:"no-record",children:"No records found"}):e.jsx(le,{data:o,headers:z.map(y=>({...y,label:Q(y)})),handleSort:I,sortBy:g,sortDesc:d}),e.jsx(oe,{currentPage:i,totalPages:r,onPageChange:O}),e.jsx(Z,{isOpen:t,title:"Edit Vendor",onClose:()=>j(!1),children:f&&e.jsx(ia,{vendor:f,onUpdate:U,onClose:()=>j(!1)})}),e.jsx(Z,{isOpen:l,onClose:()=>E(!1),title:"Add Vendor",children:e.jsx(Te,{onClose:()=>E(!1),onSuccess:a})}),e.jsx(Z,{isOpen:u,onClose:()=>$(!1),title:"Send Email",children:e.jsxs("div",{className:"email-modal",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"subject",children:"Subject:"}),e.jsx("input",{type:"text",placeholder:"Subject",onChange:y=>q({...w,subject:y.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content",children:"Content:"}),e.jsx("textarea",{placeholder:"Content",onChange:y=>q({...w,content:y.target.value})})]}),e.jsx("button",{type:"submit",onClick:T,children:"Send"})]})}),e.jsx(Z,{isOpen:m,onClose:()=>C(!1),title:"Vendor Details",children:f&&e.jsx(fa,{vendor:f,onClose:()=>C(!1)})})]})},Ma=()=>e.jsx("div",{children:e.jsx(va,{})});export{Ma as default};
